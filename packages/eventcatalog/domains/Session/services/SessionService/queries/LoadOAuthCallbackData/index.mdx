---
id: LoadOAuthCallbackData
name: Load OAuth Callback Data
version: 0.0.1
summary: |
  Query to retrieve and validate OAuth callback parameters for session creation.
---

## Description

This query retrieves the OAuth callback data from a pending authorization flow.
It validates the state token against the stored value and returns the authorization code and provider details needed for session creation.

## Query parameters

- `stateToken`: The CSRF state token from the callback URL
- `provider`: The OAuth provider (GitHub or Google)

## Response

Returns the stored OAuth flow data including authorization code, redirect URI, and requested scopes.
Returns an error if the state token is invalid, expired, or not found.

## Read model

The query reads from a temporary store of pending OAuth flows, keyed by state token with short TTL.
