{"id":"ironstar-09r","title":"Implement ds-echarts Lit web component wrapper","description":"Implement ds-echarts Lit web component wrapper as a Moore machine coalgebra with event-driven state transitions.\n\nCoalgebra structure:\n- State: { option: ChartConfig, theme: string, chart: ECharts | null }\n- Output: render() → canvas/SVG DOM\n- Transition: updated() lifecycle + event handlers\n\nBisimulation equivalence ensures morphing safety: two states are behaviorally equivalent if they produce the same output and transition to equivalent states on all inputs.\n\nReference: denotational-semantics.md 'Web components as coalgebras' section.","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-18T17:11:35.194612-05:00","updated_at":"2025-12-29T17:56:47.002607-05:00","dependencies":[{"issue_id":"ironstar-09r","depends_on_id":"ironstar-ny3","type":"blocks","created_at":"2025-12-18T17:42:37.015164-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-09r","depends_on_id":"ironstar-r62.5","type":"blocks","created_at":"2025-12-18T18:05:59.594439-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-09r","depends_on_id":"ironstar-2nt.5","type":"blocks","created_at":"2025-12-18T18:06:00.395546-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-09r","depends_on_id":"ironstar-e6k.7","type":"blocks","created_at":"2025-12-18T18:06:01.653399-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-09r","depends_on_id":"ironstar-r62.10","type":"blocks","created_at":"2025-12-18T18:06:02.54407-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-09r","depends_on_id":"ironstar-2nt.9","type":"blocks","created_at":"2025-12-24T00:56:27.561894-05:00","created_by":"daemon"}]}
{"id":"ironstar-0ha","title":"Document SSE projection function semantics","description":"Add documentation explaining SSE projection function semantics.\n\nDocument:\n1. Totality: every domain event maps to at least one patch type (or Option::None for no-ops)\n2. Determinism: same event always produces same patch\n3. Identity preservation: event sequence order = patch sequence order\n4. Conformance to datastar SDK specification\n\nReference: semantic-model.md § SSE streaming as projection function","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-30T21:59:20.075625-05:00","created_by":"crs58","updated_at":"2026-01-05T12:22:38.352593-05:00","dependencies":[{"issue_id":"ironstar-0ha","depends_on_id":"ironstar-r62","type":"subtask","created_at":"2025-12-30T21:59:39.763621-05:00","created_by":"daemon"}]}
{"id":"ironstar-0tk","title":"Omicslake presentation slide deck","description":"Perfect the ~45 minute Omicslake presentation tracing HDF5/AnnData → DuckLake → ironstar/Datastar stack. Located in docs/slides/ironstar-overview/. Target: compelling technical narrative for genomics/data engineering audience.","status":"tombstone","priority":1,"issue_type":"epic","created_at":"2025-12-19T01:15:51.175245-05:00","updated_at":"2025-12-26T20:51:42.303177-05:00","deleted_at":"2025-12-26T20:51:42.303177-05:00","deleted_by":"daemon","delete_reason":"delete","original_type":"epic"}
{"id":"ironstar-1ks","title":"Wire Workspace EventSourcedAggregate to SQLite","description":"Wire Workspace bounded context Deciders to SQLite event store using fmodel-rust EventSourcedAggregate pattern.\n\n## Context\n\nFollowing ironstar-a9b.7 (Wire Todo EventSourcedAggregate), this task connects the Workspace Deciders to SQLite persistence.\n\n## Implementation requirements\n\n**Location**: `crates/ironstar/src/infrastructure/event_store/workspace.rs`\n\n**Per-aggregate event stores**: Create separate EventRepository implementations for each Workspace aggregate:\n- WorkspaceEventStore (for WorkspaceAggregate)\n- DashboardEventStore\n- SavedQueryEventStore\n- WorkspacePreferencesEventStore\n- UserPreferencesEventStore\n\n**Aggregate ID routing**: Use the aggregate ID patterns defined in the Deciders.\n\n**Optimistic locking**: Use `previous_id` chain from event store schema.\n\n## Acceptance criteria\n\n- [ ] EventRepository trait implementations for all 5 aggregates\n- [ ] Aggregate ID parsing and routing\n- [ ] Optimistic locking via previous_id\n- [ ] Integration tests with in-memory SQLite\n\n## References\n\n- ironstar-a9b.7 task description\n- crates/ironstar/src/infrastructure/ (Todo event store reference)","status":"tombstone","priority":2,"issue_type":"task","owner":"cameron.ray.smith@gmail.com","created_at":"2026-01-18T12:25:40.578931-05:00","created_by":"Cameron Smith","updated_at":"2026-01-18T12:26:47.316252-05:00","deleted_at":"2026-01-18T12:26:47.316252-05:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"ironstar-2it","title":"Complete Event Modeling and EventCatalog documentation","description":"Complete the Event Modeling workflow to produce implementation-ready specifications and populate EventCatalog with discoverable documentation for ironstar's architecture.\n\n## Context\n\nIronstar's architecture is documented in `docs/notes/architecture/` but lacks formal Event Modeling artifacts that trace domain discoveries to implementation specifications. This epic bridges collaborative domain discovery to formal EventCatalog documentation following the workflows in:\n\n- `~/.claude/commands/preferences/event-modeling.md` (7-step methodology)\n- `~/.claude/commands/preferences/event-catalog-qlerify.md` (transformation workflow)\n- `~/.claude/commands/preferences/event-catalog-tooling.md` (algebraic foundations)\n\n## Current state\n\n- D2 diagrams exist in `docs/notes/event-modeling/d2/` (4 files: bounded-contexts, analytics-context-timeline, session-context-timeline, todo-context-timeline)\n- Empty `qlerify/` directory awaits JSON exports\n- No EventCatalog infrastructure exists yet\n- Architecture documentation describes intended design but lacks formal event/command/aggregate schemas\n\n## Deliverables\n\n1. Completed Event Modeling sessions for all bounded contexts\n2. Refined D2 diagrams following Event Modeling color conventions\n3. Qlerify JSON exports with field-level schemas\n4. EventCatalog instance with MDX artifacts:\n   - Domain, Service, Event, Command, Query, Entity, Flow definitions\n   - JSON Schema for all artifacts\n   - Producer/consumer relationships\n5. Integration with fmodel-rust Decider pattern implementation\n\n## Strategic alignment\n\nThis work supports ironstar-a9b (fmodel-rust event sourcing foundation) by providing formal specifications that map directly to Decider implementations. The Event Modeling artifacts trace to:\n\n- Events → `Event` type parameter in Decider\n- Commands → `Command` type parameter in Decider  \n- Aggregates → `State` type and `evolve` function\n- Read Models → View projections\n\n## References\n\n- docs/notes/architecture/core/discovery-and-specification.md\n- docs/notes/architecture/decisions/fmodel-rust-adoption-evaluation.md\n- ~/projects/lakescope-workspace/eventcatalog (EventCatalog source)\n- ~/projects/rust-workspace/fmodel-rust (Decider pattern implementation)","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-06T13:17:22.543072-05:00","created_by":"crs58","updated_at":"2026-01-15T18:25:09.578471-05:00","closed_at":"2026-01-15T18:25:09.578471-05:00","close_reason":"All children complete: Event Modeling workflow, Qlerify exports, EventCatalog infrastructure, Idris2 specs, fmodel-rust Decider docs, value object entities, and ubiquitous language across 4 domains"}
{"id":"ironstar-2it.1","title":"Generate Qlerify prompts for all bounded contexts","description":"Create natural language workflow prompts for Qlerify AI generation following the Event Modeling Step 1 (Brainstorming) methodology.\n\n## Bounded contexts to model\n\nBased on `docs/notes/event-modeling/d2/bounded-contexts.d2`:\n\n1. **Session Context** (Supporting) - OAuth authentication, session lifecycle\n2. **Todo Context** (Generic Example) - CRUD operations for demonstration\n3. **Analytics Context** (Core) - Query execution, chart rendering, cache management\n\n## Prompt structure per context\n\nEach prompt should include (per event-modeling.md):\n- Primary actors and roles\n- Key state-changing events in chronological order\n- External systems involved (OAuth providers, DuckDB, Zenoh)\n- Success and failure scenarios\n\n## Output\n\n`docs/notes/event-modeling/qlerify/prompts/`:\n- session-context-prompt.md\n- todo-context-prompt.md\n- analytics-context-prompt.md\n\nPrompts should reference existing architecture docs:\n- docs/notes/architecture/core/design-principles.md\n- docs/notes/architecture/core/bounded-contexts.md\n- docs/notes/architecture/cqrs/event-sourcing-core.md\n\n## Alignment with fmodel-rust\n\nPrompts should anticipate fmodel-rust Decider pattern:\n- Commands as inputs to `decide` function\n- Events as outputs of `decide` function\n- State transitions via `evolve` function","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-06T13:17:53.504232-05:00","created_by":"crs58","updated_at":"2026-01-11T00:38:17.070718-05:00","closed_at":"2026-01-11T00:38:17.070718-05:00","close_reason":"Prompts generated in docs/notes/event-modeling/qlerify-prompts/","dependencies":[{"issue_id":"ironstar-2it.1","depends_on_id":"ironstar-2it","type":"parent-child","created_at":"2026-01-06T13:17:53.506983-05:00","created_by":"crs58"},{"issue_id":"ironstar-2it.1","depends_on_id":"ironstar-2it.16","type":"blocks","created_at":"2026-01-06T13:41:15.603896-05:00","created_by":"crs58"}]}
{"id":"ironstar-2it.10","title":"Transform Qlerify JSON to EventCatalog MDX (Phase 3: Entities and Flows)","description":"Execute Phase 7-8 of the transformation workflow from event-catalog-qlerify.md.\n\n## Prerequisites\n\n- Events, commands, queries created (ironstar-2it.9)\n\n## Phase 7: Extract entities from AggregateRoot cards\n\nFor each Entity schema (type=Entity), generate entity MDX:\n\n`domains/ironstar/entities/Session/index.mdx`:\n```yaml\n---\nid: Session\nname: Session\nversion: 0.0.1\nsummary: User session aggregate root\nowners: []\naggregateRoot: true\nidentifier: sessionId\nproperties:\n  - name: sessionId\n    type: string\n    required: true\n    summary: Unique session identifier (UUID)\n  - name: userId\n    type: string\n    required: true\n    summary: Associated user identity\n  - name: expiresAt\n    type: string\n    required: true\n    summary: Session expiration timestamp (ISO 8601)\n---\n```\n\n### Decider pattern documentation\n\nEntity MDX should document:\n- `decide` function: command → state → events\n- `evolve` function: state → event → state\n- Link to fmodel-rust implementation\n\n## Phase 8: Generate flow from parent-child chains\n\nReconstruct temporal flow from domainEvent.parents[]:\n\n`domains/ironstar/flows/session-lifecycle/index.mdx`:\n```yaml\n---\nid: session-lifecycle\nname: Session Lifecycle Flow\nversion: 0.0.1\nsummary: OAuth login through session expiration\nsteps:\n  - id: step-1\n    title: OAuth Callback Received\n    actor:\n      name: Guest\n    message:\n      id: OAuthCallback\n      version: \"0.0.1\"\n    service:\n      id: SessionService\n    next_step:\n      id: step-2\n      label: \"on success\"\n  - id: step-2\n    title: Session Created\n    message:\n      id: SessionCreated\n    service:\n      id: SessionService\n---\n```\n\n## Output\n\n- Entity MDX for all aggregates (Session, Todo, QuerySession)\n- Flow MDX for primary workflows:\n  - session-lifecycle\n  - todo-crud\n  - analytics-query-execution","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-06T13:19:28.713284-05:00","created_by":"crs58","updated_at":"2026-01-11T01:07:07.123752-05:00","closed_at":"2026-01-11T01:07:07.123752-05:00","close_reason":"Created 8 entity definitions and 9 flow/channel files. Entity commit: 2fed973, Flow commits: 7322543..e551718","dependencies":[{"issue_id":"ironstar-2it.10","depends_on_id":"ironstar-2it","type":"parent-child","created_at":"2026-01-06T13:19:28.715934-05:00","created_by":"crs58"},{"issue_id":"ironstar-2it.10","depends_on_id":"ironstar-2it.9","type":"blocks","created_at":"2026-01-06T13:19:42.555946-05:00","created_by":"crs58"}]}
{"id":"ironstar-2it.11","title":"Cross-reference and validate EventCatalog artifacts (Phase 9)","description":"Execute Phase 9 of the transformation workflow: link all artifacts through cross-references and validate output quality.\n\n## Prerequisites\n\n- All MDX artifacts generated (ironstar-2it.10)\n\n## Cross-referencing\n\n### Update service sends/receives\n\nFor each service:\n- `sends`: events where domainEvent.laneId matches service's lane\n- `receives`: commands/events consumed by this service\n- `entities`: aggregates owned by this service\n\n### Update event consumers\n\nFor each event:\n- `consumers`: services whose lanes contain domainEvents listing this event in parents[]\n\n### Update command producers\n\nFor each command:\n- `producers`: services/actors that trigger this command\n\n## Validation checklist\n\nPer event-catalog-qlerify.md:\n- [ ] All schema.json files are valid JSON Schema draft-07\n- [ ] All service cross-references point to existing artifacts\n- [ ] All flow steps reference valid messages and services\n- [ ] All inferred types have confidence notes\n- [ ] All enum fields have populated enum arrays\n- [ ] All aggregate roots have aggregateRoot: true and identifier\n\n## Structural validation commands\n\n```bash\n# Verify schema files\nfd -e json -x jaq '.\"\"' {} \\;\n\n# Count artifacts by type\necho \"Services: $(fd -t d . domains/*/services | wc -l)\"\necho \"Events: $(fd index.mdx domains/*/services/*/events | wc -l)\"\necho \"Commands: $(fd index.mdx domains/*/services/*/commands | wc -l)\"\necho \"Entities: $(fd index.mdx domains/*/entities | wc -l)\"\necho \"Flows: $(fd index.mdx domains/*/flows | wc -l)\"\n```\n\n## Output\n\n- Fully cross-referenced EventCatalog\n- Validation report\n- No orphan artifacts (all linked bidirectionally)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-06T13:19:30.209913-05:00","created_by":"crs58","updated_at":"2026-01-11T01:07:57.346552-05:00","closed_at":"2026-01-11T01:07:57.346552-05:00","close_reason":"Validated 70 schema.json files, removed placeholder content. Final counts: 3 domains, 6 services, 26 events, 24 commands, 20 queries, 8 entities, 6 flows, 3 channels","dependencies":[{"issue_id":"ironstar-2it.11","depends_on_id":"ironstar-2it","type":"parent-child","created_at":"2026-01-06T13:19:30.212643-05:00","created_by":"crs58"},{"issue_id":"ironstar-2it.11","depends_on_id":"ironstar-2it.10","type":"blocks","created_at":"2026-01-06T13:19:42.657035-05:00","created_by":"crs58"}]}
{"id":"ironstar-2it.12","title":"Document fmodel-rust Decider mapping in EventCatalog","description":"Enhance EventCatalog documentation to explicitly show mapping between Event Modeling artifacts and fmodel-rust Decider pattern.\n\n## Prerequisites\n\n- Cross-referenced EventCatalog complete (ironstar-2it.11)\n\n## Decider pattern mapping\n\nFor each aggregate entity, document:\n\n### decide function\n```rust\nfn decide(command: Command, state: \u0026State) -\u003e Result\u003cVec\u003cEvent\u003e, Error\u003e\n```\n\nMap EventCatalog commands to decide inputs, events to decide outputs.\n\n### evolve function\n```rust\nfn evolve(state: State, event: Event) -\u003e State\n```\n\nDocument state transitions per event type.\n\n### initial_state\n```rust\nfn initial_state() -\u003e State\n```\n\nDocument initial aggregate state.\n\n## Entity MDX enhancements\n\nAdd to each entity:\n```markdown\n## fmodel-rust implementation\n\nThis aggregate implements the Decider pattern from fmodel-rust:\n\n- **decide**: Validates commands and produces events\n- **evolve**: Applies events to update state\n- **initial_state**: Returns empty/default state\n\nSee `crates/ironstar/src/domain/{aggregate}/decider.rs`\n```\n\n## References section\n\nLink each entity to:\n- fmodel-rust source: ~/projects/rust-workspace/fmodel-rust\n- fmodel-rust-demo patterns: ~/projects/rust-workspace/fmodel-rust-demo\n- ironstar evaluation: docs/notes/architecture/decisions/fmodel-rust-adoption-evaluation.md\n\n## Output\n\n- Enhanced entity MDX with Decider documentation\n- Clear traceability from EventCatalog to implementation","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-06T13:19:31.537333-05:00","created_by":"crs58","updated_at":"2026-01-15T14:19:28.222073-05:00","closed_at":"2026-01-15T14:19:28.222073-05:00","close_reason":"Complete: All 6 aggregate entities now have fmodel-rust Implementation sections with decide/evolve/initial_state documentation. Commits b3a42d9..1fe3b60.","dependencies":[{"issue_id":"ironstar-2it.12","depends_on_id":"ironstar-2it","type":"parent-child","created_at":"2026-01-06T13:19:31.540256-05:00","created_by":"crs58"},{"issue_id":"ironstar-2it.12","depends_on_id":"ironstar-2it.11","type":"blocks","created_at":"2026-01-06T13:19:42.752194-05:00","created_by":"crs58"}]}
{"id":"ironstar-2it.13","title":"Review bounded context definitions against architecture docs","description":"Validate that D2 bounded-contexts.d2 accurately reflects the architecture documented in docs/notes/architecture/, with special attention to the scientific data analysis business context.\n\n## Business context\n\nIronstar's primary purpose is a **DuckDB/DuckLake query and Lit ECharts web component data analysis dashboard for scientific data analysis**. This context must drive the Event Modeling artifacts:\n\n- Analytics Context is Core (primary differentiator)\n- Todo Context is Generic Example (demonstration only)\n- Session Context is Supporting (authentication infrastructure)\n\n## Artifacts to cross-reference\n\n### D2 diagram\n`docs/notes/event-modeling/d2/bounded-contexts.d2`\n\nCurrent contexts:\n- Session Context (Supporting) — Session aggregate\n- Todo Context (Generic Example) — Todo aggregate\n- Analytics Context (Core) — QuerySession aggregate\n\n### Architecture docs to validate against\n\n- `docs/notes/architecture/core/bounded-contexts.md` (if exists)\n- `docs/notes/architecture/core/architecture-decisions.md` § bounded context decisions\n- `docs/notes/architecture/core/design-principles.md` § strategic classification\n- `docs/notes/architecture/decisions/fmodel-rust-adoption-evaluation.md` § aggregate mapping\n- `docs/notes/architecture/frontend/ds-echarts-integration-guide.md`\n- `docs/notes/architecture/application/chart-transformer-pattern.md`\n\n### Scientific data integration references\n\n- `ironstar-3gd` epic children (Scientific Data Integration)\n- HuggingFace Hub integration patterns (`hf://` protocol)\n- DuckLake catalog versioning\n- `~/projects/rust-workspace/rust-duckdb-huggingface-ducklake-query`\n\n## Validation checklist\n\n- [ ] All aggregates in D2 are documented in architecture docs\n- [ ] Strategic classification (Core/Supporting/Generic) is consistent\n- [ ] Integration patterns (Customer-Supplier, Partnership) match architecture intent\n- [ ] Event bus (Zenoh) key expression schema matches both artifacts\n- [ ] No orphan concepts (in D2 but not in docs, or vice versa)\n- [ ] Analytics Context adequately captures scientific data analysis workflows\n- [ ] Dataset management (DuckLake, HuggingFace) is represented or planned\n\n## Questions to resolve\n\n- Is QuerySession the right aggregate name? (vs AnalyticsSession, DatasetQuery)\n- Should there be a separate Dataset aggregate for dataset catalog management?\n- Should Dashboard composition (multiple charts) be a separate aggregate or part of QuerySession?\n- Are chart configuration persistence and query history adequately modeled?\n\n## Output\n\n- Updated D2 if discrepancies found\n- Updated architecture docs if D2 reveals gaps\n- Validation notes documenting any decisions made\n- Clear articulation of scientific data analysis event flows","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-06T13:40:28.529702-05:00","created_by":"crs58","updated_at":"2026-01-06T22:18:16.072122-05:00","closed_at":"2026-01-06T22:18:16.072122-05:00","close_reason":"Completed in commits fcdd92b, e83c3a9. D2 updated, bounded-contexts.md documented.","dependencies":[{"issue_id":"ironstar-2it.13","depends_on_id":"ironstar-2it","type":"parent-child","created_at":"2026-01-06T13:40:28.530431-05:00","created_by":"crs58"}],"comments":[{"id":6,"issue_id":"ironstar-2it.13","author":"crs58","text":"## Validation Complete\n\n**Discrepancies found and resolved:**\n\n1. **Missing Catalog aggregate** in D2 → Added with SelectCatalog/RefreshCatalogMetadata commands and CatalogSelected/CatalogMetadataRefreshed events\n\n2. **Todo-Analytics Partnership** in D2 conflicted with \"Standalone\" documentation → Removed Partnership edge; Todo is intentionally isolated\n\n3. **Todo framing** updated from \"Generic Example\" to \"Generality Canary\" — emphasizes its role as template validation rather than demonstration\n\n**Commits:**\n- fcdd92b: docs(event-modeling): add Catalog aggregate, remove Todo-Analytics partnership\n- e83c3a9: docs(architecture): reframe Todo as generality canary\n\n**Alignment verified:**\n- 4 bounded contexts: Analytics (Core), Session (Supporting), Workspace (Supporting), Todo (Generality Canary)\n- Analytics now has 3 aggregates: QuerySession, ChartDefinition, Catalog\n- Integration patterns: Customer-Supplier (Session→*, Analytics→Workspace), Shared Kernel (Session→Workspace)\n- Zenoh key expressions correctly namespace all 4 contexts\n\nReady for .14/.15 upstream pattern validation.","created_at":"2026-01-06T21:14:36Z"}]}
{"id":"ironstar-2it.14","title":"Cross-reference northstar patterns for Datastar SSE architecture","description":"Review northstar (Go template) patterns to ensure ironstar correctly adapts Datastar SSE streaming architecture.\n\n## Source repository\n\n`~/projects/lakescope-workspace/datastar-go-nats-template-northstar`\n\n## Patterns to validate\n\n### SSE streaming architecture\n- How northstar structures SSE endpoints\n- Signal merging patterns (MergeFragments, MergeSignals)\n- Last-Event-ID reconnection handling\n- Keep-alive comment streams\n\n### Web component integration\n- ds-echarts Lit component pattern\n- Light DOM requirement for Open Props token inheritance\n- Build pipeline (esbuild in northstar → Rolldown in ironstar)\n\n### Event bus patterns\n- NATS in northstar → Zenoh in ironstar\n- Key expression filtering equivalents\n- Per-session subscription patterns\n\n### Asset embedding\n- hashfs pattern in Go → rust-embed in Rust\n- Content-hashed URLs\n- Dev/prod mode separation\n\n## Validation against ironstar docs\n\nCross-reference findings with:\n- `docs/notes/architecture/frontend/ds-echarts-integration-guide.md`\n- `docs/notes/architecture/infrastructure/zenoh-event-bus.md`\n- `docs/notes/architecture/cqrs/sse-connection-lifecycle.md`\n- `docs/notes/architecture/frontend/frontend-build-pipeline.md`\n\n## Output\n\n- Document any pattern gaps or adaptations needed\n- Update architecture docs if northstar reveals missing patterns\n- Note any patterns that don't translate directly to Rust\n\n## Key files to review in northstar\n\n- `internal/sse/` — SSE streaming implementation\n- `internal/web/` — Web component integration\n- `web/components/ds-echarts/` — ECharts Lit component\n- `cmd/server/main.go` — Application wiring","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-06T13:41:03.029071-05:00","created_by":"crs58","updated_at":"2026-01-06T22:18:16.168531-05:00","closed_at":"2026-01-06T22:18:16.168531-05:00","close_reason":"Completed in def6a6d. Output: northstar-sse-patterns-for-idris2.md","dependencies":[{"issue_id":"ironstar-2it.14","depends_on_id":"ironstar-2it","type":"parent-child","created_at":"2026-01-06T13:41:03.033276-05:00","created_by":"crs58"}],"comments":[{"id":7,"issue_id":"ironstar-2it.14","author":"crs58","text":"## Task .14 Complete\n\nExtracted northstar SSE patterns to: `docs/notes/architecture/decisions/northstar-sse-patterns-for-idris2.md`\n\n**Key findings:**\n- Effect boundaries mapped: pure core (Decider) vs effects at edges (Subscribe, Append, SSE Write)\n- Invariants identified: monotonicity, replay idempotence, session isolation\n- 6 ironstar doc gaps found requiring updates\n- 3 northstar anti-patterns to avoid\n\n**Idris2 questions for .17:**\n- Dependent pairs for replay consistency proofs\n- Effect placement for subscribe-then-replay ordering\n- Algebraic properties: SSE projection totality, replay idempotence\n\nCommit: def6a6d","created_at":"2026-01-06T21:29:55Z"}]}
{"id":"ironstar-2it.15","title":"Cross-reference fmodel-rust patterns for Decider implementation","description":"Review fmodel-rust and fmodel-rust-demo patterns to ensure Event Modeling artifacts will map correctly to Decider implementations.\n\n## Source repositories\n\n- `~/projects/rust-workspace/fmodel-rust` — Core library\n- `~/projects/rust-workspace/fmodel-rust-demo` — Working example (Order + Restaurant domains)\n- `~/projects/rust-workspace/fmodel-rust-postgres` — PostgreSQL EventRepository\n- `~/projects/rust-workspace/fstore-sql` — Canonical event store schema\n\n## Patterns to validate\n\n### Decider trait mapping\n```rust\npub trait Decider\u003cC, S, E\u003e {\n    fn decide(\u0026self, command: \u0026C, state: \u0026S) -\u003e Vec\u003cE\u003e;\n    fn evolve(\u0026self, state: \u0026S, event: \u0026E) -\u003e S;\n    fn initial_state(\u0026self) -\u003e S;\n}\n```\n\nEnsure D2 diagrams capture:\n- Commands (blue) → C type parameter\n- Events (orange) → E type parameter\n- Aggregate state → S type parameter\n\n### Identifier traits\nFrom fmodel-rust:\n- `Identifier` — aggregate identity\n- `EventType` — event type discriminator\n- `DeciderType` — decider type discriminator\n- `IsFinal` — terminal event marker\n\nEnsure Event Modeling artifacts include these concepts.\n\n### EventRepository pattern\nFrom fmodel-rust-demo and fstore-sql:\n- `previous_id` UUID chain for optimistic locking\n- `offset BIGSERIAL` for global monotonic ordering\n- Partition locking for concurrent consumers\n\n### View/Projection pattern\n```rust\npub trait View\u003cS, E\u003e {\n    fn evolve(\u0026self, state: \u0026S, event: \u0026E) -\u003e S;\n    fn initial_state(\u0026self) -\u003e S;\n}\n```\n\nEnsure read models in D2 map to View implementations.\n\n## Validation against ironstar docs\n\n- `docs/notes/architecture/decisions/fmodel-rust-adoption-evaluation.md`\n- `docs/notes/architecture/cqrs/event-sourcing-core.md`\n- `docs/notes/architecture/core/discovery-and-specification.md`\n\n## Output\n\n- Validation that D2 artifacts align with fmodel-rust expectations\n- Document any gaps in current Event Modeling artifacts\n- Update D2 diagrams if fmodel-rust patterns reveal missing elements","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-06T13:41:03.952003-05:00","created_by":"crs58","updated_at":"2026-01-06T22:18:16.26782-05:00","closed_at":"2026-01-06T22:18:16.26782-05:00","close_reason":"Completed in 9aa10e9. Output: fmodel-rust-decider-signatures.md","dependencies":[{"issue_id":"ironstar-2it.15","depends_on_id":"ironstar-2it","type":"parent-child","created_at":"2026-01-06T13:41:03.95462-05:00","created_by":"crs58"}],"comments":[{"id":8,"issue_id":"ironstar-2it.15","author":"crs58","text":"## Task .15 Complete\n\nExtracted fmodel-rust Decider patterns to: `docs/notes/architecture/decisions/fmodel-rust-decider-signatures.md`\n\n**Key findings:**\n- Exact Decider\u003cC, S, E, Error\u003e signatures with Rust→Idris2 type mapping\n- Laws identified: decide purity, evolve totality, state reconstruction via fold\n- Effect boundary: Decider (pure) vs EventSourcedAggregate (effectful handle())\n- Composition: combine() for independent Deciders, merge() for shared event streams\n\n**Idris2 questions for .17:**\n- Trait bound encoding (implicit auto vs explicit constraints)\n- Effect type (IO vs Eff vs Free monad)\n- Proof obligations (postulate vs proof-carrying Decider)\n\nCommit: 9aa10e9","created_at":"2026-01-06T21:29:55Z"}]}
{"id":"ironstar-2it.16","title":"Co-refine D2 diagrams and Idris2 spec (iterative)","description":"Iterate between D2 visual representation and Idris2 algebraic specification until both are consistent. This is the synthesis step that produces implementation-ready artifacts.\n\n## Methodology\n\nType-driven Event Modeling uses two complementary views:\n- **D2 diagrams**: Visual topology (what connects to what, temporal flow)\n- **Idris2 spec**: Algebraic structure (what operations are valid, type invariants)\n\nIterate until both views represent the same domain model:\n\n```\n┌─────────────────────────────────────────────────────────┐\n│                                                         │\n│   Idris2 spec ←────────────→ D2 diagrams               │\n│        ↑                           ↑                    │\n│        │     iterate until         │                    │\n│        │     consistent            │                    │\n│        ↓                           ↓                    │\n│   Type errors reveal      Visual gaps reveal            │\n│   missing concepts        missing transitions           │\n│                                                         │\n└─────────────────────────────────────────────────────────┘\n```\n\n## Input artifacts\n\n### Idris2 spec (from .17-.21)\n- spec/src/Decider.idr\n- spec/src/Repository.idr\n- spec/src/Domain/Analytics/*.idr\n- spec/src/Domain/Session.idr\n- spec/src/Domain/Todo.idr\n\n### D2 diagrams\n- docs/notes/event-modeling/d2/bounded-contexts.d2\n- docs/notes/event-modeling/d2/analytics-context-timeline.d2\n- docs/notes/event-modeling/d2/session-context-timeline.d2\n- docs/notes/event-modeling/d2/todo-context-timeline.d2\n\n## Refinement checklist\n\n### Structural alignment\n- [ ] Every Idris2 aggregate has a D2 yellow box\n- [ ] Every Idris2 event constructor has a D2 orange node\n- [ ] Every Idris2 command constructor has a D2 blue node\n- [ ] Every Idris2 state has representation in D2 swimlanes\n\n### Semantic alignment\n- [ ] D2 transition arrows match valid Idris2 state machine transitions\n- [ ] D2 read models (green) match Idris2 query return types\n- [ ] D2 external systems (purple) match Idris2 Repository/effect interfaces\n\n### Dependent type validation\n- [ ] Idris2 preconditions (e.g., CatalogActive required for QuerySession) reflected in D2 flow\n- [ ] Idris2 state machine constraints match D2 allowed transitions\n- [ ] No D2 path that violates Idris2 type constraints\n\n## Resolution process\n\nWhen mismatch found:\n1. Determine which artifact is \"correct\" (consult architecture docs)\n2. Update the other artifact\n3. Re-verify type-checking (Idris2) or render (D2)\n4. Document the decision\n\n## Output\n\n- [ ] Consistent D2 diagrams matching Idris2 spec\n- [ ] Consistent Idris2 spec matching D2 diagrams\n- [ ] Resolution log documenting decisions made\n- [ ] Ready for Qlerify prompt generation (.1)\n\n## Reference materials\n\n### Domain modeling methodology\n- Wlaschin: ~/projects/functional-programming-workspace/domain-modeling-made-functional\n- Ghosh: ~/projects/functional-programming-workspace/functional-and-reactive-domain-modeling\n\n### Idris2 reference\n- ~/projects/functional-programming-workspace/Idris2/docs/","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-06T13:41:06.54481-05:00","created_by":"crs58","updated_at":"2026-01-06T20:52:06.259975-05:00","closed_at":"2026-01-06T20:52:06.259975-05:00","close_reason":"Co-refinement complete (76ad49e). D2 aligned with Idris2: OAuth as infrastructure, ChartDefinition→SK VO, tab management added. DashboardLayoutView added to spec.","dependencies":[{"issue_id":"ironstar-2it.16","depends_on_id":"ironstar-2it","type":"parent-child","created_at":"2026-01-06T13:41:06.54753-05:00","created_by":"crs58"},{"issue_id":"ironstar-2it.16","depends_on_id":"ironstar-2it.21","type":"blocks","created_at":"2026-01-06T15:02:03.816255-05:00","created_by":"crs58"}]}
{"id":"ironstar-2it.17","title":"Create Idris2 spec infrastructure and core abstractions","description":"Set up the spec/ directory structure and implement core Decider + Repository abstractions in Idris2.\n\n## Business context\n\nIdris2 formal specification serves as machine-checkable source of truth for ironstar's event-sourced domain model. The spec enables type-driven discovery during Event Modeling, catching inconsistencies early through dependent types.\n\n## Directory structure\n\n```\nspec/\n├── ironstar.ipkg              # Idris2 package definition\n├── README.md                  # Purpose, type-checking instructions, methodology\n└── src/\n    ├── Decider.idr            # Core Decider pattern with dependent types\n    ├── Repository.idr         # EventRepository interface (fstore-sql pattern)\n    ├── Domain/                # Bounded context modules (separate tasks)\n    └── IronstarSpec.idr       # Top-level re-export (separate task)\n```\n\n## Decider.idr specification\n\nTranslate fmodel-rust's Decider pattern to Idris2 with dependent types:\n\n```idris\nrecord Decider (command : Type) (state : Type) (event : Type) where\n  constructor MkDecider\n  decide : command -\u003e state -\u003e List event\n  evolve : state -\u003e event -\u003e state\n  initialState : state\n  -- Dependent type: evolve preserves state validity\n  -- evolvePreservesValidity : ValidState s -\u003e (e : event) -\u003e ValidState (evolve s e)\n```\n\n## Repository.idr specification\n\nTranslate fstore-sql EventRepository pattern:\n\n```idris\ninterface EventRepository (m : Type -\u003e Type) (event : Type) where\n  append : event -\u003e m ()\n  loadEvents : AggregateId -\u003e m (List event)\n  -- Dependent type: events are monotonically ordered by sequence\n```\n\n## Reference materials\n\n### fmodel-rust (Decider pattern)\n- Source: ~/projects/rust-workspace/fmodel-rust\n- Key files: src/decider.rs, src/aggregate.rs\n\n### fstore-sql (EventRepository pattern)\n- Source: ~/projects/rust-workspace/fstore-sql\n- Key file: schema.sql (events table with previous_id chain)\n\n### Idris2 reference\n- Source: ~/projects/functional-programming-workspace/Idris2\n- Docs: ~/projects/functional-programming-workspace/Idris2/docs/\n\n### Domain modeling methodology\n- Wlaschin: ~/projects/functional-programming-workspace/domain-modeling-made-functional\n- Ghosh: ~/projects/functional-programming-workspace/functional-and-reactive-domain-modeling\n\n## Deliverables\n\n- [ ] spec/ directory created\n- [ ] spec/ironstar.ipkg with package definition\n- [ ] spec/README.md with methodology explanation\n- [ ] spec/src/Decider.idr with dependent-typed Decider record\n- [ ] spec/src/Repository.idr with EventRepository interface\n- [ ] Type-checking passes: `cd spec \u0026\u0026 idris2 --check ironstar.ipkg`\n\n## Acceptance criteria\n\n- Decider pattern matches fmodel-rust semantics\n- Repository interface matches fstore-sql pattern\n- Dependent types encode key invariants (state validity, event ordering)\n- README explains the spec's role in type-driven Event Modeling workflow","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-06T15:00:24.572065-05:00","created_by":"crs58","updated_at":"2026-01-06T16:50:19.348118-05:00","closed_at":"2026-01-06T16:50:19.348118-05:00","close_reason":"Implemented in 0510c7e","dependencies":[{"issue_id":"ironstar-2it.17","depends_on_id":"ironstar-2it","type":"parent-child","created_at":"2026-01-06T15:00:24.576097-05:00","created_by":"crs58"},{"issue_id":"ironstar-2it.17","depends_on_id":"ironstar-2it.13","type":"blocks","created_at":"2026-01-06T15:02:02.778864-05:00","created_by":"crs58"},{"issue_id":"ironstar-2it.17","depends_on_id":"ironstar-2it.14","type":"blocks","created_at":"2026-01-06T15:02:02.895132-05:00","created_by":"crs58"},{"issue_id":"ironstar-2it.17","depends_on_id":"ironstar-2it.15","type":"blocks","created_at":"2026-01-06T15:02:02.990401-05:00","created_by":"crs58"}],"comments":[{"id":9,"issue_id":"ironstar-2it.17","author":"crs58","text":"## Implementation Complete\n\nCreated Idris2 formal specification infrastructure at spec/.\n\n### Deliverables\n\n**Package:** spec/ironstar.ipkg\n- Version 0.1.0 with base dependency\n- All 9 modules typecheck with idris2 --typecheck\n\n**Core Modules:**\n\n1. **Core/Decider.idr** - Minimal algebraic interface for event-sourced aggregates\n   - `Decider c s e err` record with decide, evolve, initialState\n   - `Sum` and `Sum3` types for combining independent command/event types\n   - `combine`, `combine3` composition operators\n   - Derived computations: `reconstruct`, `computeNewEvents`, `computeNewState`\n   - Laws as reflexivity proofs (purity, determinism, replay)\n   - `foldlAssociative` lemma for snapshot support\n\n2. **Core/View.idr** - Read-side projections\n   - `View s e` record for event projection to read models\n   - `merge` composition for same-event-type projections\n   - `viewFromDecider` extraction function\n   - `mapState`, `contramapEvent` transformations\n\n3. **Core/Saga.idr** - Process managers\n   - `Saga ar a` record (action result → list of actions)\n   - `merge` composition for multi-workflow coordination\n   - `chain` (\u003e=\u003e) for sequential pipelines\n   - `identity`, `empty` as composition units\n   - `filter`, `fromMaybe` conditional constructors\n\n4. **Core/Effect.idr** - IO boundaries\n   - Identification types: EventId, AggregateId, Version, SessionId\n   - `EventRepository` interface with fetch, append, fetchSince\n   - `EventSourcedAggregate` record with `handleWith` function\n   - `ViewRepository`, `EventNotifier`, `EventSubscriber` interfaces\n   - `sessionKeyExpr` for Zenoh key pattern generation\n\n5. **Core/Event.idr** - Event algebra\n   - `Timestamp` for bitemporal events\n   - `EventEnvelope` wrapper with full metadata\n   - `EventIdLT`, `MonotonicIds` for ordering proofs\n   - Replay operations: `replayAfter`, `asOfEventTime`, `asOfRecordedTime`\n   - Free monoid laws (identity, associativity)\n   - `FailureEventPreservesState` interface (Hoffman's Law 6)\n\n**Stub Modules:**\n- Analytics.Stub, Session.Stub, Workspace.Stub, Todo.Stub\n- Each documents intended abstractions for .18/.19/.20/.22\n\n### Key Design Decisions\n\n1. **Effect boundaries:** Pure Decider/View/Saga, effectful EventRepository via IO monad\n2. **Laws as reflexivity:** Started with trivial proofs (x = x), upgrade to proper proofs incrementally\n3. **DPair over records:** For dependent fields like MonotonicSequence\n4. **Explicit function parameters:** handleWith takes fetch/append functions instead of interface constraints for simpler types\n\n### Commits\n- d65962f feat(spec): add Idris2 formal specification package definition\n- eacef1d feat(spec): add Core.Decider with fmodel-rust pattern\n- 5479262 feat(spec): add Core.View for read-side projections\n- 0b5759e feat(spec): add Core.Saga for process managers\n- a9db2ce feat(spec): add Core.Effect for IO boundaries\n- 07c7f53 feat(spec): add Core.Event for event algebra\n- 0510c7e feat(spec): add stub modules for bounded contexts\n\n### Typecheck verification\n```bash\ncd spec \u0026\u0026 idris2 --typecheck ironstar.ipkg\n# All 9 modules build successfully\n```\n\nUnblocks: .18 (Analytics), .19 (Session), .20 (Todo), .22 (Workspace)","created_at":"2026-01-06T21:50:07Z"}]}
{"id":"ironstar-2it.18","title":"Formalize Analytics bounded context in Idris2 (Core domain)","description":"Define the Analytics bounded context as Idris2 modules with dependent types. This is the Core domain (primary differentiator) warranting highest specification rigor.\n\n## Business context\n\nScientific data analysis dashboard using DuckDB/DuckLake + ECharts. The Analytics context handles:\n1. **Catalog selection** - Choose which DuckLake catalog to query (outside QuerySession)\n2. **Query execution** - Run SQL queries within selected catalog context\n3. **Chart rendering** - Transform query results to ECharts visualizations\n\n## Module structure\n\n```\nspec/src/Domain/Analytics/\n├── Catalog.idr        # DuckLake catalog selection (aggregate)\n├── QuerySession.idr   # Query execution within catalog (aggregate)\n└── Chart.idr          # Visualization types (value objects)\n```\n\n## Catalog.idr (Aggregate)\n\nManages DuckLake catalog selection. A catalog contains multiple datasets.\n\n```idris\n-- Commands\ndata CatalogCommand\n  = SelectCatalog CatalogRef\n  | RefreshCatalogMetadata\n\n-- Events  \ndata CatalogEvent\n  = CatalogSelected CatalogRef Timestamp\n  | CatalogMetadataRefreshed CatalogMetadata Timestamp\n\n-- State\ndata CatalogState\n  = NoCatalogSelected\n  | CatalogActive CatalogRef CatalogMetadata\n\n-- Value objects\nrecord CatalogRef where\n  constructor MkCatalogRef\n  uri : String  -- e.g., \"ducklake://hf/sciexp/fixtures\"\n  \nrecord CatalogMetadata where\n  constructor MkCatalogMetadata\n  datasets : List DatasetInfo\n  lastRefreshed : Timestamp\n```\n\n## QuerySession.idr (Aggregate)\n\nQuery execution within a selected catalog context.\n\n```idris\n-- Precondition: CatalogState must be CatalogActive\n-- This is where dependent types shine\n\n-- Commands\ndata QueryCommand\n  = StartQuery DatasetRef SqlQuery (Maybe ChartConfig)\n  | CancelQuery QueryId\n\n-- Events\ndata QueryEvent\n  = QueryStarted QueryId DatasetRef SqlQuery (Maybe ChartConfig) Timestamp\n  | QueryCompleted QueryId QueryResults Duration Timestamp\n  | QueryFailed QueryId ErrorMessage Timestamp\n\n-- State (state machine)\ndata QueryState\n  = Idle\n  | Running QueryId DatasetRef SqlQuery\n  | Completed QueryId QueryResults\n  | Failed QueryId ErrorMessage\n\n-- Invariant: Only one active query per session\n-- Dependent type can encode this\n```\n\n## Chart.idr (Value Objects)\n\nECharts configuration and data types.\n\n```idris\nrecord ChartConfig where\n  constructor MkChartConfig\n  chartType : ChartType\n  options : ChartOptions\n\ndata ChartType = Line | Bar | Scatter | Pie | Heatmap\n\nrecord ChartData where\n  constructor MkChartData\n  series : List Series\n  xAxis : Maybe AxisData\n  yAxis : Maybe AxisData\n```\n\n## Reference materials\n\n### D2 diagram\n- docs/notes/event-modeling/d2/analytics-context-timeline.d2\n\n### Architecture docs\n- docs/notes/architecture/frontend/ds-echarts-integration-guide.md\n- docs/notes/architecture/application/chart-transformer-pattern.md\n- docs/notes/architecture/infrastructure/analytics-cache-architecture.md\n\n### Domain modeling methodology\n- Wlaschin: ~/projects/functional-programming-workspace/domain-modeling-made-functional\n- Ghosh: ~/projects/functional-programming-workspace/functional-and-reactive-domain-modeling\n\n### Idris2 reference\n- ~/projects/functional-programming-workspace/Idris2/docs/\n\n## Dependent type opportunities\n\n1. **Catalog precondition**: QuerySession commands require CatalogActive state\n2. **Query state machine**: Transitions only valid from certain states\n3. **Dataset existence**: DatasetRef must exist in CatalogMetadata.datasets\n\n## Deliverables\n\n- [ ] spec/src/Domain/Analytics/Catalog.idr\n- [ ] spec/src/Domain/Analytics/QuerySession.idr\n- [ ] spec/src/Domain/Analytics/Chart.idr\n- [ ] All modules type-check\n- [ ] Cross-reference with D2 diagram for consistency","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-06T15:00:50.674753-05:00","created_by":"crs58","updated_at":"2026-01-06T19:48:09.551237-05:00","closed_at":"2026-01-06T19:48:09.551237-05:00","close_reason":"Implemented in 8f1c230. 4 modules: Catalog.idr, QuerySession.idr, Chart.idr, Analytics.idr","dependencies":[{"issue_id":"ironstar-2it.18","depends_on_id":"ironstar-2it","type":"parent-child","created_at":"2026-01-06T15:00:50.677777-05:00","created_by":"crs58"},{"issue_id":"ironstar-2it.18","depends_on_id":"ironstar-2it.17","type":"blocks","created_at":"2026-01-06T15:02:03.085681-05:00","created_by":"crs58"}]}
{"id":"ironstar-2it.19","title":"Formalize Session bounded context in Idris2 (Supporting domain)","description":"Define the Session bounded context as Idris2 module. This is a Supporting domain (authentication infrastructure).\n\n## Business context\n\nSession management for authenticated access. OAuth-based authentication with session lifecycle.\n\n## Module: spec/src/Domain/Session.idr\n\n```idris\n-- Commands\ndata SessionCommand\n  = CreateSession UserId OAuthProvider\n  | RefreshSession SessionId\n  | InvalidateSession SessionId\n\n-- Events\ndata SessionEvent\n  = SessionCreated SessionId UserId OAuthProvider Timestamp ExpiresAt\n  | SessionRefreshed SessionId NewExpiresAt Timestamp\n  | SessionInvalidated SessionId Timestamp\n  | SessionExpired SessionId Timestamp\n\n-- State\ndata SessionState\n  = NoSession\n  | Active SessionId UserId ExpiresAt\n  | Expired SessionId\n\n-- Value objects\nrecord SessionId where\n  constructor MkSessionId\n  value : UUID\n\ndata OAuthProvider = GitHub | Google\n\nrecord UserId where\n  constructor MkUserId\n  provider : OAuthProvider\n  externalId : String\n```\n\n## Dependent type opportunities\n\n1. **Session expiration**: Active state requires ExpiresAt \u003e now\n2. **State transitions**: Cannot refresh an Expired session\n3. **Provider consistency**: UserId.provider matches session's OAuthProvider\n\n## Reference materials\n\n### D2 diagram\n- docs/notes/event-modeling/d2/session-context-timeline.d2\n\n### Architecture docs\n- docs/notes/architecture/infrastructure/session-management.md\n- docs/notes/architecture/infrastructure/session-security.md\n- docs/notes/architecture/decisions/oauth-authentication.md\n\n### Domain modeling methodology\n- Wlaschin: ~/projects/functional-programming-workspace/domain-modeling-made-functional\n- Ghosh: ~/projects/functional-programming-workspace/functional-and-reactive-domain-modeling\n\n### Idris2 reference\n- ~/projects/functional-programming-workspace/Idris2/docs/\n\n## Deliverables\n\n- [ ] spec/src/Domain/Session.idr\n- [ ] Module type-checks\n- [ ] Cross-reference with D2 diagram","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-06T15:01:14.234565-05:00","created_by":"crs58","updated_at":"2026-01-06T19:48:09.692568-05:00","closed_at":"2026-01-06T19:48:09.692568-05:00","close_reason":"Implemented in 6f05f71. Session.idr with OAuth lifecycle Decider","dependencies":[{"issue_id":"ironstar-2it.19","depends_on_id":"ironstar-2it","type":"parent-child","created_at":"2026-01-06T15:01:14.237523-05:00","created_by":"crs58"},{"issue_id":"ironstar-2it.19","depends_on_id":"ironstar-2it.17","type":"blocks","created_at":"2026-01-06T15:02:03.197188-05:00","created_by":"crs58"}]}
{"id":"ironstar-2it.2","title":"Execute Qlerify sessions and refine generated models","description":"Execute the generated prompts in Qlerify, review AI output, and apply Steps 2-5 of the Event Modeling methodology.\n\n## Prerequisites\n\n- Qlerify prompts generated (ironstar-2it.1)\n- User logged into Qlerify app\n\n## Steps per bounded context\n\n### Step 2: The Plot\n- Review generated swimlanes\n- Reorganize from systems to actors (Guest, Manager, Automation)\n- Validate temporal ordering tells coherent narrative\n\n### Step 3: The Storyboard\n- Design UI mockups via command field ordering\n- Add/update/remove fields for natural form flow\n- For automation events: imagine robot filling form\n\n### Step 4: Identify Inputs\n- Validate command names match domain language\n- Ensure imperative mood (CreateTodo not TodoCreation)\n\n### Step 5: Identify Outputs\n- Define read models representing data needed before commands\n- Actor-centric: what does actor need to see before acting?\n\n## Output\n\nRefined Qlerify workflows for:\n- Session Context\n- Todo Context  \n- Analytics Context\n\n## Patterns to apply\n\nPer event-modeling.md:\n- Regular input form pattern (human actor fills form)\n- External event pattern (OAuth callbacks)\n- Translation pattern (GPS-style conditional logic if applicable)\n- Automation pattern (scheduled cache invalidation)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-06T13:17:54.480268-05:00","created_by":"crs58","updated_at":"2026-01-11T00:38:17.170767-05:00","closed_at":"2026-01-11T00:38:17.170767-05:00","close_reason":"Sessions executed, 283 versions in Qlerify","dependencies":[{"issue_id":"ironstar-2it.2","depends_on_id":"ironstar-2it","type":"parent-child","created_at":"2026-01-06T13:17:54.482904-05:00","created_by":"crs58"},{"issue_id":"ironstar-2it.2","depends_on_id":"ironstar-2it.1","type":"blocks","created_at":"2026-01-06T13:19:41.791413-05:00","created_by":"crs58"}]}
{"id":"ironstar-2it.20","title":"Formalize Todo bounded context in Idris2 (Generic Example)","description":"Define the Todo bounded context as Idris2 module. This is a Generic Example domain for template demonstration.\n\n## Business context\n\nSimple Todo list for demonstrating event sourcing patterns. Minimal complexity, clear state machine.\n\n## Module: spec/src/Domain/Todo.idr\n\n```idris\n-- Commands\ndata TodoCommand\n  = CreateTodo Text\n  | CompleteTodo TodoId\n  | UndoComplete TodoId\n  | DeleteTodo TodoId\n\n-- Events\ndata TodoEvent\n  = TodoCreated TodoId Text Timestamp\n  | TodoCompleted TodoId Timestamp\n  | TodoUncompleted TodoId Timestamp\n  | TodoDeleted TodoId Timestamp\n\n-- State (per Todo item)\ndata TodoItemState\n  = Active TodoId Text\n  | Completed TodoId Text\n  | Deleted TodoId\n\n-- Aggregate state (list of items)\nrecord TodoListState where\n  constructor MkTodoListState\n  items : List TodoItemState\n  \n-- Value objects\nrecord TodoId where\n  constructor MkTodoId\n  value : UUID\n```\n\n## Dependent type opportunities\n\n1. **State transitions**: Cannot complete a Deleted todo\n2. **Idempotency**: Completing an already-completed todo is no-op\n3. **Existence**: CompleteTodo requires TodoId exists in items\n\n## Reference materials\n\n### D2 diagram\n- docs/notes/event-modeling/d2/todo-context-timeline.d2\n\n### Domain modeling methodology\n- Wlaschin: ~/projects/functional-programming-workspace/domain-modeling-made-functional\n- Ghosh: ~/projects/functional-programming-workspace/functional-and-reactive-domain-modeling\n\n### Idris2 reference\n- ~/projects/functional-programming-workspace/Idris2/docs/\n\n## Deliverables\n\n- [ ] spec/src/Domain/Todo.idr\n- [ ] Module type-checks\n- [ ] Cross-reference with D2 diagram","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-06T15:01:15.782854-05:00","created_by":"crs58","updated_at":"2026-01-06T19:48:09.822148-05:00","closed_at":"2026-01-06T19:48:09.822148-05:00","close_reason":"Implemented in a44dce3. Todo.idr as generality canary","dependencies":[{"issue_id":"ironstar-2it.20","depends_on_id":"ironstar-2it","type":"parent-child","created_at":"2026-01-06T15:01:15.785318-05:00","created_by":"crs58"},{"issue_id":"ironstar-2it.20","depends_on_id":"ironstar-2it.17","type":"blocks","created_at":"2026-01-06T15:02:03.329571-05:00","created_by":"crs58"}]}
{"id":"ironstar-2it.21","title":"Integrate Idris2 spec modules and verify type-checking","description":"Create top-level IronstarSpec.idr module, verify all modules type-check, and perform initial D2 cross-reference.\n\n## Module: spec/src/IronstarSpec.idr\n\n```idris\nmodule IronstarSpec\n\nimport public Decider\nimport public Repository\nimport public Domain.Analytics.Catalog\nimport public Domain.Analytics.QuerySession\nimport public Domain.Analytics.Chart\nimport public Domain.Session\nimport public Domain.Todo\n```\n\n## Type-checking verification\n\n```bash\ncd spec \u0026\u0026 idris2 --check ironstar.ipkg\n```\n\nAll modules must compile without errors.\n\n## Initial D2 cross-reference\n\nBefore detailed co-refinement (.16 modified), perform quick consistency check:\n\n### D2 diagrams to compare\n- docs/notes/event-modeling/d2/bounded-contexts.d2\n- docs/notes/event-modeling/d2/analytics-context-timeline.d2\n- docs/notes/event-modeling/d2/session-context-timeline.d2\n- docs/notes/event-modeling/d2/todo-context-timeline.d2\n\n### Consistency checks\n- [ ] Every aggregate in D2 has corresponding Idris2 module\n- [ ] Every event (orange) in D2 has corresponding Idris2 constructor\n- [ ] Every command (blue) in D2 has corresponding Idris2 constructor\n- [ ] Every read model (green) in D2 has corresponding Idris2 type\n\n### Document gaps\nList any mismatches found for resolution in .16 co-refinement task.\n\n## Deliverables\n\n- [ ] spec/src/IronstarSpec.idr created\n- [ ] `idris2 --check ironstar.ipkg` passes\n- [ ] Initial D2 cross-reference documented\n- [ ] Gap list for .16 co-refinement","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-06T15:01:29.20864-05:00","created_by":"crs58","updated_at":"2026-01-06T20:44:18.407855-05:00","closed_at":"2026-01-06T20:44:18.407855-05:00","close_reason":"Implemented in 99b9d9f. Integration module created, typecheck passes, D2 cross-reference documented in docs/notes/spec/d2-idris2-cross-reference.md","dependencies":[{"issue_id":"ironstar-2it.21","depends_on_id":"ironstar-2it","type":"parent-child","created_at":"2026-01-06T15:01:29.211105-05:00","created_by":"crs58"},{"issue_id":"ironstar-2it.21","depends_on_id":"ironstar-2it.18","type":"blocks","created_at":"2026-01-06T15:02:03.473534-05:00","created_by":"crs58"},{"issue_id":"ironstar-2it.21","depends_on_id":"ironstar-2it.19","type":"blocks","created_at":"2026-01-06T15:02:03.585701-05:00","created_by":"crs58"},{"issue_id":"ironstar-2it.21","depends_on_id":"ironstar-2it.20","type":"blocks","created_at":"2026-01-06T15:02:03.701894-05:00","created_by":"crs58"},{"issue_id":"ironstar-2it.21","depends_on_id":"ironstar-2it.22","type":"blocks","created_at":"2026-01-06T15:47:52.468312-05:00","created_by":"crs58"}]}
{"id":"ironstar-2it.22","title":"Formalize Workspace bounded context in Idris2 (Supporting domain)","description":"Define the Workspace bounded context as Idris2 module. This is a Supporting domain for user's persistent saved state.\n\n## Business context\n\nWorkspace manages user's persistent configuration that survives across session boundaries:\n- Dashboards (layouts, tabs, chart placements)\n- Saved queries\n- User preferences\n\n## Relationship to other contexts\n\n- **Consumes Analytics**: References ChartDefinitions (Customer-Supplier relationship)\n- **Requires Session**: User identity from authenticated session (Shared Kernel)\n- **Persists across sessions**: Unlike Session state, Workspace state is durable\n\n## Module: spec/src/Domain/Workspace.idr\n\n```idris\n-- Dashboard aggregate\ndata DashboardCommand\n  = CreateDashboard DashboardName\n  | AddChartToDashboard DashboardId ChartPlacement\n  | RemoveChart DashboardId ChartId\n  | UpdateLayout DashboardId Layout\n  | AddTab DashboardId TabName\n  | MoveChartToTab DashboardId ChartId TabId\n\ndata DashboardEvent\n  = DashboardCreated DashboardId DashboardName UserId Timestamp\n  | ChartAdded DashboardId ChartId ChartPlacement Timestamp\n  | ChartRemoved DashboardId ChartId Timestamp\n  | LayoutUpdated DashboardId Layout Timestamp\n  | TabAdded DashboardId TabId TabName Timestamp\n  | ChartMovedToTab DashboardId ChartId TabId Timestamp\n\n-- ChartPlacement references Analytics ChartDefinition\nrecord ChartPlacement where\n  constructor MkChartPlacement\n  chartDefinitionRef : ChartDefinitionRef  -- from Analytics context\n  position : GridPosition\n  size : GridSize\n  tabId : Maybe TabId\n\nrecord Layout where\n  constructor MkLayout\n  columns : Nat\n  rows : Nat\n  placements : List ChartPlacement\n\n-- SavedQuery aggregate  \ndata SavedQueryCommand\n  = SaveQuery QueryName SqlQuery DatasetRef\n  | DeleteSavedQuery SavedQueryId\n  | RenameQuery SavedQueryId QueryName\n\ndata SavedQueryEvent\n  = QuerySaved SavedQueryId QueryName SqlQuery DatasetRef UserId Timestamp\n  | QueryDeleted SavedQueryId Timestamp\n  | QueryRenamed SavedQueryId QueryName Timestamp\n```\n\n## Dependent type opportunities\n\n1. **Layout validity**: Placements must not overlap within grid\n2. **Tab references**: ChartMovedToTab requires tab exists in dashboard\n3. **User ownership**: Commands require UserId matches dashboard owner\n\n## Reference materials\n\n### Architecture docs\n- docs/notes/architecture/core/bounded-contexts.md (newly created)\n\n### Domain modeling methodology\n- Wlaschin: ~/projects/functional-programming-workspace/domain-modeling-made-functional\n- Ghosh: ~/projects/functional-programming-workspace/functional-and-reactive-domain-modeling\n\n### Idris2 reference\n- ~/projects/functional-programming-workspace/Idris2/docs/\n\n## Deliverables\n\n- [ ] spec/src/Domain/Workspace.idr (or Workspace/ directory if multiple modules)\n- [ ] Module type-checks\n- [ ] Cross-reference with bounded-contexts.md","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-06T15:47:38.803093-05:00","created_by":"crs58","updated_at":"2026-01-06T19:48:09.9535-05:00","closed_at":"2026-01-06T19:48:09.9535-05:00","close_reason":"Implemented in 6180a17. 4 modules: Dashboard.idr, SavedQuery.idr, Preferences.idr, Workspace.idr","dependencies":[{"issue_id":"ironstar-2it.22","depends_on_id":"ironstar-2it","type":"parent-child","created_at":"2026-01-06T15:47:38.807359-05:00","created_by":"crs58"},{"issue_id":"ironstar-2it.22","depends_on_id":"ironstar-2it.17","type":"blocks","created_at":"2026-01-06T15:47:52.370633-05:00","created_by":"crs58"}]}
{"id":"ironstar-2it.23","title":"Resolve UserId identity model: composite key pattern","description":"Update EventCatalog User entity to match Idris Session.idr composite key pattern (provider, externalId). Remove surrogate UUID and email (email captured in SessionStarted events, projected for UI). Rationale: event immutability (Hoffman Law 1), Shared Kernel self-sufficiency, FRP signal stability, algebraic correctness. Evolution path: Option 3 (VerifiedContact entity) for future account linking.","status":"closed","priority":0,"issue_type":"task","owner":"cameron.ray.smith@gmail.com","created_at":"2026-01-15T12:35:19.568041-05:00","created_by":"Cameron Smith","updated_at":"2026-01-15T12:38:32.895372-05:00","closed_at":"2026-01-15T12:38:32.895372-05:00","close_reason":"Implemented in commits 29b6ddf (User entity composite key) and 6b709ac (report correction). Composite key pattern (provider, externalId) adopted per algebraic DDD principles.","dependencies":[{"issue_id":"ironstar-2it.23","depends_on_id":"ironstar-2it","type":"parent-child","created_at":"2026-01-15T12:35:19.570031-05:00","created_by":"Cameron Smith"}]}
{"id":"ironstar-2it.24","title":"Generate EventCatalog entity documentation for value objects","description":"Create entity MDX files for 19 value objects identified in cross-layer audit: SessionId, CatalogId, DashboardId, ChartId, TabId, QueryId, SavedQueryId, Timestamp, Duration, SqlStatement, DatasetRef, QueryResult, ErrorInfo, ChartConfig, Position, UiState, Theme, CatalogMetadata. Extract definitions from Idris specs; add invariants and usage context. Reference: docs/notes/architecture/cross-layer-consistency-report.md D6.","status":"closed","priority":2,"issue_type":"task","owner":"cameron.ray.smith@gmail.com","created_at":"2026-01-15T12:38:03.623314-05:00","created_by":"Cameron Smith","updated_at":"2026-01-15T14:25:02.483158-05:00","closed_at":"2026-01-15T14:25:02.483158-05:00","close_reason":"Complete: 22 value object entities created across Core (2), Session (1), Analytics (11), and Workspace (7) domains. Commits 3160db7..04226bd.","dependencies":[{"issue_id":"ironstar-2it.24","depends_on_id":"ironstar-2it","type":"parent-child","created_at":"2026-01-15T12:38:03.624291-05:00","created_by":"Cameron Smith"}]}
{"id":"ironstar-2it.3","title":"Apply Conway's Law and assign bounded contexts (Step 6)","description":"Complete Event Modeling Step 6: assign bounded contexts to aggregate roots, establishing autonomous component boundaries.\n\n## Prerequisites\n\n- Qlerify sessions refined (ironstar-2it.2)\n\n## Work\n\n### Domain Model tab\n\nFor each aggregate root (yellow box):\n- Assign bounded context\n- Group related aggregates into same context\n\n### Bounded context assignments\n\nBased on existing D2 diagram:\n- **Session Context**: Session aggregate\n- **Todo Context**: Todo aggregate  \n- **Analytics Context**: QuerySession aggregate\n\n### Validate Conway's Law alignment\n\nEach context should represent:\n- Independently deployable component\n- Clear team ownership boundary (even if single developer for template)\n- Minimal coordination with other contexts\n\n## Context map patterns\n\nDocument integration patterns between contexts:\n- Session → Todo: Customer-Supplier\n- Session → Analytics: Customer-Supplier\n- Todo ↔ Analytics: Partnership (shared Zenoh event schemas)\n\n## Output\n\nUpdated Qlerify models with bounded context assignments that map directly to EventCatalog service organization.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-06T13:17:55.845471-05:00","created_by":"crs58","updated_at":"2026-01-11T00:38:17.270725-05:00","closed_at":"2026-01-11T00:38:17.270725-05:00","close_reason":"Conway's Law applied: Session/Analytics/Workspace contexts assigned","dependencies":[{"issue_id":"ironstar-2it.3","depends_on_id":"ironstar-2it","type":"parent-child","created_at":"2026-01-06T13:17:55.848086-05:00","created_by":"crs58"},{"issue_id":"ironstar-2it.3","depends_on_id":"ironstar-2it.2","type":"blocks","created_at":"2026-01-06T13:19:41.890551-05:00","created_by":"crs58"}]}
{"id":"ironstar-2it.4","title":"Elaborate GWT scenarios and prioritize releases (Step 7)","description":"Complete Event Modeling Step 7: write Given-When-Then scenarios, prioritize into releases, and validate end-to-end flow.\n\n## Prerequisites\n\n- Bounded contexts assigned (ironstar-2it.3)\n\n## GWT scenario types\n\n### Regular patterns (validation rules)\nExample: CreateTodo\n```\nGiven: User has valid session\nAnd: Todo text is non-empty\nWhen: User submits CreateTodo\nThen: TodoCreated event emitted\nThen: SSE patch sent to subscribers\n```\n\n### Translation patterns (conditional logic)\nExample: OAuth callback interpretation\n```\nGiven: OAuth provider returns authorization code\nWhen: Code exchange succeeds\nThen: SessionCreated event emitted\n```\n\n### Automation patterns (eligibility criteria)\nExample: Cache invalidation\n```\nGiven: QueryCompleted event received\nAnd: Cache entry exists for query hash\nWhen: Invalidation policy runs\nThen: Cache entry evicted\n```\n\n## Release prioritization\n\n### Release 1 (MVP)\n- Session: Login, logout, session validation\n- Todo: Create, complete, delete, list\n- Basic SSE streaming\n\n### Release 2\n- Analytics: Query execution, chart rendering\n- Cache management\n\n### Release 3\n- Advanced analytics: HuggingFace datasets, DuckLake integration\n- Performance optimizations\n\n## Output\n\n- GWT scenarios attached to all events in Qlerify\n- User Story Map tab organized by release\n- Release-filtered views validating end-to-end coherence","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-06T13:18:24.784805-05:00","created_by":"crs58","updated_at":"2026-01-11T00:38:17.368252-05:00","closed_at":"2026-01-11T00:38:17.368252-05:00","close_reason":"26 GWT scenarios elaborated with 100% coverage","dependencies":[{"issue_id":"ironstar-2it.4","depends_on_id":"ironstar-2it","type":"parent-child","created_at":"2026-01-06T13:18:24.787614-05:00","created_by":"crs58"},{"issue_id":"ironstar-2it.4","depends_on_id":"ironstar-2it.3","type":"blocks","created_at":"2026-01-06T13:19:41.980578-05:00","created_by":"crs58"}]}
{"id":"ironstar-2it.5","title":"Export Qlerify JSON and validate structure","description":"Export completed Event Modeling workflows from Qlerify as JSON and validate against expected structure.\n\n## Prerequisites\n\n- GWT scenarios complete (ironstar-2it.4)\n\n## Export process\n\n1. In Qlerify: Export workflow as JSON\n2. Save to `docs/notes/event-modeling/qlerify/exports/`:\n   - session-context.json\n   - todo-context.json\n   - analytics-context.json\n\n## Validation queries\n\nRun discovery queries from event-catalog-qlerify.md:\n\n### duckdb exploration\n```sql\n-- Count entities by type\nSELECT s.type, COUNT(*) as count\nFROM read_json_auto('export.json') AS root,\n    unnest(root.schemas) AS s\nGROUP BY s.type;\n\n-- Lane distribution\nSELECT l.name, COUNT(e.id) as event_count\nFROM read_json_auto('export.json') AS root,\n    unnest(root.lanes) AS l\nLEFT JOIN unnest(root.domainEvents) AS e ON e.laneId = l.id\nGROUP BY l.name;\n```\n\n### jaq exploration\n```bash\n# Card type distribution\njaq '[.domainEvents[].cards[].cardType.domainModelRole] |\n     group_by(.) | map({role: .[0], count: length})' export.json\n\n# Events with no parents (flow entry points)\njaq '[.domainEvents[] | select(.parents | length == 0) | .description]' export.json\n```\n\n## Expected structure\n\nPer event-catalog-qlerify.md:\n- domainEvents[] with cards[]\n- schemas[] with Command/Query/Entity types\n- lanes[] for service boundaries\n- parent-child relationships for flow\n\n## Output\n\n- Validated JSON exports in `docs/notes/event-modeling/qlerify/exports/`\n- Validation report documenting counts and structure","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-06T13:18:26.82459-05:00","created_by":"crs58","updated_at":"2026-01-11T00:38:17.459237-05:00","closed_at":"2026-01-11T00:38:17.459237-05:00","close_reason":"Exported to data/ironstar-main-data-analysis-workflow.json (343KB)","dependencies":[{"issue_id":"ironstar-2it.5","depends_on_id":"ironstar-2it","type":"parent-child","created_at":"2026-01-06T13:18:26.827076-05:00","created_by":"crs58"},{"issue_id":"ironstar-2it.5","depends_on_id":"ironstar-2it.4","type":"blocks","created_at":"2026-01-06T13:19:42.075474-05:00","created_by":"crs58"}]}
{"id":"ironstar-2it.6","title":"Refine D2 diagrams to match Qlerify exports","description":"Update existing D2 diagrams to align with refined Qlerify Event Models, ensuring consistency between visual artifacts.\n\n## Prerequisites\n\n- Qlerify JSON exports available (ironstar-2it.5)\n\n## Existing D2 files\n\n`docs/notes/event-modeling/d2/`:\n- bounded-contexts.d2 (context map with integration patterns)\n- analytics-context-timeline.d2\n- session-context-timeline.d2\n- todo-context-timeline.d2\n\n## Alignment work\n\n### Cross-validate structure\n- D2 swimlane names match Qlerify lane names\n- D2 event nodes match Qlerify domainEvent descriptions\n- D2 command nodes match Qlerify Command schema names\n- Cross-container arrows match parent-child relationships\n\n### Color conventions (per event-modeling.md)\n- Commands: #3498db (blue)\n- Events: #e67e22 (orange)\n- Read Models: #2ecc71 (green)\n- Aggregates: #f1c40f (yellow)\n- External Systems: #9b59b6 (purple)\n\n### Updates needed\n\nFor each timeline diagram:\n- Add/remove events to match Qlerify exports\n- Update command names to match imperative mood\n- Add read model nodes if missing\n- Verify temporal ordering matches parent-child chains\n\n## Output\n\n- Updated D2 files matching Qlerify exports\n- Rendered diagrams in `docs/notes/event-modeling/rendered/`\n\n## Rendering command\n\n```bash\nd2 --layout elk bounded-contexts.d2 bounded-contexts.svg\n```","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-06T13:18:28.187672-05:00","created_by":"crs58","updated_at":"2026-01-11T00:38:17.55151-05:00","closed_at":"2026-01-11T00:38:17.55151-05:00","close_reason":"Initial D2 alignment complete; may revisit after EventCatalog","dependencies":[{"issue_id":"ironstar-2it.6","depends_on_id":"ironstar-2it","type":"parent-child","created_at":"2026-01-06T13:18:28.190283-05:00","created_by":"crs58"},{"issue_id":"ironstar-2it.6","depends_on_id":"ironstar-2it.5","type":"blocks","created_at":"2026-01-06T13:19:42.168898-05:00","created_by":"crs58"}]}
{"id":"ironstar-2it.7","title":"Instantiate EventCatalog infrastructure","description":"Set up EventCatalog instance for ironstar documentation.\n\n## Prerequisites\n\n- Validated Qlerify JSON exports (ironstar-2it.5)\n\n## Setup\n\n### Create EventCatalog project\n\nUsing create-eventcatalog (see ~/projects/lakescope-workspace/create-eventcatalog):\n```bash\ncd packages/docs\nnpx @eventcatalog/create-eventcatalog@latest eventcatalog\n```\n\nOr integrate into existing Astro Starlight docs structure.\n\n### Directory structure\n\n```\npackages/docs/src/content/eventcatalog/\n├── domains/\n│   └── ironstar/\n│       ├── index.mdx\n│       ├── services/\n│       ├── entities/\n│       └── flows/\n├── eventcatalog.config.js\n└── catalog-info.yaml\n```\n\n### Configuration\n\neventcatalog.config.js:\n```javascript\nmodule.exports = {\n  title: 'Ironstar Event Catalog',\n  tagline: 'Event-driven architecture documentation',\n  editUrl: 'https://github.com/user/ironstar/edit/main',\n  trailingSlash: false,\n  logo: { alt: 'Ironstar', src: '/logo.png' },\n};\n```\n\n## Integration with Starlight\n\nOptions:\n1. Separate EventCatalog site at /eventcatalog/\n2. Integrated into Starlight docs as reference section\n3. Symlinks from docs/reference/eventcatalog/\n\n## Output\n\n- Working EventCatalog instance\n- Domain structure matching bounded contexts\n- Build integrated with nix flake","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-06T13:18:54.011805-05:00","created_by":"crs58","updated_at":"2026-01-11T00:45:53.985133-05:00","closed_at":"2026-01-11T00:45:53.985133-05:00","close_reason":"Verified: EventCatalog skeleton complete at packages/eventcatalog/ with Cloudflare Pages config. Placeholder content identified for replacement.","dependencies":[{"issue_id":"ironstar-2it.7","depends_on_id":"ironstar-2it","type":"parent-child","created_at":"2026-01-06T13:18:54.016008-05:00","created_by":"crs58"},{"issue_id":"ironstar-2it.7","depends_on_id":"ironstar-2it.5","type":"blocks","created_at":"2026-01-06T13:19:42.267141-05:00","created_by":"crs58"}]}
{"id":"ironstar-2it.8","title":"Transform Qlerify JSON to EventCatalog MDX (Phase 1: Domain and Services)","description":"Execute Phase 1-3 of the transformation workflow from event-catalog-qlerify.md.\n\n## Prerequisites\n\n- EventCatalog infrastructure ready (ironstar-2it.7)\n- Qlerify JSON exports validated (ironstar-2it.5)\n\n## Phase 1: Discover structure\n\nRun discovery queries:\n```bash\n# Schema types and counts\nduckdb -c \"SELECT s.type, COUNT(*) FROM read_json_auto('export.json') AS r, unnest(r.schemas) AS s GROUP BY s.type\"\n\n# Lane distribution\njaq '.lanes | map(.name)' export.json\n```\n\n## Phase 2: Extract domain\n\nGenerate `domains/ironstar/index.mdx`:\n```yaml\n---\nid: ironstar\nname: Ironstar\nversion: 1.0.0\nsummary: Event-driven reactive web application template\nowners: []\n---\n```\n\n## Phase 3: Extract services from lanes\n\nFor each Qlerify lane, generate service:\n\n`domains/ironstar/services/SessionService/index.mdx`\n`domains/ironstar/services/TodoService/index.mdx`\n`domains/ironstar/services/AnalyticsService/index.mdx`\n\nService template:\n```yaml\n---\nid: SessionService\nname: Session Service\nversion: 0.0.1\nsummary: Session and authentication management\nowners: []\nsends: []\nreceives: []\nentities: []\n---\n```\n\n## Output\n\n- Domain MDX file\n- Service MDX files for all bounded contexts\n- sends/receives arrays populated in Phase 9","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-06T13:18:54.95705-05:00","created_by":"crs58","updated_at":"2026-01-11T00:48:17.551029-05:00","closed_at":"2026-01-11T00:48:17.551029-05:00","close_reason":"Created 3 domains (Session, Analytics, Workspace) and 6 services. Commits: 0278aab, af649d5, 2d5699e","dependencies":[{"issue_id":"ironstar-2it.8","depends_on_id":"ironstar-2it","type":"parent-child","created_at":"2026-01-06T13:18:54.959448-05:00","created_by":"crs58"},{"issue_id":"ironstar-2it.8","depends_on_id":"ironstar-2it.7","type":"blocks","created_at":"2026-01-06T13:19:42.364086-05:00","created_by":"crs58"}]}
{"id":"ironstar-2it.9","title":"Transform Qlerify JSON to EventCatalog MDX (Phase 2: Events, Commands, Queries)","description":"Execute Phase 4-6 of the transformation workflow from event-catalog-qlerify.md.\n\n## Prerequisites\n\n- Domain and services created (ironstar-2it.8)\n\n## Phase 4: Extract events from domainEvents\n\nFor each domainEvent, generate event MDX + schema.json:\n\n`services/SessionService/events/SessionCreated/index.mdx`:\n```yaml\n---\nid: SessionCreated\nname: Session Created\nversion: 0.0.1\nsummary: User session successfully established\nproducers:\n  - SessionService\nconsumers: []\nschemaPath: schema.json\n---\n```\n\n`services/SessionService/events/SessionCreated/schema.json`:\n```json\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"title\": \"SessionCreated\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"sessionId\": { \"type\": \"string\", \"format\": \"uuid\" },\n    \"userId\": { \"type\": \"string\", \"format\": \"uuid\" },\n    \"timestamp\": { \"type\": \"string\", \"format\": \"date-time\" }\n  },\n  \"required\": [\"sessionId\", \"userId\", \"timestamp\"]\n}\n```\n\n## Phase 5: Extract commands\n\nGenerate command MDX + schema.json following same pattern.\n\n## Phase 6: Extract queries (read models)\n\nGenerate query MDX + schema.json for each ReadModel card.\n\n## Schema translation rules\n\nPer event-catalog-qlerify.md:\n- uuid → string + format: uuid\n- timestamp → string + format: date-time\n- int → integer\n- enum → string + enum array from exampleData\n- null → infer from field name patterns\n\n## Output\n\n- Event MDX + schema.json for all events\n- Command MDX + schema.json for all commands\n- Query MDX + schema.json for all read models","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-06T13:18:55.853274-05:00","created_by":"crs58","updated_at":"2026-01-11T00:59:39.130758-05:00","closed_at":"2026-01-11T00:59:39.130758-05:00","close_reason":"Created 142 files: Session (24), Analytics (32), Workspace (86). Commits: d284c57, 6137d8b, 37f262f","dependencies":[{"issue_id":"ironstar-2it.9","depends_on_id":"ironstar-2it","type":"parent-child","created_at":"2026-01-06T13:18:55.856-05:00","created_by":"crs58"},{"issue_id":"ironstar-2it.9","depends_on_id":"ironstar-2it.8","type":"blocks","created_at":"2026-01-06T13:19:42.461083-05:00","created_by":"crs58"}]}
{"id":"ironstar-2nt","title":"Domain layer","description":"Domain layer: Algebraic types, aggregates, value objects, state machines\n\n**Strategic classification:**\n- QuerySession: Core domain (differentiating capability)\n- Todo: Generic example domain (demonstration pattern)\n\n**Discovery grounding:**\n- EventStorming: Yellow stickies → Aggregate modules\n- EventStorming: Orange stickies → Event enum variants\n- EventStorming: Blue stickies → Command enum variants\n\n**Algebraic foundation:**\n- semantic-model.md § Aggregate interpretation as coalgebra\n- Catamorphism: fold_events reconstructs state from event stream\n- Commands as Kleisli arrows in Result monad\n\n**Hoffman Laws implemented:**\n- Law 1: Events immutable (past-tense, append-only)\n- Law 7: Work is side effect (pure aggregates, I/O at boundaries)\n- Law 10: Aggregates own event streams","status":"closed","priority":0,"issue_type":"epic","created_at":"2025-12-18T09:36:16.225617-05:00","updated_at":"2026-01-17T22:51:55.1407-05:00","closed_at":"2026-01-17T22:51:55.1407-05:00","close_reason":"All 19 child issues complete. Domain layer fully implemented with fmodel-rust Decider pattern.","dependencies":[{"issue_id":"ironstar-2nt","depends_on_id":"ironstar-6lq.5","type":"blocks","created_at":"2025-12-18T09:36:16.535145-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-2nt.1","title":"Initialize src/ directory structure with modular organization","description":"Create src/ subdirectories for domain/ (aggregates, events, commands, values, signals.rs), application/ (command_handlers, query_handlers, projections), infrastructure/ (event_store, session_store, analytics, event_bus), and presentation/ (routes, handlers, templates). Create placeholder mod.rs files.\nLocal refs: CLAUDE.md Project structure section","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-18T09:36:16.688724-05:00","updated_at":"2025-12-18T17:26:52.864606-05:00","closed_at":"2025-12-18T17:26:52.864606-05:00","close_reason":"Already completed in ironstar-6lq.3 - src/ structure created with domain/application/infrastructure/presentation modules","dependencies":[{"issue_id":"ironstar-2nt.1","depends_on_id":"ironstar-2nt","type":"parent-child","created_at":"2025-12-18T09:36:16.689083-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-2nt.10","title":"Define ErrorCode enum for HTTP error mapping","description":"Implement ErrorCode enum with ValidationFailed, NotFound, Conflict, Unauthorized, etc. and http_status() method. Part of error type hierarchy. See docs/notes/architecture/decisions/error-types.md.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-24T10:02:31.009058-05:00","updated_at":"2026-01-17T00:39:12.108687-05:00","closed_at":"2026-01-17T00:39:12.108687-05:00","close_reason":"ErrorCode enum already implemented as part of 2nt.8 in common/error_code.rs","dependencies":[{"issue_id":"ironstar-2nt.10","depends_on_id":"ironstar-2nt","type":"parent-child","created_at":"2025-12-24T10:02:31.009617-05:00","created_by":"daemon"},{"issue_id":"ironstar-2nt.10","depends_on_id":"ironstar-2nt.8","type":"blocks","created_at":"2025-12-24T10:03:54.76599-05:00","created_by":"daemon"}]}
{"id":"ironstar-2nt.11","title":"Add version(\u0026self) -\u003e u64 to Aggregate trait","description":"Implement version field on aggregates to track event count for optimistic concurrency control. \n\nRequired for optimistic locking pattern documented in event-sourcing-core.md.\n\nPattern:\n- version() returns count of events applied to aggregate\n- Used in EventStore append to detect concurrent modifications\n- UNIQUE constraint on (aggregate_type, aggregate_id, aggregate_sequence) catches conflicts\n\nRef: docs/notes/architecture/cqrs/event-sourcing-core.md § Optimistic Locking","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-26T15:53:12.611103-05:00","updated_at":"2025-12-27T22:26:32.803825-05:00","closed_at":"2025-12-27T22:26:32.803825-05:00","close_reason":"Implemented in session 2024-12-27 with design refinement: version() placed on AggregateRoot\u003cA\u003e wrapper (line 197) rather than Aggregate trait. Rationale: version is infrastructure concern (optimistic locking) not domain logic. AggregateRoot tracks version separately from pure State, maintaining trait purity.","dependencies":[{"issue_id":"ironstar-2nt.11","depends_on_id":"ironstar-2nt","type":"parent-child","created_at":"2025-12-26T15:53:12.613359-05:00","created_by":"daemon"}]}
{"id":"ironstar-2nt.12","title":"Implement UUID-tracked error type for distributed correlation","description":"All errors must include id: Uuid field for distributed tracing correlation.\n\nPattern from error-types.md:\n```rust\npub struct AppError {\n    id: Uuid,\n    kind: AppErrorKind,\n    source: Option\u003cBox\u003cdyn std::error::Error\u003e\u003e,\n    backtrace: Backtrace,\n}\n```\n\nMarked as CRITICAL in ironstar-northstar-cqrs-comparison.md § Error Handling.\n\nRef: docs/notes/architecture/decisions/error-types.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-26T15:53:14.511812-05:00","updated_at":"2026-01-17T00:33:27.622081-05:00","closed_at":"2026-01-17T00:33:27.622081-05:00","close_reason":"Implemented in Wave 1 batch (95614da)","dependencies":[{"issue_id":"ironstar-2nt.12","depends_on_id":"ironstar-2nt","type":"parent-child","created_at":"2025-12-26T15:53:14.514513-05:00","created_by":"daemon"},{"issue_id":"ironstar-2nt.12","depends_on_id":"ironstar-a9b","type":"blocks","created_at":"2026-01-05T11:13:31.279342-05:00","created_by":"crs58"}]}
{"id":"ironstar-2nt.13","title":"Enforce async/sync boundary via module organization","description":"Establish module organization that enforces effect boundaries.\n\nCore principle from design-principles.md:\n- Pure functions (aggregates, value objects) are sync-only\n- I/O operations (database, network) are async-only\n- Application layer orchestrates async calls around sync domain logic\n\nImplementation:\n- Document module naming conventions\n- Add clippy configuration if possible\n- Create code review checklist\n\nRef: docs/notes/architecture/core/design-principles.md § Effect boundaries","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-26T15:53:20.844781-05:00","updated_at":"2026-01-17T00:33:27.756644-05:00","closed_at":"2026-01-17T00:33:27.756644-05:00","close_reason":"Implemented in Wave 1 batch (95614da)","dependencies":[{"issue_id":"ironstar-2nt.13","depends_on_id":"ironstar-2nt","type":"parent-child","created_at":"2025-12-26T15:53:20.847238-05:00","created_by":"daemon"}]}
{"id":"ironstar-2nt.14","title":"Define QuerySession aggregate with typed holes","description":"Implement QuerySession aggregate following patterns established by TodoAggregate.\n\n## Pattern reference (from Todo implementation)\n\nFollow the patterns in crates/ironstar/src/domain/:\n- **Aggregate trait**: aggregate.rs - handle_command returns Result\u003cVec\u003cEvent\u003e, Error\u003e\n- **State machine**: todo.rs - TodoStatus enum, pure apply_event\n- **Value objects**: values.rs - smart constructors with validation\n\n## QuerySession-specific concerns\n\nUnlike Todo, QuerySession has async infrastructure needs:\n\n1. **Spawn-after-persist pattern**: DuckDB query execution happens AFTER event persistence\n   - Command handler emits QueryStarted event\n   - Application layer persists event, THEN spawns async query task\n   - Query completion emits QueryCompleted/QueryFailed via separate command\n\n2. **Session-scoped state machine**:\n   ```\n   Idle → Pending → Executing → Completed\n                  ↘ Failed\n   ```\n\n3. **Typed holes pattern**: Define signatures with todo!() implementations first\n\n## Implementation sketch\n\n```rust\npub struct QuerySessionAggregate;\n\npub enum QuerySessionStatus {\n    Idle,\n    Pending { query_id: QueryId },\n    Executing { query_id: QueryId, started_at: DateTime\u003cUtc\u003e },\n    Completed { query_id: QueryId, row_count: usize },\n    Failed { query_id: QueryId, error: String },\n}\n\nimpl Aggregate for QuerySessionAggregate {\n    const NAME: \u0026'static str = \"QuerySession\";\n    type State = QuerySessionState;\n    type Command = QuerySessionCommand;\n    type Event = QuerySessionEvent;\n    type Error = QuerySessionError;\n    // ... follow TodoAggregate pattern\n}\n```\n\nLocal refs: \n- Pattern: crates/ironstar/src/domain/todo.rs\n- Architecture: docs/notes/architecture/cqrs/event-sourcing-core.md (Reference implementation section)","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-27T12:50:31.977749-05:00","created_by":"crs58","updated_at":"2025-12-27T22:54:31.3001-05:00","closed_at":"2025-12-27T22:54:31.3001-05:00","close_reason":"Implemented in de2237f, 133384a. QuerySession aggregate demonstrates spawn-after-persist pattern: pure sync aggregate emits events, application layer persists then spawns async DuckDB task. State machine: Idle→Pending→Executing→Completed/Failed/Cancelled. Self-contained module with commands, events, errors, state, and aggregate. 22 tests. Pattern reference for ironstar-2nt.16 (analytics workflow) and downstream infrastructure.","dependencies":[{"issue_id":"ironstar-2nt.14","depends_on_id":"ironstar-2nt","type":"parent-child","created_at":"2025-12-27T12:50:31.978375-05:00","created_by":"daemon"},{"issue_id":"ironstar-2nt.14","depends_on_id":"ironstar-2nt.2","type":"depends-on","created_at":"2025-12-27T12:50:42.935742-05:00","created_by":"daemon"}]}
{"id":"ironstar-2nt.15","title":"Define analytics value objects (DatasetRef, SqlQuery, ChartConfig)","description":"Create validated value objects for analytics domain following TodoId/TodoText patterns.\n\n## Pattern reference (from Todo implementation)\n\nFollow crates/ironstar/src/domain/values.rs:\n- Newtype wrappers with private inner field\n- Smart constructor: new() -\u003e Result\u003cSelf, Error\u003e\n- #[serde(transparent)] for ID types\n- #[serde(try_from, into)] for validated strings\n- #[ts(export, type = \"string\")] for TypeScript generation\n\n## Value objects to implement\n\n### DatasetRef\nReference to a dataset (HuggingFace path, S3 URI, or local path).\n\n```rust\n#[derive(Debug, Clone, PartialEq, Eq, Hash, Serialize, Deserialize, TS)]\n#[ts(export, export_to = \"domain/\", type = \"string\")]\n#[serde(try_from = \"String\", into = \"String\")]\npub struct DatasetRef(String);\n\nimpl DatasetRef {\n    pub fn new(s: impl Into\u003cString\u003e) -\u003e Result\u003cSelf, AnalyticsError\u003e {\n        let s = s.into();\n        // Validate: non-empty, valid URI format or path\n        Ok(Self(s))\n    }\n}\n```\n\n### SqlQuery\nValidated SQL query string.\n\n```rust\npub struct SqlQuery(String);\n// Validation: non-empty, basic SQL sanity checks\n```\n\n### QueryId\nUnique query identifier (UUID wrapper like TodoId).\n\n```rust\n#[derive(Debug, Clone, Copy, PartialEq, Eq, Hash, Serialize, Deserialize, TS)]\n#[ts(export, export_to = \"domain/\", type = \"string\")]\n#[serde(transparent)]\npub struct QueryId(Uuid);\n```\n\n### ChartConfig\nConfiguration for ECharts visualization (may be more complex - product type).\n\n```rust\n#[derive(Debug, Clone, Serialize, Deserialize, TS)]\n#[ts(export, export_to = \"domain/\")]\npub struct ChartConfig {\n    pub chart_type: ChartType,\n    pub x_axis: Option\u003cString\u003e,\n    pub y_axis: Option\u003cString\u003e,\n    // ...\n}\n```\n\nLocal refs:\n- Pattern: crates/ironstar/src/domain/values.rs (TodoId, TodoText)\n- Error type: will need AnalyticsError (see ironstar-2nt.17)","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-27T12:50:33.093174-05:00","created_by":"crs58","updated_at":"2025-12-27T22:50:03.050115-05:00","closed_at":"2025-12-27T22:50:03.050115-05:00","close_reason":"Implemented in 737e086, ba6979d. Value objects: QueryId (UUID wrapper), DatasetRef (validated URI/path with scheme detection), SqlQuery (validated SQL string), ChartType (sum type for ECharts), ChartConfig (product type with builder pattern and validate()). AnalyticsValidationError follows TodoError pattern. 39 tests passing. Pattern reference for ironstar-2nt.14 (QuerySession aggregate).","dependencies":[{"issue_id":"ironstar-2nt.15","depends_on_id":"ironstar-2nt","type":"parent-child","created_at":"2025-12-27T12:50:33.098535-05:00","created_by":"daemon"},{"issue_id":"ironstar-2nt.15","depends_on_id":"ironstar-2nt.3","type":"depends-on","created_at":"2025-12-27T12:50:44.215273-05:00","created_by":"daemon"}]}
{"id":"ironstar-2nt.16","title":"Define analytics workflow as pure function pipeline","description":"Wlaschin pipeline: validate_dataset_url -\u003e load_schema -\u003e validate_query -\u003e execute -\u003e transform_for_chart. Pure functions, Result types, effects at boundaries.\n\n## Pattern reference (from session 2024-12-27)\n\nThe value objects and aggregate are now implemented:\n- DatasetRef, SqlQuery, QueryId, ChartConfig in domain/analytics/values.rs\n- QuerySessionAggregate with spawn-after-persist pattern in domain/query_session/\n\nThe workflow should compose these types into a railway-oriented pipeline where:\n1. Each step returns Result\u003cT, AnalyticsError\u003e\n2. Async I/O (DuckDB execution) happens at boundaries\n3. Pure validation and transformation in the middle\n\n## Implementation location\n\nCreate in domain/analytics/workflow.rs (new file in analytics subdirectory).\n\n## Dependencies\n\nRequires ironstar-2nt.17 (AnalyticsError) for unified error handling across pipeline stages.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-27T12:50:33.981974-05:00","created_by":"crs58","updated_at":"2026-01-17T22:17:47.157011-05:00","closed_at":"2026-01-17T22:17:47.157011-05:00","close_reason":"Implemented in 5288fbb. Railway-oriented workflow with effect traits and 13 tests.","dependencies":[{"issue_id":"ironstar-2nt.16","depends_on_id":"ironstar-2nt","type":"parent-child","created_at":"2025-12-27T12:50:33.985564-05:00","created_by":"daemon"},{"issue_id":"ironstar-2nt.16","depends_on_id":"ironstar-2nt.14","type":"depends-on","created_at":"2025-12-27T12:50:45.010998-05:00","created_by":"daemon"},{"issue_id":"ironstar-2nt.16","depends_on_id":"ironstar-2nt.17","type":"blocks","created_at":"2025-12-29T11:10:13.365158-05:00","created_by":"daemon"},{"issue_id":"ironstar-2nt.16","depends_on_id":"ironstar-a9b.6","type":"blocks","created_at":"2026-01-05T11:13:35.984789-05:00","created_by":"crs58"}]}
{"id":"ironstar-2nt.17","title":"Implement AnalyticsError with UUID correlation","description":"Error wrapper: struct AnalyticsError { id: Uuid, kind: ErrorKind, backtrace }. Enables distributed tracing across async boundaries.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-27T12:50:34.784153-05:00","created_by":"crs58","updated_at":"2026-01-17T00:42:04.87641-05:00","closed_at":"2026-01-17T00:42:04.87641-05:00","close_reason":"Implemented AnalyticsError with UUID tracking for operational errors","dependencies":[{"issue_id":"ironstar-2nt.17","depends_on_id":"ironstar-2nt","type":"parent-child","created_at":"2025-12-27T12:50:34.786833-05:00","created_by":"daemon"},{"issue_id":"ironstar-2nt.17","depends_on_id":"ironstar-2nt.12","type":"depends-on","created_at":"2025-12-27T12:50:45.899381-05:00","created_by":"daemon"}]}
{"id":"ironstar-2nt.18","title":"Add missing enums to Idris specifications","description":"Add enums identified in cross-layer audit D13: RevocationReason (UserLogout, AdminAction, SecurityConcern), QueryErrorCode (SyntaxError, PermissionDenied, Timeout, ResourceExhausted, InternalError), SessionStatus (Active, Expired, Revoked), QueryStatus (Submitted, Running, Completed, Failed). Add to Types.idr or appropriate domain modules.","status":"closed","priority":2,"issue_type":"task","owner":"cameron.ray.smith@gmail.com","created_at":"2026-01-15T12:38:09.414021-05:00","created_by":"Cameron Smith","updated_at":"2026-01-17T00:33:27.883119-05:00","closed_at":"2026-01-17T00:33:27.883119-05:00","close_reason":"Implemented in Wave 1 batch (95614da)","dependencies":[{"issue_id":"ironstar-2nt.18","depends_on_id":"ironstar-2nt","type":"parent-child","created_at":"2026-01-15T12:38:09.415-05:00","created_by":"Cameron Smith"}]}
{"id":"ironstar-2nt.19","title":"Add smart constructors for refined types","description":"Add smart constructors for invariant enforcement per cross-layer audit D8/D14: GridSize (width \u003e= 1, height \u003e= 1), BoundedString pattern for titles (TodoTitle 1-500, DashboardTitle 1-200, TabTitle 1-100). Use opaque types with private MkX constructors and public smart constructor functions that return Maybe/Either.","status":"closed","priority":2,"issue_type":"task","owner":"cameron.ray.smith@gmail.com","created_at":"2026-01-15T12:38:15.232471-05:00","created_by":"Cameron Smith","updated_at":"2026-01-17T00:38:18.200621-05:00","closed_at":"2026-01-17T00:38:18.200621-05:00","close_reason":"Implemented smart constructors with BoundedString const generics (b01a327)","dependencies":[{"issue_id":"ironstar-2nt.19","depends_on_id":"ironstar-2nt","type":"parent-child","created_at":"2026-01-15T12:38:15.234082-05:00","created_by":"Cameron Smith"}]}
{"id":"ironstar-2nt.2","title":"Define algebraic domain types and aggregate structure","description":"Implement sum types for DomainEvent, Command, and aggregate states as Rust enums with serde serialization.\n\nSession context: crates/ironstar/src/domain/mod.rs exists and is ready for implementation.\nWorkspace dependencies already include: serde, uuid, chrono.\n\nExample pattern:\n```rust\n#[derive(Debug, Clone, Serialize, Deserialize)]\n#[serde(tag = \"type\", content = \"data\")]\nenum DomainEvent {\n    TodoCreated { id: Uuid, text: String, created_at: DateTime\u003cUtc\u003e },\n    TodoCompleted { id: Uuid, completed_at: DateTime\u003cUtc\u003e },\n    TodoDeleted { id: Uuid, deleted_at: DateTime\u003cUtc\u003e },\n}\n```\n\nEstablishes the core algebraic vocabulary making invalid states unrepresentable.\nType-level guarantees for all domain logic.\n\nLocal refs: crates/ironstar/src/domain/","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-18T09:36:17.002161-05:00","updated_at":"2025-12-27T21:37:12.490854-05:00","closed_at":"2025-12-27T21:37:12.490854-05:00","close_reason":"Implemented in 8958447. Domain layer foundation complete: TodoError, TodoId, TodoText, TodoEvent, TodoCommand, Aggregate trait, TodoAggregate, AggregateRoot. 44 tests passing. TypeScript bindings generated.","dependencies":[{"issue_id":"ironstar-2nt.2","depends_on_id":"ironstar-2nt","type":"parent-child","created_at":"2025-12-18T09:36:17.003777-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-2nt.2","depends_on_id":"ironstar-2nt.1","type":"blocks","created_at":"2025-12-18T09:36:17.320831-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-2nt.3","title":"Implement value objects and smart constructors","description":"Create validated value objects with smart constructor pattern:\n#[derive(Debug, Clone, Serialize, Deserialize)]\n#[serde(try_from = \"String\")]\nstruct TodoText(String);\nimpl TryFrom\u003cString\u003e for TodoText {\n    type Error = ValidationError;\n    fn try_from(s: String) -\u003e Result\u003cSelf, Self::Error\u003e {\n        if s.is_empty() { return Err(ValidationError::Empty); }\n        if s.len() \u003e 500 { return Err(ValidationError::TooLong); }\n        Ok(TodoText(s))\n    }\n}\nProduct types reject invalid values before they enter the system, preventing bug vectors at the type level.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-18T09:36:17.486442-05:00","updated_at":"2025-12-27T22:26:00.716344-05:00","closed_at":"2025-12-27T22:26:00.716344-05:00","close_reason":"Implemented in session 2024-12-27. TodoText and TodoId demonstrate smart constructor pattern with validation: TodoText::new() -\u003e Result\u003cSelf, TodoError\u003e, #[serde(try_from)]. Pattern reference for QuerySession value objects (DatasetRef, SqlQuery, QueryId).","dependencies":[{"issue_id":"ironstar-2nt.3","depends_on_id":"ironstar-2nt","type":"parent-child","created_at":"2025-12-18T09:36:17.486905-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-2nt.3","depends_on_id":"ironstar-2nt.2","type":"blocks","created_at":"2025-12-18T09:36:17.804575-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-2nt.4","title":"Design aggregate root state machines","description":"Model aggregate state machines using Rust enums:\nenum TodoAggregate {\n    Active { id: Uuid, text: TodoText, created_at: DateTime\u003cUtc\u003e },\n    Completed { id: Uuid, text: TodoText, created_at: DateTime\u003cUtc\u003e, completed_at: DateTime\u003cUtc\u003e },\n    Deleted,\n}\nimpl TodoAggregate {\n    fn apply_command(\u0026self, cmd: Command) -\u003e Result\u003cDomainEvent, DomainError\u003e {\n        match (self, cmd) {\n            (TodoAggregate::Active { .. }, Command::MarkComplete) =\u003e Ok(DomainEvent::TodoCompleted { ... }),\n            (TodoAggregate::Completed { .. }, Command::MarkComplete) =\u003e Err(DomainError::AlreadyCompleted),\n            ...\n        }\n    }\n}\nApply commands to aggregates via pure functions that validate state transitions and emit events as output.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-18T09:36:17.970688-05:00","updated_at":"2025-12-27T22:26:16.083816-05:00","closed_at":"2025-12-27T22:26:16.083816-05:00","close_reason":"Implemented in session 2024-12-27. TodoAggregate demonstrates pure state machine: handle_command(\u0026State, Command) -\u003e Result\u003cVec\u003cEvent\u003e, Error\u003e, apply_event(State, Event) -\u003e State. TodoStatus enum models lifecycle (NotCreated → Active ↔ Completed → Deleted). Pattern reference for QuerySession state machine.","dependencies":[{"issue_id":"ironstar-2nt.4","depends_on_id":"ironstar-2nt","type":"parent-child","created_at":"2025-12-18T09:36:17.971107-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-2nt.4","depends_on_id":"ironstar-2nt.3","type":"blocks","created_at":"2025-12-18T09:36:18.277782-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-2nt.4","depends_on_id":"ironstar-2nt.11","type":"blocks","created_at":"2025-12-26T15:55:10.893669-05:00","created_by":"daemon"}]}
{"id":"ironstar-2nt.5","title":"Create Datastar signal types with ts-rs derives","description":"Create Datastar signal types with ts-rs derives supporting comonadic extend/extract operations for computed signal derivation.\n\nSignals form a comonad (dual to server-side monads):\n- extract: Signal a → a (get current value via $signal.value)\n- extend: (Signal a → b) → Signal a → Signal b (computed(() =\u003e ...))\n\nThe comonad laws ensure signal composition is well-behaved:\n- extend extract = id\n- extract ∘ extend f = f\n\nReference: denotational-semantics.md 'Client signals as comonad' section.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-18T09:36:18.440574-05:00","updated_at":"2026-01-16T23:56:32.356259-05:00","closed_at":"2026-01-16T23:56:32.356259-05:00","close_reason":"Implemented in 6c0bbee..590f92a","dependencies":[{"issue_id":"ironstar-2nt.5","depends_on_id":"ironstar-2nt","type":"parent-child","created_at":"2025-12-18T09:36:18.44096-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-2nt.5","depends_on_id":"ironstar-2nt.2","type":"blocks","created_at":"2025-12-18T09:36:18.742329-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-2nt.6","title":"Enforce camelCase convention for Datastar signal fields","description":"Apply #[serde(rename_all = \"camelCase\")] to all signal struct definitions:\n#[derive(Serialize, Deserialize, TS)]\n#[serde(rename_all = \"camelCase\")]\n#[ts(export)]\nstruct AddTodoSignal {\n    todo_text: String,  // serializes as todoText\n    is_urgent: bool,    // serializes as isUrgent\n}\nEnsures Rust snake_case fields serialize to JavaScript-idiomatic camelCase for Datastar signals.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-18T09:36:18.905123-05:00","updated_at":"2026-01-16T23:57:42.034229-05:00","closed_at":"2026-01-16T23:57:42.034229-05:00","close_reason":"Implemented in 183e870","dependencies":[{"issue_id":"ironstar-2nt.6","depends_on_id":"ironstar-2nt","type":"parent-child","created_at":"2025-12-18T09:36:18.905571-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-2nt.6","depends_on_id":"ironstar-2nt.5","type":"blocks","created_at":"2025-12-18T09:36:19.195479-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-2nt.7","title":"Implement command validation pattern with Result types","description":"Create validation functions returning Result\u003cValidatedCommand, ValidationError\u003e:\nimpl Command {\n    fn validate(self) -\u003e Result\u003cValidatedCommand, ValidationError\u003e {\n        match self {\n            Command::AddTodo { text } =\u003e {\n                let text = TodoText::try_from(text)?;\n                Ok(ValidatedCommand::AddTodo { text })\n            }\n            ...\n        }\n    }\n}\nRailway-oriented programming pattern ensures invalid commands never reach aggregate apply_command logic.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-18T09:36:19.354555-05:00","updated_at":"2025-12-27T22:26:22.587894-05:00","closed_at":"2025-12-27T22:26:22.587894-05:00","close_reason":"Implemented in session 2024-12-27. Railway-oriented programming via Result propagation: TodoText::new(text)? in command handlers, all handlers return Result\u003cVec\u003cEvent\u003e, TodoError\u003e. Validation composes via ? operator. Pattern reference for QuerySession command validation.","dependencies":[{"issue_id":"ironstar-2nt.7","depends_on_id":"ironstar-2nt","type":"parent-child","created_at":"2025-12-18T09:36:19.354949-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-2nt.7","depends_on_id":"ironstar-2nt.4","type":"blocks","created_at":"2025-12-18T09:36:19.680354-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-2nt.8","title":"Define application error types","description":"Define layered error type hierarchy: ValidationError (field-level), DomainError (business rules), AggregateError (command handling), InfrastructureError (storage/bus), AppError (HTTP boundary). See docs/notes/architecture/decisions/error-types.md for complete type definitions and From implementations.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-18T09:36:19.842539-05:00","updated_at":"2026-01-17T00:33:27.346811-05:00","closed_at":"2026-01-17T00:33:27.346811-05:00","close_reason":"Implemented in Wave 1 batch (95614da)","dependencies":[{"issue_id":"ironstar-2nt.8","depends_on_id":"ironstar-2nt","type":"parent-child","created_at":"2025-12-18T09:36:19.842893-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-2nt.8","depends_on_id":"ironstar-2nt.2","type":"blocks","created_at":"2025-12-18T09:36:20.150189-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-2nt.9","title":"Define ChartSignals and ChartSelection types with ts-rs","description":"Create signal types for ECharts integration per signal-contracts.md. ChartSignals contains chartOption (serde_json::Value), selected (Option ChartSelection), loading (bool). ChartSelection contains seriesName, dataIndex, name, value. Use serde rename camelCase for JSON compatibility.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-24T00:54:32.817698-05:00","updated_at":"2026-01-17T00:33:27.489132-05:00","closed_at":"2026-01-17T00:33:27.489132-05:00","close_reason":"Implemented in Wave 1 batch (95614da)","dependencies":[{"issue_id":"ironstar-2nt.9","depends_on_id":"ironstar-2nt","type":"parent-child","created_at":"2025-12-24T00:54:32.818175-05:00","created_by":"daemon"},{"issue_id":"ironstar-2nt.9","depends_on_id":"ironstar-2nt.2","type":"blocks","created_at":"2025-12-24T00:56:26.404668-05:00","created_by":"daemon"}]}
{"id":"ironstar-2vp","title":"Test bitemporal semantics and SSE reconnection edge cases","description":"Tests for bitemporal semantics and SSE reconnection edge cases.\n\nVerify:\n1. Monotonicity: global_sequence strictly increases\n2. Gap detection: server detects when client requests seq N but next available is N+k (k \u003e 1)\n3. Stale ID handling: client requests seq \u003c earliest triggers appropriate fallback\n4. Correct replay: client receives all events from Last-Event-ID + 1 onwards\n\nReference: semantic-model.md § Temporal structure","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-30T21:59:18.577821-05:00","created_by":"crs58","updated_at":"2026-01-05T12:22:39.265569-05:00","dependencies":[{"issue_id":"ironstar-2vp","depends_on_id":"ironstar-zuv","type":"subtask","created_at":"2025-12-30T21:59:39.06844-05:00","created_by":"daemon"}]}
{"id":"ironstar-3gd","title":"Scientific Data Integration","description":"Implement ironstar's READ-ONLY DuckDB analytics layer for querying external scientific datasets. DuckDB is a dedicated OLAP query interface—completely separate from the SQLite event store—enabling efficient analysis of large scientific data without impacting event sourcing durability. Covers DuckDB integration for analytics queries, remote data source support via httpfs extension (HuggingFace datasets, S3-compatible storage, DuckLake), results caching with moka + rkyv for visualization backends, and SSE/datastar integration for dashboard updates. See docs/notes/architecture/infrastructure/analytics-cache-architecture.md and analytics-cache-patterns.md.","status":"open","priority":0,"issue_type":"epic","created_at":"2025-12-24T00:42:37.158828-05:00","updated_at":"2025-12-27T12:50:37.374533-05:00","dependencies":[{"issue_id":"ironstar-3gd","depends_on_id":"ironstar-nyp","type":"blocks","created_at":"2025-12-24T00:43:42.235261-05:00","created_by":"daemon"},{"issue_id":"ironstar-3gd","depends_on_id":"ironstar-2nt","type":"blocks","created_at":"2025-12-24T00:43:43.523343-05:00","created_by":"daemon"}]}
{"id":"ironstar-3gd.1","title":"Implement cache-aside pattern for DuckDB analytics","description":"moka get_or_compute wrapper with query hash key, TTL and idle eviction.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-24T15:37:37.733622-05:00","updated_at":"2025-12-24T15:37:37.733622-05:00","dependencies":[{"issue_id":"ironstar-3gd.1","depends_on_id":"ironstar-3gd","type":"parent-child","created_at":"2025-12-24T15:37:37.733983-05:00","created_by":"daemon"}]}
{"id":"ironstar-3gd.2","title":"Implement event-driven cache invalidation","description":"Subscribe to Zenoh key expressions for aggregate-type events. Invalidate moka cache entries matching the aggregate type when events arrive. Pattern: ironstar/events/{aggregate_type}/**. See docs/notes/architecture/infrastructure/analytics-cache-architecture.md Pattern 4.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-24T15:37:38.809007-05:00","updated_at":"2025-12-26T15:25:18.383717-05:00","dependencies":[{"issue_id":"ironstar-3gd.2","depends_on_id":"ironstar-3gd","type":"parent-child","created_at":"2025-12-24T15:37:38.811495-05:00","created_by":"daemon"},{"issue_id":"ironstar-3gd.2","depends_on_id":"ironstar-3gd.3","type":"depends-on","created_at":"2025-12-26T18:30:18.763436-05:00","created_by":"daemon"}]}
{"id":"ironstar-3gd.3","title":"Implement CacheDependency struct for Zenoh-based cache invalidation","description":"Implement CacheDependency struct that maps cache keys to Zenoh key expression patterns for precise cache invalidation. Enables declarative cache invalidation by allowing cache entries to declare dependencies on aggregate types or instances.\n\nCore struct: cache_key (String) + depends_on (Vec\u003cString\u003e of Zenoh patterns).\n\nBuilder methods:\n- depends_on_aggregate(type) -\u003e pattern 'events/{type}/**'\n- depends_on_instance(type, id) -\u003e pattern 'events/{type}/{id}/*'\n\nIntegration: ZenohCacheInvalidator matches incoming events against depends_on patterns to invalidate corresponding cache entries.\n\nExample: CacheDependency::new(\"daily_stats:2024-01-15\").depends_on_aggregate(\"Todo\")\n\nInclude matches_key_expression() helper for pattern matching during invalidation.\n\nRef: docs/notes/architecture/infrastructure/analytics-cache-patterns.md lines 155-255","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-26T18:29:59.397603-05:00","updated_at":"2025-12-26T18:29:59.397603-05:00","dependencies":[{"issue_id":"ironstar-3gd.3","depends_on_id":"ironstar-3gd","type":"parent-child","created_at":"2025-12-26T18:29:59.400971-05:00","created_by":"daemon"},{"issue_id":"ironstar-3gd.3","depends_on_id":"ironstar-nyp.27","type":"depends-on","created_at":"2025-12-26T18:30:08.386544-05:00","created_by":"daemon"},{"issue_id":"ironstar-3gd.3","depends_on_id":"ironstar-nyp.25","type":"depends-on","created_at":"2025-12-26T18:30:08.557298-05:00","created_by":"daemon"}]}
{"id":"ironstar-3gd.4","title":"Implement embedded DuckLake catalog pattern with rust_embed","description":"Embed DuckLake catalogs in the ironstar binary to eliminate ATTACH latency for known datasets.\n\n## Implementation\n\n1. Create assets/ducklake-catalogs/ directory\n2. Add rust_embed derive for DuckLakeCatalogs struct\n3. Extract catalog to temp file at connection pool init\n4. ATTACH locally (no network, ~0ms)\n\n## Cache key strategy\n\nUse build-time versioning for embedded catalogs:\n```rust\nconst CATALOG_VERSION: \u0026str = env!(\"CARGO_PKG_VERSION\");\nlet cache_key = format!(\"embedded:{}:{}:{}:{:x}\", \n    catalog_name, CATALOG_VERSION, table_name, query_hash);\n```\n\nNo runtime ducklake_current_snapshot() query needed.\n\n## Build integration\n\nCopy sciexp-fixtures space.db into assets/ducklake-catalogs/ during build.\nConsider nix flake to fetch from HuggingFace at build time.\n\n## Refs\n\n- docs/notes/architecture/infrastructure/analytics-cache-patterns.md (DuckLake catalog pattern)\n- ~/projects/omicslake-workspace/sciexp-fixtures/lakes/frozen/space.db","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-28T23:54:21.058758-05:00","created_by":"crs58","updated_at":"2025-12-28T23:54:21.058758-05:00","dependencies":[{"issue_id":"ironstar-3gd.4","depends_on_id":"ironstar-3gd","type":"parent-child","created_at":"2025-12-28T23:54:21.060947-05:00","created_by":"daemon"},{"issue_id":"ironstar-3gd.4","depends_on_id":"ironstar-c7z","type":"related","created_at":"2025-12-28T23:54:30.201243-05:00","created_by":"daemon"}]}
{"id":"ironstar-507","title":"Session aggregate implementation","description":"Implement Session aggregate from spec/Session/Session.idr following fmodel-rust patterns established in ironstar-a9b.\n\n## Context\n\nSession is a Supporting domain that manages OAuth-based authentication lifecycle. It provides authenticated User identity to other bounded contexts (Workspace, Analytics) via the Shared Kernel pattern (UserId).\n\n**Important**: This is the *Authentication* Session aggregate, distinct from QuerySession (Analytics query execution lifecycle) which was implemented in a9b.\n\n## Implementation requirements\n\n**Location**: `crates/ironstar/src/domain/session/`\n\n**Module structure**:\n```\nsession/\n├── mod.rs              # Re-exports SessionCommand, SessionEvent, etc.\n├── decider.rs          # session_decider() factory\n├── commands.rs         # SessionCommand enum\n├── events.rs           # SessionEvent enum\n├── state.rs            # SessionState + SessionStatus\n├── errors.rs           # SessionError + SessionErrorKind\n└── values.rs           # SessionId, ExpiresAt, SessionMetadata, RevocationReason\n```\n\n**Commands** (from spec/Session/Session.idr):\n- `CreateSession { user_id: UserId, provider: OAuthProvider, created_at: Timestamp, expires_at: ExpiresAt, metadata: SessionMetadata }`\n- `RefreshSession { session_id: SessionId, refreshed_at: Timestamp, new_expires_at: ExpiresAt }`\n- `InvalidateSession { session_id: SessionId, invalidated_at: Timestamp }`\n\n**Events**:\n- `SessionCreated { session_id: SessionId, user_id: UserId, provider: OAuthProvider, created_at: Timestamp, expires_at: ExpiresAt, metadata: SessionMetadata }`\n- `SessionRefreshed { session_id: SessionId, new_expires_at: ExpiresAt, refreshed_at: Timestamp }`\n- `SessionInvalidated { session_id: SessionId, invalidated_at: Timestamp }`\n- `SessionExpired { session_id: SessionId, expired_at: Timestamp }` (generated by boundary layer TTL check)\n\n**State**:\n```rust\npub enum SessionState {\n    NoSession,\n    Active { session_id: SessionId, user_id: UserId, expires_at: ExpiresAt },\n    Expired { session_id: SessionId },\n    Invalidated { session_id: SessionId },\n}\n```\n\n**Value objects**:\n- `SessionId` - UUID wrapper with smart constructor\n- `ExpiresAt` - Timestamp wrapper for TTL\n- `SessionMetadata` - { ip_address, user_agent, geo_location } captured at boundary\n- `RevocationReason` - enum { UserLogout, AdminAction, SecurityConcern }\n\n**Boundary injection**: Commands carry timestamps and metadata injected at HTTP handler layer. The pure `decide()` function does not call `Utc::now()`. The Idris2 spec uses holes (`?newSid`, `?now`, `?expires`, `?metadata`) to mark these injection points.\n\n**Error handling**: Return `Err(SessionError::already_active())` when creating duplicate session, `Err(SessionError::no_active_session())` when refreshing/invalidating non-existent session, etc.\n\n## View\n\nThe spec defines `ActiveSessionView` for quick session lookup:\n```rust\npub struct ActiveSessionViewState {\n    pub active_session: Option\u003c(SessionId, UserId, ExpiresAt)\u003e,\n}\n```\n\nThis is a read-side projection for authentication checks.\n\n## Acceptance criteria\n\n- [ ] SessionCommand enum with Identifier + DeciderType traits\n- [ ] SessionEvent enum with Identifier + EventType + DeciderType + IsFinal traits\n- [ ] SessionState enum with helper methods (is_active, is_terminated, get_session_id, get_user_id)\n- [ ] SessionError with factory constructors\n- [ ] Value objects: SessionId, ExpiresAt, SessionMetadata, RevocationReason\n- [ ] session_decider() factory function\n- [ ] Pure decide() and evolve() functions\n- [ ] ActiveSessionView projection\n- [ ] All types export to TypeScript via ts-rs\n- [ ] Decider specification tests (given/when/then)\n\n## Aggregate ID pattern\n\n`session_{session_id}` (e.g., `session_a1b2c3d4`)\n\n## References\n\n- spec/Session/Session.idr (formal specification)\n- crates/ironstar/src/domain/todo/decider.rs (reference pattern)\n- crates/ironstar/src/domain/query_session/ (sibling aggregate, different domain)\n- docs/notes/architecture/decisions/oauth-authentication.md","status":"closed","priority":1,"issue_type":"task","owner":"cameron.ray.smith@gmail.com","created_at":"2026-01-16T12:39:55.489538-05:00","created_by":"Cameron Smith","updated_at":"2026-01-18T22:16:54.947293-05:00","closed_at":"2026-01-18T22:16:54.947293-05:00","close_reason":"Core Session domain complete: Decider, View types, 91 tests. UserId (UUID) implemented for shared kernel. Children 507.1/507.2/507.4 are P2 wiring deferred until infrastructure integration needed.","dependencies":[{"issue_id":"ironstar-507","depends_on_id":"ironstar-jqv","type":"parent-child","created_at":"2026-01-18T12:56:08.916423-05:00","created_by":"Cameron Smith"}]}
{"id":"ironstar-507.1","title":"Wire Session EventSourcedAggregate to SQLite","description":"Wire Session Decider to SQLite event store using fmodel-rust EventSourcedAggregate pattern.\n\n## Context\n\nFollowing ironstar-a9b.7 pattern, connect the Session Decider to SQLite persistence.\n\n## Implementation\n\n**Location**: `crates/ironstar/src/infrastructure/event_store/session.rs`\n\n```rust\npub struct SessionEventStore {\n    pool: SqlitePool,\n}\n\nimpl EventRepository\u003cSessionCommand, SessionEvent, SessionError\u003e for SessionEventStore {\n    async fn fetch_events(\u0026self, command: \u0026SessionCommand) -\u003e Result\u003cVec\u003cSessionEvent\u003e, SessionError\u003e;\n    async fn save(\u0026self, events: \u0026[SessionEvent]) -\u003e Result\u003cVec\u003cSessionEvent\u003e, SessionError\u003e;\n}\n```\n\n**Aggregate ID routing**: `session_{session_id}`\n\n## Acceptance criteria\n\n- [ ] EventRepository trait implementation for Session\n- [ ] Aggregate ID parsing and routing\n- [ ] Optimistic locking via previous_id\n- [ ] Integration tests with in-memory SQLite\n\n## References\n\n- ironstar-a9b.7 task description\n- crates/ironstar/src/domain/session/ (Session Decider)","status":"open","priority":2,"issue_type":"task","owner":"cameron.ray.smith@gmail.com","created_at":"2026-01-18T12:56:39.019885-05:00","created_by":"Cameron Smith","updated_at":"2026-01-18T12:56:39.019885-05:00","dependencies":[{"issue_id":"ironstar-507.1","depends_on_id":"ironstar-507","type":"parent-child","created_at":"2026-01-18T12:56:39.020743-05:00","created_by":"Cameron Smith"}],"comments":[{"id":12,"issue_id":"ironstar-507.1","author":"Cameron Smith","text":"Deferred: Core Session domain complete in 507. Wire EventSourcedAggregate when presentation layer (r62) integration begins.","created_at":"2026-01-19T03:16:56Z"}]}
{"id":"ironstar-507.2","title":"Wire ActiveSessionView projection","description":"Implement ActiveSessionView projection for quick session lookup.\n\n## Context\n\nThe Idris2 spec defines ActiveSessionView for authentication checks. This is a read-side projection optimized for session validation.\n\n## Implementation\n\n**Location**: `crates/ironstar/src/domain/views/session.rs`\n\n```rust\npub struct ActiveSessionViewState {\n    pub active_session: Option\u003c(SessionId, UserId, ExpiresAt)\u003e,\n}\n\npub fn active_session_view\u003c'a\u003e() -\u003e ActiveSessionView\u003c'a\u003e {\n    View {\n        evolve: Box::new(|state, event| evolve_active_session(state, event)),\n        initial_state: Box::new(ActiveSessionViewState::default),\n    }\n}\n```\n\n**Event handling**:\n- SessionCreated → set active_session to Some(...)\n- SessionRefreshed → update expires_at\n- SessionInvalidated/SessionExpired → set active_session to None\n\n## Acceptance criteria\n\n- [ ] ActiveSessionView with correct event folding\n- [ ] Invariant preservation on edge cases\n- [ ] ViewStateComputation tests\n\n## References\n\n- spec/Session/Session.idr (activeSessionView definition)\n- ironstar-a9b.8 task description","status":"open","priority":2,"issue_type":"task","owner":"cameron.ray.smith@gmail.com","created_at":"2026-01-18T12:56:39.233015-05:00","created_by":"Cameron Smith","updated_at":"2026-01-18T12:56:39.233015-05:00","dependencies":[{"issue_id":"ironstar-507.2","depends_on_id":"ironstar-507","type":"parent-child","created_at":"2026-01-18T12:56:39.233729-05:00","created_by":"Cameron Smith"}],"comments":[{"id":13,"issue_id":"ironstar-507.2","author":"Cameron Smith","text":"Deferred: Core Session domain complete in 507. Wire ActiveSessionView when auth handlers need session lookup.","created_at":"2026-01-19T03:16:56Z"}]}
{"id":"ironstar-507.3","title":"Implement Session Decider specification tests","description":"Implement given/when/then specification tests for Session Decider.\n\n## Test coverage\n\n- CreateSession success (NoSession → Active)\n- CreateSession failure (already active, expired, invalidated)\n- RefreshSession success (Active → Active with new expiry)\n- RefreshSession failure (no session, expired, invalidated, ID mismatch)\n- InvalidateSession success (Active → Invalidated)\n- InvalidateSession failure (no session, expired, already invalidated, ID mismatch)\n\n## Pattern\n\n```rust\nuse fmodel_rust::specification::DeciderTestSpecification;\n\n#[test]\nfn create_session_succeeds() {\n    DeciderTestSpecification::default()\n        .for_decider(session_decider())\n        .given(vec![])\n        .when(SessionCommand::CreateSession { ... })\n        .then(vec![SessionEvent::SessionCreated { ... }]);\n}\n```\n\n## Acceptance criteria\n\n- [ ] All command success paths tested\n- [ ] All error conditions tested\n- [ ] State transition coverage complete\n- [ ] Tests pass with cargo nextest\n\n## References\n\n- ironstar-a9b.12 task description\n- spec/Session/Session.idr (decide function patterns)","status":"closed","priority":2,"issue_type":"task","owner":"cameron.ray.smith@gmail.com","created_at":"2026-01-18T12:56:39.90531-05:00","created_by":"Cameron Smith","updated_at":"2026-01-18T22:08:42.896292-05:00","closed_at":"2026-01-18T22:08:42.896292-05:00","close_reason":"DeciderTestSpecification tests implemented inline in decider.rs. All command success and error paths covered.","dependencies":[{"issue_id":"ironstar-507.3","depends_on_id":"ironstar-507","type":"parent-child","created_at":"2026-01-18T12:56:39.906109-05:00","created_by":"Cameron Smith"}]}
{"id":"ironstar-507.4","title":"Integrate Zenoh event publishing for Session","description":"Integrate Zenoh pub/sub for Session event distribution.\n\n## Key expression pattern\n\n```\nevents/Session/{session_id}\n```\n\n## Implementation\n\n**Location**: `crates/ironstar/src/infrastructure/event_bus/session.rs`\n\n```rust\npub struct SessionEventPublisher {\n    session: Arc\u003czenoh::Session\u003e,\n}\n\nimpl SessionEventPublisher {\n    pub async fn publish(\u0026self, event: \u0026SessionEvent) -\u003e Result\u003c(), PublishError\u003e {\n        let key = format!(\"events/Session/{}\", event.identifier());\n        let payload = serde_json::to_vec(event)?;\n        self.session.put(\u0026key, payload).await?;\n        Ok(())\n    }\n}\n```\n\n## Acceptance criteria\n\n- [ ] SessionEventPublisher implementation\n- [ ] Key expression routing by session ID\n- [ ] Integration tests with embedded Zenoh\n\n## References\n\n- ironstar-a9b.9 task description\n- ironstar-nyp.26 (Zenoh embedded router configuration)","status":"open","priority":2,"issue_type":"task","owner":"cameron.ray.smith@gmail.com","created_at":"2026-01-18T12:56:40.115766-05:00","created_by":"Cameron Smith","updated_at":"2026-01-18T12:56:40.115766-05:00","dependencies":[{"issue_id":"ironstar-507.4","depends_on_id":"ironstar-507","type":"parent-child","created_at":"2026-01-18T12:56:40.116596-05:00","created_by":"Cameron Smith"},{"issue_id":"ironstar-507.4","depends_on_id":"ironstar-507.1","type":"blocks","created_at":"2026-01-18T12:56:46.130425-05:00","created_by":"Cameron Smith"}],"comments":[{"id":14,"issue_id":"ironstar-507.4","author":"Cameron Smith","text":"Deferred: Core Session domain complete in 507. Zenoh integration follows pattern from a9b.9 when needed.","created_at":"2026-01-19T03:16:57Z"}]}
{"id":"ironstar-53t","title":"Reference: Hoffman's Laws compliance mapping","description":"Ironstar implements Kevin Hoffman's Ten Laws of Event Sourcing. Laws 1-7, 10 are explicit in implementation. Laws 8-9 (process managers) are deferred to v2. See docs/notes/architecture/cqrs/event-sourcing-core.md.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T18:43:46.102737-05:00","created_by":"crs58","updated_at":"2026-01-03T18:43:46.102737-05:00"}
{"id":"ironstar-58f","title":"Implement ViewStateRepository for SQLite","description":"Implement fmodel-rust's ViewStateRepository trait for SQLite persistence of View projections.\n\n## Trait Definition (from fmodel-rust)\n\n```rust\npub trait ViewStateRepository\u003cE, S, Error\u003e {\n    fn fetch_state(\u0026self, event: \u0026E) -\u003e impl Future\u003cOutput = Result\u003cOption\u003cS\u003e, Error\u003e\u003e;\n    fn save(\u0026self, state: \u0026S) -\u003e impl Future\u003cOutput = Result\u003cS, Error\u003e\u003e;\n}\n```\n\n## Implementation\n\n```rust\npub struct SqliteViewRepository {\n    pool: SqlitePool,\n}\n\nimpl\u003cE, S\u003e ViewStateRepository\u003cE, S, InfrastructureError\u003e for SqliteViewRepository\nwhere\n    E: Identifier,\n    S: Serialize + DeserializeOwned + Clone + Send + Sync,\n{\n    // Store view state keyed by aggregate identifier\n}\n```\n\n## Schema\n\n```sql\nCREATE TABLE view_state (\n    view_type TEXT NOT NULL,\n    aggregate_id TEXT NOT NULL,\n    state TEXT NOT NULL CHECK(json_valid(state)),\n    updated_at TEXT NOT NULL DEFAULT(datetime('now', 'utc')),\n    PRIMARY KEY (view_type, aggregate_id)\n) STRICT;\n```\n\n## Acceptance Criteria\n\n- [ ] ViewStateRepository trait impl for SQLite\n- [ ] JSON serialization of view state\n- [ ] Keyed by (view_type, aggregate_id)\n- [ ] Used by MaterializedView in application layer","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-05T10:42:12.294088-05:00","created_by":"crs58","updated_at":"2026-01-05T10:42:22.458024-05:00","dependencies":[{"issue_id":"ironstar-58f","depends_on_id":"ironstar-a9b.2","type":"blocks","created_at":"2026-01-05T11:10:58.483748-05:00","created_by":"crs58"}]}
{"id":"ironstar-63r","title":"Verify technical accuracy of benchmarks","description":"Cross-check all performance claims against source papers. Verify: AnnSQL 700x speedup context, 4.4M cell benchmark details, tiledbsoma AWS region claims, DuckLake release date.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T01:16:55.704006-05:00","updated_at":"2025-12-26T20:51:42.234927-05:00","dependencies":[{"issue_id":"ironstar-63r","depends_on_id":"ironstar-0tk","type":"parent-child","created_at":"2025-12-19T01:17:25.644963-05:00","created_by":"daemon","metadata":"{}"}],"deleted_at":"2025-12-26T20:51:42.234927-05:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"ironstar-6lq","title":"Rust workspace integration","description":"Integrate Rust toolchain and workspace patterns into the Nix flake using rust-flake, crane for deterministic builds, and rust-overlay for toolchain management. Establishes Cargo workspace structure with resolver 2, workspace.dependencies for DRY, per-crate crane.args configuration following rustlings-workspace and rust-nix-template patterns. Includes CI integration with flake checks and GitHub Actions matrix builds inherited from template.","status":"closed","priority":0,"issue_type":"epic","created_at":"2025-12-18T09:36:09.969921-05:00","updated_at":"2025-12-27T18:20:08.39341-05:00","closed_at":"2025-12-27T18:20:08.39341-05:00","close_reason":"All children complete: rust-flake integration, toolchain, workspace config, crate.nix pattern, flake checks, and CI integration all implemented","dependencies":[{"issue_id":"ironstar-6lq","depends_on_id":"ironstar-cxe","type":"blocks","created_at":"2025-12-18T09:36:10.288159-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-6lq.1","title":"Integrate rust-flake patterns (crane, rust-overlay)","description":"Create nix/modules/rust.nix importing rust-flake module. Configure:\n- crane with per-crate crane.args via callPackage pattern\n- rust-overlay for toolchain management with rust-toolchain.toml\n- Platform-specific buildInputs: darwin.apple_sdk.frameworks (Security, SystemConfiguration), pkgs.openssl\n- Syntax: perSystem = { config, pkgs, lib, ... }: { rust-flake.crateOverrides = ...; }\nEstablishes deterministic Rust build infrastructure with native dependency handling.\nLocal refs: ~/projects/rust-workspace/rust-nix-template/nix/modules/rust.nix, ~/projects/rust-workspace/rustlings-workspace/nix/modules/rust.nix","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-18T09:36:10.463662-05:00","updated_at":"2025-12-18T17:23:57.554076-05:00","closed_at":"2025-12-18T17:23:57.554076-05:00","close_reason":"rust-flake input + modules/rust.nix created","dependencies":[{"issue_id":"ironstar-6lq.1","depends_on_id":"ironstar-6lq","type":"parent-child","created_at":"2025-12-18T09:36:10.464029-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-6lq.2","title":"Add rust-toolchain.toml with required components","description":"Create rust-toolchain.toml at repository root specifying stable channel with components: rustfmt, clippy, rust-analyzer, rust-src. Ensures consistent Rust version across development environments and CI.\nLocal refs: ~/projects/rust-workspace/rust-nix-template/rust-toolchain.toml","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-18T09:36:10.783847-05:00","updated_at":"2025-12-18T17:23:57.757485-05:00","closed_at":"2025-12-18T17:23:57.757485-05:00","close_reason":"rust-toolchain.toml with stable + dev components","dependencies":[{"issue_id":"ironstar-6lq.2","depends_on_id":"ironstar-6lq","type":"parent-child","created_at":"2025-12-18T09:36:10.784205-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-6lq.2","depends_on_id":"ironstar-6lq.1","type":"blocks","created_at":"2025-12-18T09:36:11.089429-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-6lq.3","title":"Configure Cargo.toml with workspace structure (resolver = 2)","description":"Create Cargo.toml at repository root with [workspace], resolver = \"2\", members array, and workspace.dependencies section for DRY dependency management. Include all core dependencies: axum, tokio, sqlx, duckdb, ts-rs, datastar, hypertext, redb, rust-embed, thiserror. Add release profile optimizations.\nLocal refs: ~/projects/rust-workspace/rustlings-workspace/Cargo.toml","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-18T09:36:11.259066-05:00","updated_at":"2025-12-18T17:23:57.957589-05:00","closed_at":"2025-12-18T17:23:57.957589-05:00","close_reason":"Cargo workspace + crates/ironstar structure","dependencies":[{"issue_id":"ironstar-6lq.3","depends_on_id":"ironstar-6lq","type":"parent-child","created_at":"2025-12-18T09:36:11.259426-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-6lq.3","depends_on_id":"ironstar-6lq.2","type":"blocks","created_at":"2025-12-18T09:36:11.552369-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-6lq.4","title":"Set up per-crate crate.nix pattern for crane args","description":"Create crate.nix files for each workspace crate defining crane-specific build arguments:\n{ lib, pkgs, rustPlatform, ... }:\n{\n  pname = \"ironstar\";\n  buildInputs = [ ... ];\n  nativeBuildInputs = [ ... ];\n  preBuild = ''export DATABASE_URL=file:test.db'';\n}\nImplements pattern from rustlings-workspace for granular build customization. Set DATABASE_URL env var for sqlx compile-time query validation.\nLocal refs: ~/projects/rust-workspace/rustlings-workspace/","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-18T09:36:11.699369-05:00","updated_at":"2025-12-18T17:23:58.146209-05:00","closed_at":"2025-12-18T17:23:58.146209-05:00","close_reason":"crate.nix with minimal deps","dependencies":[{"issue_id":"ironstar-6lq.4","depends_on_id":"ironstar-6lq","type":"parent-child","created_at":"2025-12-18T09:36:11.699822-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-6lq.4","depends_on_id":"ironstar-6lq.3","type":"blocks","created_at":"2025-12-18T09:36:11.99174-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-6lq.5","title":"Verify cargo check passes with workspace configuration","description":"Run cargo check to validate workspace configuration, dependency resolution, and that all crates compile. Fix any issues with feature flags or dependency versions. Ensures Rust workspace is properly configured before proceeding to process orchestration.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-18T09:36:12.14838-05:00","updated_at":"2025-12-18T17:23:58.340671-05:00","closed_at":"2025-12-18T17:23:58.340671-05:00","close_reason":"cargo check + nix eval pass","dependencies":[{"issue_id":"ironstar-6lq.5","depends_on_id":"ironstar-6lq","type":"parent-child","created_at":"2025-12-18T09:36:12.148741-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-6lq.5","depends_on_id":"ironstar-6lq.4","type":"blocks","created_at":"2025-12-18T09:36:12.450316-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-6lq.6","title":"Add Rust checks to flake.checks for CI integration","description":"Create Rust checks for CI integration. Options to evaluate:\n\n1. rust-flake provides built-in checks via rust-project configuration - may already be available\n2. If custom checks needed, create nix/modules/checks.nix defining perSystem.checks:\n   - cargo-test: cargo test --workspace --all-features\n   - cargo-clippy: cargo clippy --workspace --all-targets -- -D warnings\n   - cargo-fmt: cargo fmt --all -- --check\n   - cargo-doc: cargo doc --workspace --no-deps --document-private-items\n\nSession learning: ironstar uses import-tree (not nix/modules/ path) - any new module goes in modules/ directly.\n\nVerify what rust-flake provides first: nix flake show | grep checks\n\nLocal refs: ~/projects/rust-workspace/rust-nix-template","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-18T09:36:12.611209-05:00","updated_at":"2025-12-18T21:50:18.052972-05:00","closed_at":"2025-12-18T21:50:18.052972-05:00","close_reason":"Implemented in commits 2f9d052, 9f669cb, 0479a77. Checks: ironstar-clippy (autowired), rust-fmt, rust-test (workspace-level). Justfile targets: rust-check, list-crates-json.","dependencies":[{"issue_id":"ironstar-6lq.6","depends_on_id":"ironstar-6lq","type":"parent-child","created_at":"2025-12-18T09:36:12.611657-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-6lq.6","depends_on_id":"ironstar-6lq.4","type":"blocks","created_at":"2025-12-18T09:36:12.919412-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-6lq.7","title":"Add Rust to CI matrix and extend inherited workflows","description":"Wire Rust checks into ci.yaml matrix after 6lq.6 (flake checks) and 6lq.8 (workflow pattern) are complete.\n\nIMPLEMENTATION OPTIONS (choose one):\n\nOption A: Integrate via nix flake check (simplest)\n- Add job to ci.yaml that runs: nix flake check --impure\n- Runs ALL checks (Rust + TypeScript + Nix) in one command\n- Cachix caching already configured in flake nixConfig\n- No separate workflow file needed\n\nOption B: Separate Rust job with matrix\n- Add rust-checks job to ci.yaml\n- Use list-crates-json for crate discovery (like list-packages-json for TS)\n- Dispatch to crate-test.yaml via workflow_call\n- More granular caching/reporting but more complex\n\nAVAILABLE FLAKE OUTPUTS:\n- checks.*.ironstar-clippy\n- checks.*.rust-fmt  \n- checks.*.rust-test\n- packages.*.ironstar\n- packages.*.ironstar-doc\n\nPLATFORM MATRIX:\n- x86_64-linux (CI primary)\n- aarch64-darwin (dev machines)\n- aarch64-linux (optional)\n\nCACHING:\n- Cachix binary cache configured in nixConfig\n- just cache / cache-all targets for local pushes\n- GitHub Actions uses cached-ci-job composite action\n\nNOTE: GitHub workflow_call requires workflow to exist on default branch.\nMay need to push minimal workflow to main first, or test with workflow_dispatch.\n\nLocal refs: typescript-nix-template/.github/workflows/ci.yaml","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-18T09:36:13.083952-05:00","updated_at":"2025-12-27T18:19:55.920616-05:00","closed_at":"2025-12-27T18:19:55.920616-05:00","close_reason":"Already implemented: CI matrix category=checks runs all Rust checks via ci-build-category.sh","dependencies":[{"issue_id":"ironstar-6lq.7","depends_on_id":"ironstar-6lq","type":"parent-child","created_at":"2025-12-18T09:36:13.084329-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-6lq.7","depends_on_id":"ironstar-6lq.6","type":"blocks","created_at":"2025-12-18T09:36:13.401616-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-6lq.7","depends_on_id":"ironstar-6lq.8","type":"blocks","created_at":"2025-12-18T18:02:29.623841-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-6lq.8","title":"Create reusable Rust CI workflow with workflow_call dispatch","description":"Define a reusable GitHub workflow for Rust CI checks using workflow_call dispatch.\n\nIMPLEMENTATION APPROACH (from session research):\n\nOption A (Recommended): Use nix flake check directly\n- ci.yaml runs: nix flake check --impure\n- All Rust checks (clippy, fmt, test) run via flake.checks\n- Simplest approach, leverages existing nix infrastructure\n- Content-addressed caching via Cachix (already configured in nixConfig)\n\nOption B: Per-crate matrix with justfile\n- Create crate-test.yaml (parallel to package-test.yaml)\n- Use list-crates-json for matrix discovery\n- Run: nix develop -c just rust-check\n- More granular but adds complexity\n\nAVAILABLE CHECKS (implemented in ironstar-6lq.6):\n- checks.*.ironstar-clippy (per-crate, autowired)\n- checks.*.rust-fmt (workspace-level)\n- checks.*.rust-test (workspace-level)\n\nJUSTFILE TARGETS (for Option B):\n- just rust-fmt-check\n- just rust-clippy  \n- just rust-test\n- just rust-check (runs all)\n- just list-crates-json (matrix data)\n\nWORKFLOW FILE STRUCTURE (if Option B):\n.github/workflows/crate-test.yaml:\n- workflow_dispatch + workflow_call triggers\n- inputs: crate-name, crate-path, debug-enabled, nix-installer, force-run\n- secrets: SOPS_AGE_KEY\n- Uses cached-ci-job composite action\n\nLocal refs: typescript-nix-template/.github/workflows/package-test.yaml","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T18:02:23.02519-05:00","updated_at":"2025-12-27T18:19:56.000533-05:00","closed_at":"2025-12-27T18:19:56.000533-05:00","close_reason":"Option A implemented: nix flake check via category-based matrix in ci.yaml","dependencies":[{"issue_id":"ironstar-6lq.8","depends_on_id":"ironstar-6lq","type":"parent-child","created_at":"2025-12-18T18:02:23.025729-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-6lq.9","title":"Add workspace lint configuration to Cargo.toml","description":"Add [workspace.lints.rust] and [workspace.lints.clippy] sections following Hyperswitch pattern. See docs/notes/architecture/core/crate-services-composition.md section 'Workspace lint configuration'.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-24T10:02:27.467306-05:00","updated_at":"2025-12-27T18:19:56.07648-05:00","closed_at":"2025-12-27T18:19:56.07648-05:00","close_reason":"Already configured in Cargo.toml with workspace lints inheritance","dependencies":[{"issue_id":"ironstar-6lq.9","depends_on_id":"ironstar-6lq","type":"parent-child","created_at":"2025-12-24T10:02:27.467758-05:00","created_by":"daemon"}]}
{"id":"ironstar-72q","title":"Verify Zenoh key filtering preserves free monoid structure","description":"Verify Zenoh key expression filtering preserves free monoid structure.\n\nTests should verify:\n1. Filter commutes with concatenation: filter_s([e1, e2]) = filter_s([e1]) ++ filter_s([e2])\n2. No duplication: each event appears at most once per session stream\n3. No reordering: global_sequence order preserved within session\n4. Quotient preservation: session-filtered projection is quotient of global projection\n\nReference: semantic-model.md § Sessions as indexed profunctor","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-30T21:59:17.866095-05:00","created_by":"crs58","updated_at":"2026-01-05T12:22:40.129002-05:00","dependencies":[{"issue_id":"ironstar-72q","depends_on_id":"ironstar-zuv","type":"subtask","created_at":"2025-12-30T21:59:37.830142-05:00","created_by":"daemon"}]}
{"id":"ironstar-753","title":"Third-party library integration","description":"Third-party library integration including ECharts and Vega-Lite visualization components. See ~/projects/rust-workspace/ironstar/docs/notes/architecture/frontend/integration-patterns.md and ds-echarts-integration-guide.md","status":"open","priority":0,"issue_type":"epic","created_at":"2025-12-18T09:36:47.483031-05:00","updated_at":"2025-12-27T12:50:41.743103-05:00","dependencies":[{"issue_id":"ironstar-753","depends_on_id":"ironstar-ny3","type":"blocks","created_at":"2025-12-18T09:36:47.798161-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-753","depends_on_id":"ironstar-09r","type":"blocks","created_at":"2025-12-18T17:12:00.467149-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-753","depends_on_id":"ironstar-nor","type":"blocks","created_at":"2025-12-18T17:12:00.668819-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-753","depends_on_id":"ironstar-3gd","type":"blocks","created_at":"2025-12-24T00:43:44.325437-05:00","created_by":"daemon"}]}
{"id":"ironstar-753.1","title":"Implement VegaChart web component wrapper","description":"Create VegaChart web component wrapper for Vega-Lite.\n\nUse vanilla web component (Pattern 2 from integration-patterns-visualizations.md).\n\nConfiguration:\n- renderer: 'svg' (recommended over canvas for accessibility)\n- Store Result and View instances\n- Call result?.finalize() on disconnectedCallback to prevent memory leaks\n- Support view.data() and view.signal() for incremental updates\n\nTemplate:\n```html\n\u003cvega-chart data-ignore-morph data-signals-spec=\"...\"\u003e\n\u003c/vega-chart\u003e\n```\n\nRef: docs/notes/architecture/frontend/integration-patterns-visualizations.md","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T09:36:47.96546-05:00","updated_at":"2025-12-26T15:53:34.754436-05:00","dependencies":[{"issue_id":"ironstar-753.1","depends_on_id":"ironstar-753","type":"parent-child","created_at":"2025-12-18T09:36:47.965881-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-753.1","depends_on_id":"ironstar-ny3.14","type":"blocks","created_at":"2025-12-18T09:36:48.26694-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-753.2","title":"Implement sortable-list web component wrapper","description":"Create web-components/components/sortable-list.ts implementing Pattern 1 thin wrapper around SortableJS library. Dispatches custom reorder event with detail containing oldIndex/newIndex. Integrates with Datastar via data-on:reorder.\nLocal refs: ~/projects/lakescope-workspace/datastar-go-nats-template-northstar","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T09:36:48.427395-05:00","updated_at":"2025-12-18T09:36:48.575142-05:00","dependencies":[{"issue_id":"ironstar-753.2","depends_on_id":"ironstar-753","type":"parent-child","created_at":"2025-12-18T09:36:48.427773-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-753.2","depends_on_id":"ironstar-ny3.14","type":"blocks","created_at":"2025-12-18T09:36:48.737287-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-753.3","title":"Set up Lucide icon build-time inlining","description":"Configure rolldown.config.ts to import lucide icons and inline SVG into bundle. Create icon helper function in hypertext templates for consistent icon usage. Provides zero-runtime icon system.\nLocal refs: ~/projects/lakescope-workspace/open-props-ui, ~/projects/rust-workspace/hypertext","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T09:36:48.894573-05:00","updated_at":"2025-12-18T09:36:49.041629-05:00","dependencies":[{"issue_id":"ironstar-753.3","depends_on_id":"ironstar-753","type":"parent-child","created_at":"2025-12-18T09:36:48.894964-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-753.3","depends_on_id":"ironstar-ny3.2","type":"blocks","created_at":"2025-12-18T09:36:49.19717-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-753.4","title":"Implement ds-echarts backend support","description":"Server-side data preparation, SSE streaming for ECharts. See ~/projects/rust-workspace/ironstar/docs/notes/architecture/frontend/ds-echarts-backend.md","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-22T00:28:24.13725-05:00","updated_at":"2025-12-27T12:50:42.643425-05:00","dependencies":[{"issue_id":"ironstar-753.4","depends_on_id":"ironstar-753","type":"parent-child","created_at":"2025-12-22T00:28:24.137754-05:00","created_by":"crs58"},{"issue_id":"ironstar-753.4","depends_on_id":"ironstar-nyp.8","type":"blocks","created_at":"2025-12-22T00:32:01.681669-05:00","created_by":"daemon"},{"issue_id":"ironstar-753.4","depends_on_id":"ironstar-nyp.12","type":"blocks","created_at":"2025-12-23T23:23:30.615318-05:00","created_by":"daemon"}]}
{"id":"ironstar-753.5","title":"Implement ds-echarts build and test integration","description":"Build pipeline integration, testing strategies. See ~/projects/rust-workspace/ironstar/docs/notes/architecture/frontend/ds-echarts-build-test.md","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-22T00:28:30.073725-05:00","updated_at":"2025-12-27T12:50:43.608079-05:00","dependencies":[{"issue_id":"ironstar-753.5","depends_on_id":"ironstar-753","type":"parent-child","created_at":"2025-12-22T00:28:30.074242-05:00","created_by":"crs58"},{"issue_id":"ironstar-753.5","depends_on_id":"ironstar-753.4","type":"blocks","created_at":"2025-12-22T00:32:05.86336-05:00","created_by":"daemon"}]}
{"id":"ironstar-753.6","title":"Implement chart SSE endpoint with signal-driven options","description":"Create /api/charts/{chart_id}/feed endpoint streaming ECharts options via PatchSignals.","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-24T15:37:36.889557-05:00","updated_at":"2025-12-27T12:50:44.389757-05:00","dependencies":[{"issue_id":"ironstar-753.6","depends_on_id":"ironstar-753","type":"parent-child","created_at":"2025-12-24T15:37:36.890036-05:00","created_by":"daemon"},{"issue_id":"ironstar-753.6","depends_on_id":"ironstar-2nt.14","type":"blocks","created_at":"2025-12-27T14:20:14.876181-05:00","created_by":"daemon"}]}
{"id":"ironstar-753.7","title":"Document web components as coalgebras with bisimulation testing","description":"Document web components as coalgebras with bisimulation testing\n\n**Algebraic foundation:** semantic-model.md § Coalgebra and web components\n\n**Moore machine interpretation:**\n- State: Component internal state\n- Output: Rendered DOM\n- Transition: Event → new state\n\n**Bisimulation testing:**\n- Two states bisimilar iff same output AND equivalent transitions\n- data-ignore-morph preserves bisimulation on protected subtrees\n- Test: morphing equivalent states produces equivalent DOM\n\n**Verification:** Property tests comparing pre/post-morph DOM structure","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-29T17:51:50.527923-05:00","created_by":"crs58","updated_at":"2026-01-03T18:45:46.091757-05:00","dependencies":[{"issue_id":"ironstar-753.7","depends_on_id":"ironstar-753","type":"parent-child","created_at":"2025-12-29T17:51:50.530512-05:00","created_by":"daemon"},{"issue_id":"ironstar-753.7","depends_on_id":"ironstar-09r","type":"documents","created_at":"2025-12-29T17:52:10.394761-05:00","created_by":"daemon"}]}
{"id":"ironstar-7a2","title":"Implement Workspace bounded context aggregates in Rust","description":"Implement Rust types and fmodel-rust Deciders for Workspace bounded context following Idris2 spec and the canonical patterns established in ironstar-a9b.\n\n## Context\n\nThe Workspace bounded context contains 5 aggregates composed via the Decider pattern:\n- WorkspaceAggregate (identity, ownership, visibility)\n- WorkspacePreferences (workspace-scoped settings)\n- Dashboard (layout, tabs, chart placements)\n- SavedQuery (named queries with dataset refs)\n- UserPreferences (user-scoped settings)\n\nThis epic follows the patterns proven in ironstar-a9b (Todo domain) and documented in:\n- `spec/Workspace/*.idr` (Idris2 formal specifications)\n- `docs/notes/architecture/decisions/fmodel-rust-adoption-evaluation.md`\n- `crates/ironstar/src/domain/todo/` (reference implementation)\n\n## Canonical patterns (from a9b)\n\n**Module organization** (per aggregate):\n```\ndomain/workspace/\n├── mod.rs              # Re-exports\n├── decider.rs          # Pure Decider factory + decide/evolve\n├── commands.rs         # Command enum + Identifier + DeciderType\n├── events.rs           # Event enum + Identifier + EventType + IsFinal\n├── state.rs            # State type + status enum\n├── errors.rs           # Error + ErrorKind + factory constructors\n└── values.rs           # Value objects with smart constructors\n```\n\n**Decider factory pattern**:\n```rust\npub fn workspace_decider\u003c'a\u003e() -\u003e WorkspaceDecider\u003c'a\u003e {\n    Decider {\n        decide: Box::new(|cmd, state| decide(cmd, state)),\n        evolve: Box::new(|state, event| evolve(state, event)),\n        initial_state: Box::new(WorkspaceState::default),\n    }\n}\n```\n\n**Boundary injection**: Timestamps and UUIDs are injected at the HTTP handler layer, not generated inside pure `decide()` functions. The Idris2 spec uses holes (`?newWsId`, `?now`) to mark these boundary concerns.\n\n**Error handling**: Use `Err(WorkspaceError::validation_failed())` for precondition violations. Do NOT use `Ok(vec![FailureEvent])` — keep errors and events separate.\n\n**Required traits**:\n- Commands: `Identifier`, `DeciderType`, `Serialize`, `Deserialize`, `TS`\n- Events: `Identifier`, `EventType`, `DeciderType`, `IsFinal`, `Serialize`, `Deserialize`, `TS`\n- State: `Debug`, `Clone`, `Default`, `PartialEq`\n\n## Deliverables\n\nPhase 1 (domain types):\n- User and UserId types with composite key pattern (SharedKernel)\n- All 5 aggregate Deciders with commands, events, state, errors, values\n\nPhase 2 (infrastructure wiring):\n- EventSourcedAggregate wiring to SQLite\n- MaterializedView for Workspace projections\n- Zenoh event publishing integration\n\nPhase 3 (application layer):\n- Command handlers (POST routes)\n- Query handlers (GET routes)\n\nPhase 4 (testing):\n- Decider specification tests (given/when/then)\n- View specification tests\n\n## References\n\n- spec/Workspace/WorkspaceAggregate.idr\n- spec/Workspace/Dashboard.idr\n- spec/Workspace/SavedQuery.idr\n- spec/Workspace/UserPreferences.idr\n- spec/Workspace/WorkspacePreferences.idr\n- spec/SharedKernel/UserId.idr\n- crates/ironstar/src/domain/todo/ (reference implementation)","status":"open","priority":1,"issue_type":"epic","owner":"cameron.ray.smith@gmail.com","created_at":"2026-01-16T12:06:40.332542-05:00","created_by":"Cameron Smith","updated_at":"2026-01-18T23:14:16.979443-05:00","dependencies":[{"issue_id":"ironstar-7a2","depends_on_id":"ironstar-2it","type":"implements","created_at":"2026-01-16T12:06:59.337603-05:00","created_by":"Cameron Smith"}],"comments":[{"id":15,"issue_id":"ironstar-7a2","author":"Cameron Smith","text":"Checkpoint: Session 2026-01-18\n\nDone:\n- 7a2.1: UserId shared kernel pattern verified\n- 7a2.2: Workspace aggregate implemented (commands, events, state, errors, decider)\n\nRemaining P2 aggregates follow established pattern:\n- 7a2.3: WorkspacePreferences\n- 7a2.4: Dashboard\n- 7a2.5: SavedQuery\n- 7a2.6: UserPreferences\n- 7a2.7: workspaceContextDecider composition\n\nSuggested next: Continue with 7a2.3-7a2.6 following Workspace pattern, or pivot to infrastructure wiring (nyp) if integration testing needed.","created_at":"2026-01-19T04:14:15Z"}]}
{"id":"ironstar-7a2.1","title":"Implement User and UserId types with composite key pattern","description":"Import UserId from session module into workspace bounded context, verify shared kernel pattern works.\n\n## Context\n\nUserId was implemented in ironstar-507 as a UUID wrapper in `domain/session/values.rs`. This task verifies the shared kernel pattern: Workspace aggregates can import and use UserId from Session context.\n\n## Scope change\n\nOriginal description requested composite key implementation. Architecture docs (oauth-authentication.md) specify dual representation:\n- Domain layer: UserId = UUID (canonical) — **already implemented in 507**\n- Infrastructure layer: user_identities table handles (provider, external_id) → UUID lookup\n\nThe composite OAuthIdentity is infrastructure concern under jqv (auth epic), not a domain type.\n\n## Implementation requirements\n\n1. Verify `UserId` is re-exported from `domain/mod.rs`\n2. Create `domain/workspace/` module structure\n3. Import `UserId` in workspace aggregates\n4. Ensure no circular dependencies between session and workspace\n\n## Acceptance criteria\n\n- [ ] Workspace module can import UserId from domain re-exports\n- [ ] No compilation errors with shared kernel pattern\n- [ ] UserId usage documented in workspace aggregate commands/events\n\n## References\n\n- ironstar-507: Session aggregate (UserId source)\n- docs/notes/architecture/decisions/oauth-authentication.md","status":"closed","priority":1,"issue_type":"task","owner":"cameron.ray.smith@gmail.com","created_at":"2026-01-16T12:06:49.59244-05:00","created_by":"Cameron Smith","updated_at":"2026-01-18T22:19:43.285377-05:00","closed_at":"2026-01-18T22:19:43.285377-05:00","close_reason":"Shared kernel pattern verified. Workspace module created, UserId imports from session context. WorkspaceId added. Commits: 1c79617, 1629118, 6913d9b","dependencies":[{"issue_id":"ironstar-7a2.1","depends_on_id":"ironstar-7a2","type":"parent-child","created_at":"2026-01-16T12:06:49.593511-05:00","created_by":"Cameron Smith"},{"issue_id":"ironstar-7a2.1","depends_on_id":"ironstar-507","type":"blocks","created_at":"2026-01-16T12:41:44.953146-05:00","created_by":"Cameron Smith"}],"comments":[{"id":11,"issue_id":"ironstar-7a2.1","author":"Cameron Smith","text":"Scope revised: UserId (UUID) already exists from 507. This task now verifies shared kernel import pattern for Workspace context.","created_at":"2026-01-19T03:16:27Z"}]}
{"id":"ironstar-7a2.10","title":"Integrate Zenoh event publishing for Workspace","description":"Integrate Zenoh pub/sub for Workspace bounded context event distribution following ironstar-a9b.9 pattern.\n\n## Key expression patterns\n\n```\nevents/Workspace/{workspace_id}\nevents/Workspace/{workspace_id}/preferences\nevents/Workspace/{workspace_id}/dashboard/{name}\nevents/Workspace/{workspace_id}/query/{name}\nevents/User/{user_id}/preferences\n```\n\n## Location\n\n`crates/ironstar/src/infrastructure/event_bus/workspace.rs`\n\n## Acceptance criteria\n\n- [ ] WorkspaceEventPublisher for all 5 aggregate types\n- [ ] Key expression routing by aggregate type and ID\n- [ ] Subscriber factory for SSE feed integration\n- [ ] Cache invalidation hooks\n\n## References\n\n- ironstar-a9b.9 task description\n- docs/notes/architecture/infrastructure/zenoh-event-bus.md","status":"open","priority":2,"issue_type":"task","owner":"cameron.ray.smith@gmail.com","created_at":"2026-01-18T12:27:08.199235-05:00","created_by":"Cameron Smith","updated_at":"2026-01-18T12:27:08.199235-05:00","dependencies":[{"issue_id":"ironstar-7a2.10","depends_on_id":"ironstar-7a2","type":"parent-child","created_at":"2026-01-18T12:27:08.200262-05:00","created_by":"Cameron Smith"},{"issue_id":"ironstar-7a2.10","depends_on_id":"ironstar-7a2.8","type":"blocks","created_at":"2026-01-18T12:27:54.914025-05:00","created_by":"Cameron Smith"}]}
{"id":"ironstar-7a2.11","title":"Implement Workspace command handlers","description":"Implement axum command handlers (POST routes) for Workspace bounded context following ironstar-a9b.10 pattern.\n\n## Routes to implement\n\n- POST /workspace (CreateWorkspace)\n- POST /workspace/{id}/rename (RenameWorkspace)\n- POST /workspace/{id}/visibility (SetVisibility)\n- POST /workspace/{id}/dashboard (CreateDashboard)\n- POST /workspace/{id}/dashboard/{name}/chart (AddChart)\n- POST /workspace/{id}/query (SaveQuery)\n- POST /user/preferences (InitializePreferences, SetTheme, SetLocale)\n\n## Pattern\n\n```rust\npub async fn create_workspace(\n    State(aggregate): State\u003cArc\u003cWorkspaceAggregate\u003e\u003e,\n    Json(payload): Json\u003cCreateWorkspacePayload\u003e,\n) -\u003e Result\u003cimpl IntoResponse, AppError\u003e {\n    let now = Utc::now();  // Timestamp injection at boundary\n    let command = WorkspaceCommand::Create { ..., created_at: now };\n    let events = aggregate.handle(\u0026command).await?;\n    Ok(Json(events))\n}\n```\n\n## Acceptance criteria\n\n- [ ] Command handlers for all 5 aggregates\n- [ ] Timestamp injection at boundary\n- [ ] Proper error response mapping\n- [ ] Integration with EventSourcedAggregate\n\n## References\n\n- ironstar-a9b.10 task description","status":"open","priority":2,"issue_type":"task","owner":"cameron.ray.smith@gmail.com","created_at":"2026-01-18T12:27:09.177513-05:00","created_by":"Cameron Smith","updated_at":"2026-01-18T12:27:09.177513-05:00","dependencies":[{"issue_id":"ironstar-7a2.11","depends_on_id":"ironstar-7a2","type":"parent-child","created_at":"2026-01-18T12:27:09.17847-05:00","created_by":"Cameron Smith"},{"issue_id":"ironstar-7a2.11","depends_on_id":"ironstar-7a2.8","type":"blocks","created_at":"2026-01-18T12:27:55.079305-05:00","created_by":"Cameron Smith"},{"issue_id":"ironstar-7a2.11","depends_on_id":"ironstar-7a2.10","type":"blocks","created_at":"2026-01-18T12:27:55.244098-05:00","created_by":"Cameron Smith"}]}
{"id":"ironstar-7a2.12","title":"Implement Workspace query handlers","description":"Implement axum query handlers (GET routes) for Workspace bounded context following ironstar-a9b.11 pattern.\n\n## Routes to implement\n\n- GET /workspaces (list workspaces for user)\n- GET /workspace/{id} (workspace details)\n- GET /workspace/{id}/dashboard/{name} (dashboard layout)\n- GET /workspace/{id}/queries (list saved queries)\n- GET /user/preferences (user preferences)\n\n## Pattern\n\n```rust\npub async fn get_workspaces(\n    State(view): State\u003cArc\u003cWorkspaceListView\u003e\u003e,\n    Extension(user_id): Extension\u003cUserId\u003e,\n) -\u003e Result\u003cimpl IntoResponse, AppError\u003e {\n    let state = view.current_state().await?;\n    let filtered = state.workspaces_for_user(\u0026user_id);\n    Ok(Json(filtered))\n}\n```\n\n## Acceptance criteria\n\n- [ ] Query handlers for all read models\n- [ ] User-scoped filtering where appropriate\n- [ ] SSE endpoints for real-time updates\n- [ ] Integration with MaterializedView projections\n\n## References\n\n- ironstar-a9b.11 task description","status":"open","priority":2,"issue_type":"task","owner":"cameron.ray.smith@gmail.com","created_at":"2026-01-18T12:27:10.119921-05:00","created_by":"Cameron Smith","updated_at":"2026-01-18T12:27:10.119921-05:00","dependencies":[{"issue_id":"ironstar-7a2.12","depends_on_id":"ironstar-7a2","type":"parent-child","created_at":"2026-01-18T12:27:10.12096-05:00","created_by":"Cameron Smith"},{"issue_id":"ironstar-7a2.12","depends_on_id":"ironstar-7a2.9","type":"blocks","created_at":"2026-01-18T12:27:55.403729-05:00","created_by":"Cameron Smith"}]}
{"id":"ironstar-7a2.13","title":"Implement Workspace Decider specification tests","description":"Implement given/when/then specification tests for all Workspace Deciders following ironstar-a9b.12 pattern.\n\n## Test coverage per aggregate\n\nFor each of the 5 aggregates, test:\n- All command success paths\n- All error conditions\n- Idempotency behavior (where applicable)\n- Full lifecycle sequences\n\n## Pattern\n\n```rust\nuse fmodel_rust::specification::DeciderTestSpecification;\n\n#[test]\nfn create_workspace_succeeds() {\n    DeciderTestSpecification::default()\n        .for_decider(workspace_decider())\n        .given(vec![])\n        .when(WorkspaceCommand::Create { ... })\n        .then(vec![WorkspaceEvent::Created { ... }]);\n}\n\n#[test]\nfn create_workspace_when_exists_fails() {\n    DeciderTestSpecification::default()\n        .for_decider(workspace_decider())\n        .given(vec![WorkspaceEvent::Created { ... }])\n        .when(WorkspaceCommand::Create { ... })\n        .then_error(WorkspaceError::already_exists());\n}\n```\n\n## Acceptance criteria\n\n- [ ] WorkspaceAggregate decider tests\n- [ ] WorkspacePreferences decider tests\n- [ ] Dashboard decider tests\n- [ ] SavedQuery decider tests\n- [ ] UserPreferences decider tests\n- [ ] All tests pass with cargo nextest\n\n## References\n\n- ironstar-a9b.12 task description\n- crates/ironstar/tests/ (Todo decider tests reference)","status":"open","priority":2,"issue_type":"task","owner":"cameron.ray.smith@gmail.com","created_at":"2026-01-18T12:27:27.026747-05:00","created_by":"Cameron Smith","updated_at":"2026-01-18T12:27:27.026747-05:00","dependencies":[{"issue_id":"ironstar-7a2.13","depends_on_id":"ironstar-7a2","type":"parent-child","created_at":"2026-01-18T12:27:27.027601-05:00","created_by":"Cameron Smith"},{"issue_id":"ironstar-7a2.13","depends_on_id":"ironstar-7a2.2","type":"blocks","created_at":"2026-01-18T12:27:56.516353-05:00","created_by":"Cameron Smith"},{"issue_id":"ironstar-7a2.13","depends_on_id":"ironstar-7a2.3","type":"blocks","created_at":"2026-01-18T12:27:56.679457-05:00","created_by":"Cameron Smith"},{"issue_id":"ironstar-7a2.13","depends_on_id":"ironstar-7a2.4","type":"blocks","created_at":"2026-01-18T12:27:56.842497-05:00","created_by":"Cameron Smith"},{"issue_id":"ironstar-7a2.13","depends_on_id":"ironstar-7a2.5","type":"blocks","created_at":"2026-01-18T12:27:57.00341-05:00","created_by":"Cameron Smith"},{"issue_id":"ironstar-7a2.13","depends_on_id":"ironstar-7a2.6","type":"blocks","created_at":"2026-01-18T12:27:57.171588-05:00","created_by":"Cameron Smith"}]}
{"id":"ironstar-7a2.14","title":"Implement Workspace View specification tests","description":"Implement specification tests for Workspace MaterializedView projections following ironstar-a9b.13 pattern.\n\n## Test coverage per view\n\nFor each view, test:\n- Initial state correctness\n- Event folding produces expected projections\n- Invariant preservation on edge cases (delete non-existent, etc.)\n- Multi-event sequences\n\n## Pattern\n\n```rust\nuse fmodel_rust::view::ViewStateComputation;\n\n#[test]\nfn workspace_list_view_projects_created_event() {\n    let view = workspace_list_view();\n    let initial = (view.initial_state)();\n    \n    let event = WorkspaceEvent::Created { ... };\n    let projected = view.compute_new_state(\u0026initial, \u0026[\u0026event]);\n    \n    assert_eq!(projected.workspaces.len(), 1);\n    assert_eq!(projected.workspaces[0].name, \"Test Workspace\");\n}\n\n#[test]\nfn workspace_list_view_preserves_invariants_on_delete_nonexistent() {\n    let view = workspace_list_view();\n    let state = WorkspaceListState { workspaces: vec![...], count: 1 };\n    \n    let event = WorkspaceEvent::Deleted { id: nonexistent_id, ... };\n    let projected = view.compute_new_state(\u0026state, \u0026[\u0026event]);\n    \n    // Invariant preserved: count == workspaces.len()\n    assert_eq!(projected.count, projected.workspaces.len());\n}\n```\n\n## Acceptance criteria\n\n- [ ] WorkspaceListView projection tests\n- [ ] DashboardLayoutView projection tests\n- [ ] SavedQueryListView projection tests\n- [ ] UserPreferencesView projection tests\n- [ ] Invariant preservation tests for all views\n\n## References\n\n- ironstar-a9b.13 task description\n- crates/ironstar/tests/ (Todo view tests reference)","status":"open","priority":2,"issue_type":"task","owner":"cameron.ray.smith@gmail.com","created_at":"2026-01-18T12:27:27.688693-05:00","created_by":"Cameron Smith","updated_at":"2026-01-18T12:27:27.688693-05:00","dependencies":[{"issue_id":"ironstar-7a2.14","depends_on_id":"ironstar-7a2","type":"parent-child","created_at":"2026-01-18T12:27:27.68957-05:00","created_by":"Cameron Smith"},{"issue_id":"ironstar-7a2.14","depends_on_id":"ironstar-7a2.9","type":"blocks","created_at":"2026-01-18T12:27:57.333131-05:00","created_by":"Cameron Smith"}]}
{"id":"ironstar-7a2.2","title":"Implement Workspace aggregate with visibility control","description":"Implement WorkspaceAggregate Decider following fmodel-rust patterns from ironstar-a9b.\n\n## Context\n\nWorkspaceAggregate manages workspace lifecycle: creation, renaming, and visibility control. It is the root aggregate for the Workspace bounded context.\n\n## Implementation requirements\n\n**Location**: `crates/ironstar/src/domain/workspace/`\n\n**Module structure**:\n```\nworkspace/\n├── mod.rs              # Re-exports WorkspaceCommand, WorkspaceEvent, etc.\n├── decider.rs          # workspace_decider() factory\n├── commands.rs         # WorkspaceCommand enum\n├── events.rs           # WorkspaceEvent enum\n├── state.rs            # WorkspaceState + WorkspaceStatus\n├── errors.rs           # WorkspaceError + WorkspaceErrorKind\n└── values.rs           # WorkspaceId, WorkspaceName, Visibility\n```\n\n**Commands** (from spec/Workspace/WorkspaceAggregate.idr):\n- `CreateWorkspace { name: String, owner_id: UserId, visibility: Visibility, created_at: DateTime\u003cUtc\u003e }`\n- `RenameWorkspace { workspace_id: WorkspaceId, new_name: String, renamed_at: DateTime\u003cUtc\u003e }`\n- `SetVisibility { workspace_id: WorkspaceId, visibility: Visibility, changed_at: DateTime\u003cUtc\u003e }`\n\n**Events**:\n- `WorkspaceCreated { id: WorkspaceId, name: WorkspaceName, owner_id: UserId, visibility: Visibility, created_at: DateTime\u003cUtc\u003e }`\n- `WorkspaceRenamed { id: WorkspaceId, old_name: WorkspaceName, new_name: WorkspaceName, renamed_at: DateTime\u003cUtc\u003e }`\n- `VisibilityChanged { id: WorkspaceId, old_visibility: Visibility, new_visibility: Visibility, changed_at: DateTime\u003cUtc\u003e }`\n\n**State**:\n```rust\npub struct WorkspaceState {\n    pub id: Option\u003cWorkspaceId\u003e,\n    pub name: Option\u003cWorkspaceName\u003e,\n    pub owner_id: Option\u003cUserId\u003e,\n    pub visibility: Option\u003cVisibility\u003e,\n    pub created_at: Option\u003cDateTime\u003cUtc\u003e\u003e,\n    pub status: WorkspaceStatus,\n}\n\npub enum WorkspaceStatus {\n    NotCreated,\n    Active,\n}\n```\n\n**Boundary injection**: Commands carry `created_at`, `renamed_at`, `changed_at` timestamps injected at HTTP handler layer. The pure `decide()` function does not call `Utc::now()`.\n\n**Error handling**: Return `Err(WorkspaceError::already_exists())` when creating duplicate, `Err(WorkspaceError::not_found())` when operating on non-existent workspace.\n\n**Idempotency**: Renaming to same name or setting same visibility returns `Ok(vec![])`.\n\n## Acceptance criteria\n\n- [ ] WorkspaceCommand enum with Identifier + DeciderType traits\n- [ ] WorkspaceEvent enum with Identifier + EventType + DeciderType + IsFinal traits\n- [ ] WorkspaceState with status enum and helper methods\n- [ ] WorkspaceError with factory constructors\n- [ ] Value objects: WorkspaceId, WorkspaceName, Visibility\n- [ ] workspace_decider() factory function\n- [ ] Pure decide() and evolve() functions\n- [ ] All types export to TypeScript via ts-rs\n\n## References\n\n- spec/Workspace/WorkspaceAggregate.idr (formal specification)\n- crates/ironstar/src/domain/todo/decider.rs (reference pattern)","status":"closed","priority":1,"issue_type":"task","owner":"cameron.ray.smith@gmail.com","created_at":"2026-01-16T12:06:50.555287-05:00","created_by":"Cameron Smith","updated_at":"2026-01-18T22:26:49.096154-05:00","closed_at":"2026-01-18T22:26:49.096154-05:00","close_reason":"Workspace aggregate implemented: commands, events, state, errors, decider. 47 tests pass. Commits: e90455d..50cc96d","dependencies":[{"issue_id":"ironstar-7a2.2","depends_on_id":"ironstar-7a2","type":"parent-child","created_at":"2026-01-16T12:06:50.556415-05:00","created_by":"Cameron Smith"},{"issue_id":"ironstar-7a2.2","depends_on_id":"ironstar-7a2.1","type":"blocks","created_at":"2026-01-16T12:36:15.617979-05:00","created_by":"Cameron Smith"}]}
{"id":"ironstar-7a2.3","title":"Implement WorkspacePreferences aggregate","description":"Implement WorkspacePreferences Decider following fmodel-rust patterns from ironstar-a9b.\n\n## Context\n\nWorkspacePreferences manages workspace-scoped settings: default catalog URI and layout defaults. It is scoped to a single workspace via aggregate ID pattern `workspace_{id}/preferences`.\n\n## Implementation requirements\n\n**Location**: `crates/ironstar/src/domain/workspace_preferences/`\n\n**Module structure**:\n```\nworkspace_preferences/\n├── mod.rs\n├── decider.rs          # workspace_preferences_decider() factory\n├── commands.rs         # WorkspacePreferencesCommand enum\n├── events.rs           # WorkspacePreferencesEvent enum\n├── state.rs            # WorkspacePreferencesState\n├── errors.rs           # WorkspacePreferencesError\n└── values.rs           # CatalogUri, LayoutDefaults\n```\n\n**Commands** (from spec/Workspace/WorkspacePreferences.idr):\n- `InitializeWorkspacePreferences { workspace_id: WorkspaceId, initialized_at: DateTime\u003cUtc\u003e }`\n- `SetDefaultCatalog { workspace_id: WorkspaceId, catalog_uri: CatalogUri, set_at: DateTime\u003cUtc\u003e }`\n- `ClearDefaultCatalog { workspace_id: WorkspaceId, cleared_at: DateTime\u003cUtc\u003e }`\n- `UpdateLayoutDefaults { workspace_id: WorkspaceId, layout_defaults: LayoutDefaults, updated_at: DateTime\u003cUtc\u003e }`\n\n**Events**:\n- `WorkspacePreferencesInitialized { workspace_id: WorkspaceId, initialized_at: DateTime\u003cUtc\u003e }`\n- `DefaultCatalogSet { workspace_id: WorkspaceId, catalog_uri: CatalogUri, set_at: DateTime\u003cUtc\u003e }`\n- `DefaultCatalogCleared { workspace_id: WorkspaceId, cleared_at: DateTime\u003cUtc\u003e }`\n- `LayoutDefaultsUpdated { workspace_id: WorkspaceId, layout_defaults: LayoutDefaults, updated_at: DateTime\u003cUtc\u003e }`\n\n**Aggregate ID pattern**: `workspace_{workspace_id}/preferences`\n\n**Idempotency**: All operations after initialization are idempotent (setting same value returns empty event list).\n\n## Acceptance criteria\n\n- [ ] WorkspacePreferencesCommand enum with routing traits\n- [ ] WorkspacePreferencesEvent enum with event traits\n- [ ] WorkspacePreferencesState with initialization tracking\n- [ ] workspace_preferences_decider() factory function\n- [ ] Value objects: CatalogUri, LayoutDefaults\n- [ ] All types export to TypeScript via ts-rs\n\n## References\n\n- spec/Workspace/WorkspacePreferences.idr (formal specification)\n- crates/ironstar/src/domain/todo/decider.rs (reference pattern)","status":"open","priority":2,"issue_type":"task","owner":"cameron.ray.smith@gmail.com","created_at":"2026-01-16T12:06:51.673999-05:00","created_by":"Cameron Smith","updated_at":"2026-01-18T12:23:01.009402-05:00","dependencies":[{"issue_id":"ironstar-7a2.3","depends_on_id":"ironstar-7a2","type":"parent-child","created_at":"2026-01-16T12:06:51.675142-05:00","created_by":"Cameron Smith"},{"issue_id":"ironstar-7a2.3","depends_on_id":"ironstar-7a2.2","type":"blocks","created_at":"2026-01-16T12:36:16.285726-05:00","created_by":"Cameron Smith"}]}
{"id":"ironstar-7a2.4","title":"Implement Dashboard aggregate with workspaceId scope","description":"Implement Dashboard Decider following fmodel-rust patterns from ironstar-a9b.\n\n## Context\n\nDashboard manages chart placement and layout configuration within a workspace. Each workspace can have multiple dashboards, each with tabs and chart placements.\n\n## Implementation requirements\n\n**Location**: `crates/ironstar/src/domain/dashboard/`\n\n**Module structure**:\n```\ndashboard/\n├── mod.rs\n├── decider.rs          # dashboard_decider() factory\n├── commands.rs         # DashboardCommand enum\n├── events.rs           # DashboardEvent enum\n├── state.rs            # DashboardState + DashboardStatus\n├── errors.rs           # DashboardError\n└── values.rs           # DashboardId, DashboardName, TabId, ChartId, GridPosition\n```\n\n**Commands** (from spec/Workspace/Dashboard.idr):\n- `CreateDashboard { workspace_id: WorkspaceId, name: String, created_at: DateTime\u003cUtc\u003e }`\n- `RenameDashboard { dashboard_id: DashboardId, new_name: String, renamed_at: DateTime\u003cUtc\u003e }`\n- `AddTab { dashboard_id: DashboardId, tab_name: String, added_at: DateTime\u003cUtc\u003e }`\n- `RemoveTab { dashboard_id: DashboardId, tab_id: TabId, removed_at: DateTime\u003cUtc\u003e }`\n- `AddChart { dashboard_id: DashboardId, tab_id: TabId, chart_ref: ChartDefinitionRef, position: GridPosition, added_at: DateTime\u003cUtc\u003e }`\n- `RemoveChart { dashboard_id: DashboardId, chart_id: ChartId, removed_at: DateTime\u003cUtc\u003e }`\n- `MoveChartToTab { dashboard_id: DashboardId, chart_id: ChartId, target_tab_id: TabId, new_position: GridPosition, moved_at: DateTime\u003cUtc\u003e }`\n\n**Events**:\n- `DashboardCreated`, `DashboardRenamed`\n- `TabAdded`, `TabRemoved`\n- `ChartAdded`, `ChartRemoved`, `ChartMovedToTab`\n\n**State machine**:\n```rust\npub enum DashboardStatus {\n    NoDashboard,\n    DashboardExists,\n}\n```\n\n**Aggregate ID pattern**: `workspace_{workspace_id}/dashboard_{dashboard_name}`\n\n**Cross-context reference**: `ChartDefinitionRef` references Analytics.ChartDefinition (Customer-Supplier pattern). Validation that the referenced chart exists happens at the boundary, not in the pure decider.\n\n**Idempotency**: RemoveChart on non-existent chart returns `Ok(vec![])` (idempotent). RemoveTab requires tab to be empty or relocate charts first.\n\n## Acceptance criteria\n\n- [ ] DashboardCommand enum with routing traits\n- [ ] DashboardEvent enum with event traits\n- [ ] DashboardState with tabs and chart placements\n- [ ] dashboard_decider() factory function\n- [ ] Value objects: DashboardId, DashboardName, TabId, ChartId, GridPosition, ChartDefinitionRef\n- [ ] All types export to TypeScript via ts-rs\n\n## References\n\n- spec/Workspace/Dashboard.idr (formal specification)\n- crates/ironstar/src/domain/todo/decider.rs (reference pattern)","status":"open","priority":2,"issue_type":"task","owner":"cameron.ray.smith@gmail.com","created_at":"2026-01-16T12:06:52.427059-05:00","created_by":"Cameron Smith","updated_at":"2026-01-18T12:23:02.789299-05:00","dependencies":[{"issue_id":"ironstar-7a2.4","depends_on_id":"ironstar-7a2","type":"parent-child","created_at":"2026-01-16T12:06:52.428206-05:00","created_by":"Cameron Smith"},{"issue_id":"ironstar-7a2.4","depends_on_id":"ironstar-7a2.2","type":"blocks","created_at":"2026-01-16T12:36:17.214708-05:00","created_by":"Cameron Smith"}]}
{"id":"ironstar-7a2.5","title":"Implement SavedQuery aggregate with workspaceId scope","description":"Implement SavedQuery Decider following fmodel-rust patterns from ironstar-a9b.\n\n## Context\n\nSavedQuery manages named DuckDB queries with dataset references within a workspace. Queries can be saved, renamed, updated, and deleted.\n\n## Implementation requirements\n\n**Location**: `crates/ironstar/src/domain/saved_query/`\n\n**Module structure**:\n```\nsaved_query/\n├── mod.rs\n├── decider.rs          # saved_query_decider() factory\n├── commands.rs         # SavedQueryCommand enum\n├── events.rs           # SavedQueryEvent enum\n├── state.rs            # SavedQueryState + SavedQueryStatus\n├── errors.rs           # SavedQueryError\n└── values.rs           # SavedQueryId, QueryName, SqlQuery, DatasetRef\n```\n\n**Commands** (from spec/Workspace/SavedQuery.idr):\n- `SaveQuery { workspace_id: WorkspaceId, name: String, sql: String, dataset_ref: Option\u003cDatasetRef\u003e, saved_at: DateTime\u003cUtc\u003e }`\n- `RenameSavedQuery { query_id: SavedQueryId, new_name: String, renamed_at: DateTime\u003cUtc\u003e }`\n- `DeleteSavedQuery { query_id: SavedQueryId, deleted_at: DateTime\u003cUtc\u003e }`\n- `UpdateSavedQuerySql { query_id: SavedQueryId, new_sql: String, updated_at: DateTime\u003cUtc\u003e }`\n- `UpdateDatasetReference { query_id: SavedQueryId, dataset_ref: Option\u003cDatasetRef\u003e, updated_at: DateTime\u003cUtc\u003e }`\n\n**Events**:\n- `SavedQueryCreated { id: SavedQueryId, workspace_id: WorkspaceId, name: QueryName, sql: SqlQuery, dataset_ref: Option\u003cDatasetRef\u003e, saved_at: DateTime\u003cUtc\u003e }`\n- `SavedQueryRenamed`, `SavedQueryDeleted`, `SavedQuerySqlUpdated`, `DatasetRefUpdated`\n\n**State machine**:\n```rust\npub enum SavedQueryStatus {\n    NoQuery,\n    QueryExists,\n    QueryDeleted,  // Terminal state\n}\n```\n\n**Aggregate ID pattern**: `workspace_{workspace_id}/query_{query_name}`\n\n**Validation in decide()**: Name and SQL cannot be empty (return `Err(SavedQueryError::empty_name())` or `Err(SavedQueryError::empty_sql())`).\n\n**Cross-context reference**: `DatasetRef` references DuckDB catalog/dataset. Validation that dataset exists happens at runtime (DuckDB query execution), not in the pure decider.\n\n**NOT idempotent**: SaveQuery on existing query returns error (use UpdateSavedQuerySql instead). DeleteSavedQuery on deleted query returns error.\n\n## Acceptance criteria\n\n- [ ] SavedQueryCommand enum with routing traits\n- [ ] SavedQueryEvent enum with event traits  \n- [ ] SavedQueryState with query metadata\n- [ ] saved_query_decider() factory function\n- [ ] Value objects: SavedQueryId, QueryName, SqlQuery, DatasetRef\n- [ ] Validation for non-empty name and SQL\n- [ ] All types export to TypeScript via ts-rs\n\n## References\n\n- spec/Workspace/SavedQuery.idr (formal specification)\n- crates/ironstar/src/domain/todo/decider.rs (reference pattern)","status":"open","priority":2,"issue_type":"task","owner":"cameron.ray.smith@gmail.com","created_at":"2026-01-16T12:06:53.345215-05:00","created_by":"Cameron Smith","updated_at":"2026-01-18T12:23:35.466765-05:00","dependencies":[{"issue_id":"ironstar-7a2.5","depends_on_id":"ironstar-7a2","type":"parent-child","created_at":"2026-01-16T12:06:53.346272-05:00","created_by":"Cameron Smith"},{"issue_id":"ironstar-7a2.5","depends_on_id":"ironstar-7a2.2","type":"blocks","created_at":"2026-01-16T12:36:17.96413-05:00","created_by":"Cameron Smith"}]}
{"id":"ironstar-7a2.6","title":"Implement UserPreferences aggregate (user-scoped only)","description":"Implement UserPreferences Decider following fmodel-rust patterns from ironstar-a9b.\n\n## Context\n\nUserPreferences manages user-scoped personal settings that apply across all workspaces: theme, locale, and UI state. Each user has exactly one preferences aggregate.\n\n## Implementation requirements\n\n**Location**: `crates/ironstar/src/domain/user_preferences/`\n\n**Module structure**:\n```\nuser_preferences/\n├── mod.rs\n├── decider.rs          # user_preferences_decider() factory\n├── commands.rs         # UserPreferencesCommand enum\n├── events.rs           # UserPreferencesEvent enum\n├── state.rs            # UserPreferencesState\n├── errors.rs           # UserPreferencesError\n└── values.rs           # Theme, Locale, UiState\n```\n\n**Commands** (from spec/Workspace/UserPreferences.idr):\n- `InitializePreferences { user_id: UserId, initialized_at: DateTime\u003cUtc\u003e }`\n- `SetTheme { user_id: UserId, theme: Theme, set_at: DateTime\u003cUtc\u003e }`\n- `SetLocale { user_id: UserId, locale: Locale, set_at: DateTime\u003cUtc\u003e }`\n- `UpdateUiState { user_id: UserId, ui_state: UiState, updated_at: DateTime\u003cUtc\u003e }`\n\n**Events**:\n- `UserPreferencesInitialized { user_id: UserId, initialized_at: DateTime\u003cUtc\u003e }`\n- `ThemeSet { user_id: UserId, theme: Theme, set_at: DateTime\u003cUtc\u003e }`\n- `LocaleSet { user_id: UserId, locale: Locale, set_at: DateTime\u003cUtc\u003e }`\n- `UiStateUpdated { user_id: UserId, ui_state: UiState, updated_at: DateTime\u003cUtc\u003e }`\n\n**Aggregate ID pattern**: `user_{user_id}/preferences` (singleton per user)\n\n**Value objects**:\n```rust\npub enum Theme { Light, Dark, System }\npub struct Locale(String);  // e.g., \"en-US\", validated via smart constructor\npub struct UiState(serde_json::Value);  // Opaque JSON for extensibility\n```\n\n**Idempotency**: All operations after initialization are idempotent.\n\n## Acceptance criteria\n\n- [ ] UserPreferencesCommand enum with routing traits\n- [ ] UserPreferencesEvent enum with event traits\n- [ ] UserPreferencesState with preferences fields\n- [ ] user_preferences_decider() factory function\n- [ ] Value objects: Theme, Locale, UiState\n- [ ] All types export to TypeScript via ts-rs\n\n## References\n\n- spec/Workspace/UserPreferences.idr (formal specification)\n- crates/ironstar/src/domain/todo/decider.rs (reference pattern)","status":"open","priority":2,"issue_type":"task","owner":"cameron.ray.smith@gmail.com","created_at":"2026-01-16T12:06:55.084472-05:00","created_by":"Cameron Smith","updated_at":"2026-01-18T12:23:36.600655-05:00","dependencies":[{"issue_id":"ironstar-7a2.6","depends_on_id":"ironstar-7a2","type":"parent-child","created_at":"2026-01-16T12:06:55.085454-05:00","created_by":"Cameron Smith"},{"issue_id":"ironstar-7a2.6","depends_on_id":"ironstar-7a2.1","type":"blocks","created_at":"2026-01-16T12:36:19.571442-05:00","created_by":"Cameron Smith"}]}
{"id":"ironstar-7a2.7","title":"Implement workspaceContextDecider composition","description":"Implement workspaceContextDecider composition using fmodel-rust combine pattern.\n\n## Context\n\nThe Workspace bounded context contains 5 aggregates that can be composed into a single context-level Decider using fmodel-rust's monoidal composition. This task implements the composition if needed for unified command routing.\n\n## Design decision\n\n**Option A (Recommended)**: Manage each aggregate separately with distinct routes\n- Each aggregate has its own HTTP routes (e.g., POST /workspace, POST /workspace/{id}/dashboard)\n- Simpler routing, clearer API surface\n- No need for Sum5 type complexity\n- **This is how a9b (Todo) works**\n\n**Option B**: Unified workspaceContextDecider via combine5\n- Single entry point for all Workspace commands\n- Commands tagged with Sum5 variants for routing\n- State is product type (ws, prefs, dashboard, query, user_prefs)\n- More complex but enables cross-aggregate transactions\n\n## Implementation (if Option B chosen)\n\n**Location**: `crates/ironstar/src/domain/workspace/context.rs`\n\n```rust\nuse fmodel_rust::decider::combine5;\n\npub type WorkspaceContextCommand = Sum5\u003c\n    WorkspaceCommand,\n    WorkspacePreferencesCommand,\n    DashboardCommand,\n    SavedQueryCommand,\n    UserPreferencesCommand,\n\u003e;\n\npub type WorkspaceContextState = (\n    WorkspaceState,\n    WorkspacePreferencesState,\n    DashboardState,\n    SavedQueryState,\n    UserPreferencesState,\n);\n\npub type WorkspaceContextEvent = Sum5\u003c\n    WorkspaceEvent,\n    WorkspacePreferencesEvent,\n    DashboardEvent,\n    SavedQueryEvent,\n    UserPreferencesEvent,\n\u003e;\n\npub fn workspace_context_decider\u003c'a\u003e() -\u003e WorkspaceContextDecider\u003c'a\u003e {\n    combine5(\n        workspace_decider(),\n        workspace_preferences_decider(),\n        dashboard_decider(),\n        saved_query_decider(),\n        user_preferences_decider(),\n    )\n}\n```\n\n## Recommendation\n\nStart with **Option A** (separate aggregates, separate routes). The combine5 composition is demonstrated in the Idris2 spec to prove mathematical correctness, but production systems typically manage aggregates independently for simpler routing and clearer boundaries.\n\nIf cross-aggregate transactions become necessary, revisit this task to implement Option B.\n\n## Acceptance criteria\n\n- [ ] Decision documented: Option A (separate) vs Option B (combined)\n- [ ] If Option B: Sum5 type aliases defined\n- [ ] If Option B: workspace_context_decider() factory implemented\n- [ ] If Option B: Tests verify command routing to correct sub-decider\n\n## References\n\n- spec/Workspace/Workspace.idr (combine5 formal specification)\n- fmodel-rust combine3/combine5 documentation","status":"open","priority":2,"issue_type":"task","owner":"cameron.ray.smith@gmail.com","created_at":"2026-01-16T19:13:52.81146-05:00","created_by":"Cameron Smith","updated_at":"2026-01-18T12:23:37.330891-05:00","dependencies":[{"issue_id":"ironstar-7a2.7","depends_on_id":"ironstar-7a2","type":"parent-child","created_at":"2026-01-16T19:14:17.566092-05:00","created_by":"Cameron Smith"},{"issue_id":"ironstar-7a2.7","depends_on_id":"ironstar-7a2.2","type":"blocks","created_at":"2026-01-16T19:14:55.847258-05:00","created_by":"Cameron Smith"},{"issue_id":"ironstar-7a2.7","depends_on_id":"ironstar-7a2.3","type":"blocks","created_at":"2026-01-16T19:14:57.016975-05:00","created_by":"Cameron Smith"},{"issue_id":"ironstar-7a2.7","depends_on_id":"ironstar-7a2.4","type":"blocks","created_at":"2026-01-16T19:14:57.718899-05:00","created_by":"Cameron Smith"},{"issue_id":"ironstar-7a2.7","depends_on_id":"ironstar-7a2.5","type":"blocks","created_at":"2026-01-16T19:14:58.80648-05:00","created_by":"Cameron Smith"},{"issue_id":"ironstar-7a2.7","depends_on_id":"ironstar-7a2.6","type":"blocks","created_at":"2026-01-16T19:14:59.704598-05:00","created_by":"Cameron Smith"}]}
{"id":"ironstar-7a2.8","title":"Wire Workspace EventSourcedAggregate to SQLite","description":"Wire Workspace Deciders to SQLite event store (following a9b.7 pattern)","status":"open","priority":2,"issue_type":"task","owner":"cameron.ray.smith@gmail.com","created_at":"2026-01-18T12:26:47.997174-05:00","created_by":"Cameron Smith","updated_at":"2026-01-18T12:26:47.997174-05:00","dependencies":[{"issue_id":"ironstar-7a2.8","depends_on_id":"ironstar-7a2","type":"parent-child","created_at":"2026-01-18T12:26:47.997844-05:00","created_by":"Cameron Smith"},{"issue_id":"ironstar-7a2.8","depends_on_id":"ironstar-7a2.2","type":"blocks","created_at":"2026-01-18T12:27:52.251923-05:00","created_by":"Cameron Smith"},{"issue_id":"ironstar-7a2.8","depends_on_id":"ironstar-7a2.3","type":"blocks","created_at":"2026-01-18T12:27:52.426642-05:00","created_by":"Cameron Smith"},{"issue_id":"ironstar-7a2.8","depends_on_id":"ironstar-7a2.4","type":"blocks","created_at":"2026-01-18T12:27:52.587063-05:00","created_by":"Cameron Smith"},{"issue_id":"ironstar-7a2.8","depends_on_id":"ironstar-7a2.5","type":"blocks","created_at":"2026-01-18T12:27:52.755779-05:00","created_by":"Cameron Smith"},{"issue_id":"ironstar-7a2.8","depends_on_id":"ironstar-7a2.6","type":"blocks","created_at":"2026-01-18T12:27:52.916409-05:00","created_by":"Cameron Smith"}]}
{"id":"ironstar-7a2.9","title":"Wire Workspace MaterializedView projections","description":"Implement MaterializedView projections for Workspace bounded context read models following ironstar-a9b.8 pattern.\n\n## Views to implement\n\n1. **WorkspaceListView**: List of workspaces for a user\n2. **DashboardLayoutView**: Full dashboard state for rendering\n3. **SavedQueryListView**: List of saved queries in a workspace\n4. **UserPreferencesView**: Current user preferences\n\n## Location\n\n`crates/ironstar/src/domain/views/workspace.rs`\n\n## Acceptance criteria\n\n- [ ] WorkspaceListView with user filtering\n- [ ] DashboardLayoutView with full tab/chart state\n- [ ] SavedQueryListView with workspace filtering\n- [ ] UserPreferencesView singleton per user\n- [ ] All views preserve invariants on edge cases\n\n## References\n\n- ironstar-a9b.8 task description\n- crates/ironstar/src/domain/views/todo.rs (reference implementation)","status":"open","priority":2,"issue_type":"task","owner":"cameron.ray.smith@gmail.com","created_at":"2026-01-18T12:27:06.93844-05:00","created_by":"Cameron Smith","updated_at":"2026-01-18T12:27:06.93844-05:00","dependencies":[{"issue_id":"ironstar-7a2.9","depends_on_id":"ironstar-7a2","type":"parent-child","created_at":"2026-01-18T12:27:06.939308-05:00","created_by":"Cameron Smith"},{"issue_id":"ironstar-7a2.9","depends_on_id":"ironstar-7a2.2","type":"blocks","created_at":"2026-01-18T12:27:53.551372-05:00","created_by":"Cameron Smith"},{"issue_id":"ironstar-7a2.9","depends_on_id":"ironstar-7a2.3","type":"blocks","created_at":"2026-01-18T12:27:53.709997-05:00","created_by":"Cameron Smith"},{"issue_id":"ironstar-7a2.9","depends_on_id":"ironstar-7a2.4","type":"blocks","created_at":"2026-01-18T12:27:53.873796-05:00","created_by":"Cameron Smith"},{"issue_id":"ironstar-7a2.9","depends_on_id":"ironstar-7a2.5","type":"blocks","created_at":"2026-01-18T12:27:54.03404-05:00","created_by":"Cameron Smith"},{"issue_id":"ironstar-7a2.9","depends_on_id":"ironstar-7a2.6","type":"blocks","created_at":"2026-01-18T12:27:54.192768-05:00","created_by":"Cameron Smith"}]}
{"id":"ironstar-89k","title":"Integrate analytics cache with dashboard SSE streams","description":"Create separate analytics_bus broadcast channel distinct from main event bus. Wire cache refresh to SSE patch updates for dashboards. Implement multi-dashboard concurrent cache access. Reference: analytics-cache-patterns.md SSE/Datastar integration section.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-24T00:43:30.813174-05:00","updated_at":"2025-12-24T00:43:30.813174-05:00","dependencies":[{"issue_id":"ironstar-89k","depends_on_id":"ironstar-3gd","type":"parent-child","created_at":"2025-12-24T00:43:34.488504-05:00","created_by":"daemon"},{"issue_id":"ironstar-89k","depends_on_id":"ironstar-nyp.12","type":"blocks","created_at":"2025-12-24T00:56:22.115429-05:00","created_by":"daemon"}]}
{"id":"ironstar-961","title":"Implement DuckDB connection lifecycle management","description":"Configure async-duckdb::PoolBuilder with database path and connection count (recommend 4 connections). Initialize Pool at application startup in main.rs, store in AppState. Pool manages connection lifecycle automatically - connections are checked out via .conn() and returned when closure completes. Ensure Cargo.toml uses async-duckdb with bundled feature to avoid system DuckDB version mismatches. Do NOT use spawn_blocking - async-duckdb provides native async API.\n\nSee docs/notes/architecture/cqrs/projection-patterns.md for Pool initialization patterns.\n\nLocal refs: ~/projects/rust-workspace/async-duckdb","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-24T00:43:13.604768-05:00","updated_at":"2025-12-27T12:50:39.064606-05:00","dependencies":[{"issue_id":"ironstar-961","depends_on_id":"ironstar-3gd","type":"parent-child","created_at":"2025-12-24T00:43:20.652714-05:00","created_by":"daemon"},{"issue_id":"ironstar-961","depends_on_id":"ironstar-3gd","type":"child","created_at":"2025-12-27T14:19:41.516201-05:00","created_by":"daemon"}]}
{"id":"ironstar-9b1","title":"Implement httpfs extension configuration for DuckDB","description":"Configure DuckDB with httpfs extension enabled. Add HuggingFace (hf://) and S3 (s3://) protocol support. Create configuration patterns for HuggingFace authentication tokens. Reference: ~/projects/rust-workspace/rust-duckdb-huggingface-ducklake-query","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-24T00:43:05.539686-05:00","updated_at":"2025-12-27T12:50:39.762995-05:00","dependencies":[{"issue_id":"ironstar-9b1","depends_on_id":"ironstar-3gd","type":"parent-child","created_at":"2025-12-24T00:43:11.851108-05:00","created_by":"daemon"},{"issue_id":"ironstar-9b1","depends_on_id":"ironstar-3gd","type":"child","created_at":"2025-12-27T14:19:43.570231-05:00","created_by":"daemon"}]}
{"id":"ironstar-9dh","title":"Reference: Bounded context patterns","description":"Ironstar v1 operates as single bounded context with implicit internal boundaries (Session, Todo, Analytics). ACL patterns documented for future decomposition. See docs/notes/architecture/core/bounded-contexts.md.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T18:44:06.868118-05:00","created_by":"crs58","updated_at":"2026-01-03T18:44:06.868118-05:00"}
{"id":"ironstar-9oj","title":"Implement cache invalidation for analytics queries","description":"Implement cache invalidation via Zenoh subscription. Subscribe to aggregate-type key expressions and invalidate corresponding cache entries. See docs/notes/architecture/infrastructure/analytics-cache-architecture.md Pattern 4.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-24T00:43:21.520198-05:00","updated_at":"2025-12-26T15:52:59.643978-05:00","closed_at":"2025-12-26T15:52:59.643978-05:00","close_reason":"Duplicate of ironstar-3gd.2. Both describe Zenoh-based cache invalidation (Pattern 4 from analytics-cache-patterns.md). Consolidating to single issue under Scientific Data Integration epic.","dependencies":[{"issue_id":"ironstar-9oj","depends_on_id":"ironstar-3gd","type":"parent-child","created_at":"2025-12-24T00:43:28.776896-05:00","created_by":"daemon"},{"issue_id":"ironstar-9oj","depends_on_id":"ironstar-nyp.12","type":"blocks","created_at":"2025-12-24T00:56:23.380869-05:00","created_by":"daemon"}]}
{"id":"ironstar-a15","title":"Act 2: Expand solution stack slides","description":"Flesh out slides 9-14. Add speaker notes. Consider: DuckLake metadata schema visualization, httpfs query flow diagram, concrete hf:// query examples with real datasets.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T01:16:52.061556-05:00","updated_at":"2025-12-26T20:51:42.244031-05:00","dependencies":[{"issue_id":"ironstar-a15","depends_on_id":"ironstar-0tk","type":"parent-child","created_at":"2025-12-19T01:17:25.111427-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-a15","depends_on_id":"ironstar-edx","type":"blocks","created_at":"2025-12-19T01:17:35.038047-05:00","created_by":"daemon","metadata":"{}"}],"deleted_at":"2025-12-26T20:51:42.244031-05:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"ironstar-a1s","title":"Verify catamorphism uniqueness with property-based tests","description":"Verify catamorphism uniqueness from initiality using property-based tests (proptest crate).\n\nProperties to verify:\n1. Determinism: fold_events([e1, e2, ...]) always produces identical state\n2. Batching invariance: fold_events([e1, e2]) = apply(apply(S0, e1), e2)\n3. Replay idempotence: replaying same events produces same state\n\nReference: semantic-model.md § State reconstruction as catamorphism","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-30T21:59:17.170615-05:00","created_by":"crs58","updated_at":"2026-01-05T12:22:41.226113-05:00","dependencies":[{"issue_id":"ironstar-a1s","depends_on_id":"ironstar-zuv","type":"subtask","created_at":"2025-12-30T21:59:36.075774-05:00","created_by":"daemon"}]}
{"id":"ironstar-a9b","title":"Implement fmodel-rust event sourcing foundation","description":"Implement fmodel-rust as ironstar's event sourcing foundation, replacing the custom Aggregate trait pattern.\n\n## Principled decisions\n\nThree design decisions govern the fmodel-rust integration:\n\n1. **Error handling (hybrid approach)**: `Err(ValidationError)` for precondition violations that prevent command processing; `Ok(vec![FailureEvent])` for domain rejections that should be recorded in the event stream for auditability.\n\n2. **Timestamp injection**: Application layer generates timestamps via `CommandContext`, passed into `decide()`. NO `Utc::now()` calls inside decide functions — preserves referential transparency and testability.\n\n3. **Aggregate trait deprecation**: Immediate removal after rewrite. NO backward compatibility layer, NO feature flags, NO dual implementation period.\n\n## Approach: rewrite from Idris specs\n\nThis is a **rewrite**, not a migration. Source of truth is the Idris specifications:\n- `spec/Todo/Todo.idr` for Todo domain\n- `spec/Analytics/QuerySession.idr` for QuerySession domain\n\nDelete old aggregate implementations entirely; create fresh Decider implementations aligned with fmodel-rust patterns.\n\n## Files to DELETE\n\n- `crates/ironstar/src/domain/aggregate.rs` — custom Aggregate trait, AggregateRoot wrapper\n- `crates/ironstar/src/domain/todo/aggregate.rs` — TodoAggregate implementation\n- `crates/ironstar/src/domain/query_session/aggregate.rs` — QuerySessionAggregate implementation\n\n## Files to CREATE\n\n- `crates/ironstar/src/domain/todo/decider.rs` — todo_decider() factory function\n- `crates/ironstar/src/domain/query_session/decider.rs` — query_session_decider() factory function\n- `crates/ironstar/src/domain/context.rs` — CommandContext struct for timestamp/correlation injection\n\n## References\n\n- Idris specs: spec/Todo/Todo.idr, spec/Analytics/QuerySession.idr\n- Evaluation: docs/notes/architecture/decisions/fmodel-rust-adoption-evaluation.md\n","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-05T10:17:53.522914-05:00","created_by":"crs58","updated_at":"2026-01-18T23:14:14.615655-05:00","closed_at":"2026-01-18T23:14:14.615655-05:00","close_reason":"fmodel-rust foundation complete: Todo + QuerySession Deciders, Views, EventSourcedAggregate wiring, Zenoh event bus, HTTP handlers. Patterns validated and ready for replication in 507/7a2.","dependencies":[{"issue_id":"ironstar-a9b","depends_on_id":"ironstar-2it","type":"informs","created_at":"2026-01-06T13:19:43.806452-05:00","created_by":"crs58"}]}
{"id":"ironstar-a9b.1","title":"Implement SQLite EventRepository","description":"Implement fmodel-rust's EventRepository\u003cC, E, Version, Error\u003e trait for SQLite.\n\n## Implementation\n\nReference: fmodel-rust-postgres (~/projects/rust-workspace/fmodel-rust-postgres/)\n\n```rust\nimpl\u003cC, E\u003e EventRepository\u003cC, E, Uuid, InfrastructureError\u003e for SqliteEventRepository\nwhere\n    C: Identifier + DeciderType + Sync,\n    E: Identifier + EventType + DeciderType + IsFinal + Serialize + DeserializeOwned + Clone + Sync,\n{\n    async fn fetch_events(\u0026self, command: \u0026C) -\u003e Result\u003cVec\u003c(E, Uuid)\u003e, InfrastructureError\u003e;\n    async fn save(\u0026self, events: \u0026[E]) -\u003e Result\u003cVec\u003c(E, Uuid)\u003e, InfrastructureError\u003e;\n    async fn version_provider(\u0026self, event: \u0026E) -\u003e Result\u003cOption\u003cUuid\u003e, InfrastructureError\u003e;\n}\n```\n\n## Extension Methods (beyond fmodel-rust trait)\n\n```rust\nimpl SqliteEventRepository {\n    /// Query all events (for projection rebuild on startup)\n    pub async fn query_all(\u0026self) -\u003e Result\u003cVec\u003cStoredEvent\u003e, InfrastructureError\u003e;\n    \n    /// Query events since a global sequence (for SSE Last-Event-ID reconnection)\n    pub async fn query_since_sequence(\u0026self, since: i64) -\u003e Result\u003cVec\u003cStoredEvent\u003e, InfrastructureError\u003e;\n    \n    /// Get earliest global sequence (for stream bounds)\n    pub async fn earliest_sequence(\u0026self) -\u003e Result\u003cOption\u003ci64\u003e, InfrastructureError\u003e;\n    \n    /// Get latest global sequence (for SSE initial state)\n    pub async fn latest_sequence(\u0026self) -\u003e Result\u003cOption\u003ci64\u003e, InfrastructureError\u003e;\n}\n```\n\n## Schema\n\nUse schema from evaluation doc with previous_id for optimistic locking.\n\n## Acceptance Criteria\n\n- [ ] Implements all 3 EventRepository trait methods\n- [ ] Uses previous_id UNIQUE constraint for optimistic locking\n- [ ] Global offset column for SSE Last-Event-ID support\n- [ ] Triggers prevent delete/update on events table\n- [ ] Extension methods for projection rebuild and SSE reconnection","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-05T10:18:12.769671-05:00","created_by":"crs58","updated_at":"2026-01-17T23:38:28.108297-05:00","closed_at":"2026-01-17T23:38:28.108297-05:00","close_reason":"Implemented in 2b8895c. Schema in migrations/001_events.sql, repository in src/infrastructure/event_store.rs.","dependencies":[{"issue_id":"ironstar-a9b.1","depends_on_id":"ironstar-a9b","type":"parent-child","created_at":"2026-01-05T10:18:12.77254-05:00","created_by":"crs58"},{"issue_id":"ironstar-a9b.1","depends_on_id":"ironstar-a9b.3","type":"blocks","created_at":"2026-01-05T10:19:45.848679-05:00","created_by":"crs58"},{"issue_id":"ironstar-a9b.1","depends_on_id":"ironstar-a9b.2","type":"blocks","created_at":"2026-01-05T10:19:48.19251-05:00","created_by":"crs58"}]}
{"id":"ironstar-a9b.10","title":"Implement Todo command handler","description":"Implement Axum HTTP handler for Todo commands.\n\n## Implementation\n\n```rust\npub async fn handle_todo_command(\n    State(state): State\u003cArc\u003cAppState\u003e\u003e,\n    Json(command): Json\u003cTodoCommand\u003e,\n) -\u003e Result\u003cimpl IntoResponse, AppError\u003e {\n    let events = handle_todo_command(\n        state.event_repository.clone(),\n        state.event_bus.clone(),\n        command,\n    ).await?;\n    \n    Ok((StatusCode::ACCEPTED, Json(events)))\n}\n```\n\n## Routes\n\n- POST /api/todos - create todo\n- POST /api/todos/:id/complete - complete todo\n- DELETE /api/todos/:id - delete todo\n\n## Acceptance Criteria\n\n- [ ] Axum handler receives TodoCommand\n- [ ] Calls application layer handle_todo_command\n- [ ] Returns 202 Accepted (SSE delivers updates)\n- [ ] Error conversion from CommandError to AppError","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T10:19:22.206046-05:00","created_by":"crs58","updated_at":"2026-01-18T21:53:03.561222-05:00","closed_at":"2026-01-18T21:53:03.561222-05:00","close_reason":"HTTP command handlers: POST /api/todos, POST /api/todos/:id/complete, DELETE /api/todos/:id. All 202 Accepted. Commits: 6290361..80fe00d","dependencies":[{"issue_id":"ironstar-a9b.10","depends_on_id":"ironstar-a9b","type":"parent-child","created_at":"2026-01-05T10:19:22.208363-05:00","created_by":"crs58"},{"issue_id":"ironstar-a9b.10","depends_on_id":"ironstar-a9b.7","type":"blocks","created_at":"2026-01-05T10:19:54.931441-05:00","created_by":"crs58"},{"issue_id":"ironstar-a9b.10","depends_on_id":"ironstar-a9b.9","type":"blocks","created_at":"2026-01-05T10:19:56.298385-05:00","created_by":"crs58"}]}
{"id":"ironstar-a9b.11","title":"Implement Todo query handler","description":"Implement Axum HTTP handler for Todo queries.\n\n## Implementation\n\n```rust\npub async fn get_todos(\n    State(state): State\u003cArc\u003cAppState\u003e\u003e,\n) -\u003e Result\u003cimpl IntoResponse, AppError\u003e {\n    let view_state = state.todo_view.current_state().await?;\n    Ok(Json(view_state))\n}\n```\n\n## Routes\n\n- GET /api/todos - list all todos\n- GET /api/todos/:id - get single todo\n\n## SSE Alternative\n\nFor real-time updates, serve via datastar SSE:\n- GET /api/todos/sse - stream todo list updates\n\n## Acceptance Criteria\n\n- [ ] Query handler reads from MaterializedView\n- [ ] Returns current projection state\n- [ ] SSE endpoint streams updates","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T10:19:23.695264-05:00","created_by":"crs58","updated_at":"2026-01-18T21:37:18.185581-05:00","closed_at":"2026-01-18T21:37:18.185581-05:00","close_reason":"HTTP handlers implemented: GET /api/todos (list all via query_all_todos), GET /api/todos/:id (single/404). Commits: 244acba, cf5eb27, 85d59a8. SSE deferred to a9b.9.","dependencies":[{"issue_id":"ironstar-a9b.11","depends_on_id":"ironstar-a9b","type":"parent-child","created_at":"2026-01-05T10:19:23.697445-05:00","created_by":"crs58"},{"issue_id":"ironstar-a9b.11","depends_on_id":"ironstar-a9b.8","type":"blocks","created_at":"2026-01-05T10:19:57.182285-05:00","created_by":"crs58"}]}
{"id":"ironstar-a9b.12","title":"Implement Decider specification tests","description":"Implement tests for Todo and QuerySession Deciders using DeciderTestSpecification.\n\n## Implementation\n\n```rust\n#[test]\nfn test_create_todo() {\n    DeciderTestSpecification::default()\n        .for_decider(todo_decider())\n        .given(vec![])\n        .when(TodoCommand::Create { id: id.clone(), text: text.clone() })\n        .then(vec![TodoEvent::Created { id, text, created_at: /* ... */ }]);\n}\n\n#[test]\nfn test_create_existing_todo_emits_failure() {\n    DeciderTestSpecification::default()\n        .for_decider(todo_decider())\n        .given(vec![TodoEvent::Created { ... }])\n        .when(TodoCommand::Create { ... })\n        .then(vec![TodoEvent::NotCreated { reason: \"...\" }]);\n}\n```\n\n## Test Scenarios\n\n### Todo Decider\n- Create new todo\n- Create existing todo (failure event)\n- Complete active todo\n- Complete non-existent todo (failure event)\n- Delete todo\n\n### QuerySession Decider\n- Start query with valid SQL\n- Start query with invalid SQL (validation error)\n- Cancel running query\n\n## Acceptance Criteria\n\n- [ ] All happy paths tested\n- [ ] All failure event paths tested\n- [ ] No I/O in tests (pure Decider testing)\n- [ ] Tests in crates/ironstar-domain/tests/","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-05T10:19:25.260057-05:00","created_by":"crs58","updated_at":"2026-01-18T21:29:27.503417-05:00","closed_at":"2026-01-18T21:29:27.503417-05:00","close_reason":"Tests already implemented as inline #[cfg(test)] modules. 50 tests pass covering all happy paths and failure events. Minor fix: 1dca810","dependencies":[{"issue_id":"ironstar-a9b.12","depends_on_id":"ironstar-a9b","type":"parent-child","created_at":"2026-01-05T10:19:25.262186-05:00","created_by":"crs58"},{"issue_id":"ironstar-a9b.12","depends_on_id":"ironstar-a9b.4","type":"blocks","created_at":"2026-01-05T10:19:57.965067-05:00","created_by":"crs58"}]}
{"id":"ironstar-a9b.13","title":"Implement View specification tests","description":"Implement tests for Todo View projection logic.\n\n## Implementation\n\nTest the View's evolve function with various event sequences:\n\n```rust\n#[test]\nfn test_todo_view_projection() {\n    let view = todo_view();\n    let initial = (view.initial_state)();\n    \n    let state = (view.evolve)(\u0026initial, \u0026TodoEvent::Created { ... });\n    assert_eq!(state.todos.len(), 1);\n    \n    let state = (view.evolve)(\u0026state, \u0026TodoEvent::Completed { ... });\n    assert_eq!(state.completed_count, 1);\n}\n```\n\n## Test Scenarios\n\n- Empty state → Created → 1 todo\n- Multiple creates → correct count\n- Create → Complete → completed_count increments\n- Create → Delete → todo removed\n\n## Acceptance Criteria\n\n- [ ] All event types tested for correct projection\n- [ ] State accumulation tested with multiple events\n- [ ] Tests in crates/ironstar-domain/tests/","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T10:19:26.73095-05:00","created_by":"crs58","updated_at":"2026-01-18T21:30:35.382461-05:00","closed_at":"2026-01-18T21:30:35.382461-05:00","close_reason":"Tests already implemented inline in crates/ironstar/src/domain/views/todo.rs (lines 182-582). 17 tests covering all 5 event types, state accumulation, and edge cases.","dependencies":[{"issue_id":"ironstar-a9b.13","depends_on_id":"ironstar-a9b","type":"parent-child","created_at":"2026-01-05T10:19:26.73484-05:00","created_by":"crs58"},{"issue_id":"ironstar-a9b.13","depends_on_id":"ironstar-a9b.5","type":"blocks","created_at":"2026-01-05T10:19:58.972046-05:00","created_by":"crs58"}]}
{"id":"ironstar-a9b.14","title":"Document CommandPipelineError in architecture docs","description":"Document the CommandPipelineError type introduced for fmodel-rust EventSourcedAggregate type unification.\n\n## Context\n\nfmodel-rust's EventSourcedAggregate requires Repository and Decider to share the same Error type parameter. This necessitates a unified error type at the application layer that can represent both domain errors (from Decider) and infrastructure errors (from Repository).\n\nCommandPipelineError is the solution — a new application-layer type that:\n- Wraps DomainError for Decider failures\n- Wraps InfrastructureError for Repository failures\n- Enables fmodel-rust's `Decider::map_error()` pattern\n\n## Files to update\n\n### 1. error-handling-decisions.md\n\nUpdate the error flow diagram (lines 68-74):\n```\nValidationError ──┐\n                  ├──\u003e AggregateError ──┐\nDomainError ──────┘                     │\n                                        ├──\u003e AppError ──\u003e HTTP Response\nTodoError ──┐                           │\n            ├──\u003e CommandPipelineError ──┘\nInfraErr ───┘\n```\n\nAdd new section explaining:\n- Why CommandPipelineError exists (fmodel-rust type constraint)\n- How it differs from AggregateError (I/O boundary vs pure aggregation)\n- The `map_error` pattern for Decider error transformation\n\n### 2. error-types.md\n\nAdd CommandPipelineError definition:\n```rust\npub enum CommandPipelineError {\n    Domain(DomainError),\n    Infrastructure(InfrastructureError),\n}\n```\n\nDocument From implementations and conversion patterns.\n\n### 3. command-write-patterns.md\n\nUpdate Decider pattern integration (lines 230-353) to show:\n- `Decider::map_error()` usage\n- Repository adapter pattern for error unification\n- Complete EventSourcedAggregate wiring example\n\n## Acceptance criteria\n\n- [ ] error-handling-decisions.md updated with CommandPipelineError flow\n- [ ] error-types.md updated with type definition\n- [ ] command-write-patterns.md updated with map_error pattern\n- [ ] All diagrams consistent with implementation","status":"open","priority":2,"issue_type":"task","owner":"cameron.ray.smith@gmail.com","created_at":"2026-01-18T14:56:59.654771-05:00","created_by":"Cameron Smith","updated_at":"2026-01-18T22:00:24.527991-05:00","dependencies":[{"issue_id":"ironstar-a9b.14","depends_on_id":"ironstar-a9b.7","type":"blocks","created_at":"2026-01-18T14:57:16.243365-05:00","created_by":"Cameron Smith"}],"comments":[{"id":10,"issue_id":"ironstar-a9b.14","author":"Cameron Smith","text":"Deferred: core a9b patterns complete. Document when 507/7a2 reveal whether CommandPipelineError pattern generalizes or needs revision.","created_at":"2026-01-19T03:00:26Z"}]}
{"id":"ironstar-a9b.2","title":"Implement fmodel-rust identifier traits","description":"Implement the marker traits required by fmodel-rust's EventRepository bounds.\n\n## Strategic context\n\nThis is the entry point for the fmodel-rust adoption. Completing this enables:\n- a9b.4 (Todo Decider) + a9b.6 (QuerySession Decider) — REWRITE existing aggregates\n- a9b.6 unblocks 2nt.16 (analytics workflow) — closes Domain layer epic at 100%\n\n**See `bd show ironstar-a9b` for principled decisions** (error handling, timestamps, deprecation strategy).\n\n## Traits required\n\n```rust\npub trait Identifier { fn identifier(\u0026self) -\u003e String; }\npub trait EventType { fn event_type(\u0026self) -\u003e String; }\npub trait DeciderType { fn decider_type(\u0026self) -\u003e String; }\npub trait IsFinal { fn is_final(\u0026self) -\u003e bool; }\n```\n\n## Location\n\n`crates/ironstar/src/domain/common/traits.rs` — re-exported via domain module\n\n## Acceptance criteria\n\n- [ ] All 4 traits defined in domain layer\n- [ ] TodoCommand implements Identifier + DeciderType\n- [ ] TodoEvent implements Identifier + EventType + DeciderType + IsFinal\n- [ ] QueryCommand implements Identifier + DeciderType\n- [ ] QueryEvent implements Identifier + EventType + DeciderType + IsFinal\n- [ ] Traits re-exported from domain module","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-05T10:18:13.62135-05:00","created_by":"crs58","updated_at":"2026-01-17T21:09:40.067518-05:00","closed_at":"2026-01-17T21:09:40.067518-05:00","close_reason":"Implemented in 90e2a87. All 4 traits defined, implementations for Todo and QuerySession types, 191 tests passing.","dependencies":[{"issue_id":"ironstar-a9b.2","depends_on_id":"ironstar-a9b","type":"parent-child","created_at":"2026-01-05T10:18:13.62382-05:00","created_by":"crs58"}]}
{"id":"ironstar-a9b.3","title":"Create event store SQLite schema","description":"Create SQLite schema adapted from fmodel-rust-postgres for event store.\n\n## Schema\n\n```sql\nCREATE TABLE deciders (\n    decider TEXT NOT NULL,\n    event TEXT NOT NULL,\n    PRIMARY KEY (decider, event)\n) STRICT;\n\nCREATE TABLE events (\n    event TEXT NOT NULL,\n    event_id TEXT NOT NULL UNIQUE CHECK(length(event_id) = 36),\n    decider TEXT NOT NULL,\n    decider_id TEXT NOT NULL,\n    data TEXT NOT NULL CHECK(json_valid(data)),\n    command_id TEXT,\n    previous_id TEXT UNIQUE REFERENCES events(event_id),\n    final INTEGER NOT NULL DEFAULT 0,\n    created_at TEXT NOT NULL DEFAULT(datetime('now', 'utc')),\n    offset INTEGER PRIMARY KEY AUTOINCREMENT,\n    FOREIGN KEY (decider, event) REFERENCES deciders (decider, event)\n) STRICT;\n\nCREATE INDEX idx_events_decider ON events (decider_id, offset);\n```\n\nPlus triggers for immutability and stream integrity.\n\n## Acceptance Criteria\n\n- [ ] Schema in migrations/001_events.sql\n- [ ] Triggers prevent DELETE/UPDATE on events\n- [ ] Triggers validate previous_id chain integrity\n- [ ] sqlx migration runs successfully","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-05T10:18:15.011154-05:00","created_by":"crs58","updated_at":"2026-01-15T00:33:42.581159-05:00","closed_at":"2026-01-15T00:33:42.581159-05:00","close_reason":"Implemented in d2bdde2. Schema validated with trigger tests.","dependencies":[{"issue_id":"ironstar-a9b.3","depends_on_id":"ironstar-a9b","type":"parent-child","created_at":"2026-01-05T10:18:15.013826-05:00","created_by":"crs58"}]}
{"id":"ironstar-a9b.4","title":"Implement Todo Decider","description":"REWRITE Todo domain using fmodel-rust Decider pattern. Source of truth: `spec/Todo/Todo.idr`\n\n## Files to DELETE (no preservation, no backward compatibility)\n\n- `crates/ironstar/src/domain/todo/aggregate.rs`\n\n## Files to CREATE\n\n- `crates/ironstar/src/domain/todo/decider.rs` — todo_decider() factory function\n\n## Principled decisions\n\n1. **Error handling**: Err(AggregateError) for preconditions; Ok(vec![]) for idempotent no-ops\n2. **Timestamp injection**: CommandContext parameter, not Utc::now()\n3. **No backward compatibility**: Delete aggregate.rs entirely\n\n## State model (from Idris spec)\n\n- NonExistent → Active ↔ Completed → Deleted (terminal)\n\n## Acceptance criteria\n\n- [ ] DELETE crates/ironstar/src/domain/todo/aggregate.rs\n- [ ] CREATE crates/ironstar/src/domain/todo/decider.rs\n- [ ] Pure decide/evolve (no async, no I/O, no Utc::now())\n- [ ] Timestamps via CommandContext\n- [ ] Idempotent ops return Ok(vec![])\n- [ ] DeciderTestSpecification tests for all transitions\n","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-05T10:18:34.200551-05:00","created_by":"crs58","updated_at":"2026-01-17T21:46:23.637148-05:00","closed_at":"2026-01-17T21:46:23.637148-05:00","close_reason":"Implemented in 1a9cd42. Pure decider pattern with 21 new tests, aggregate.rs deleted.","dependencies":[{"issue_id":"ironstar-a9b.4","depends_on_id":"ironstar-a9b","type":"parent-child","created_at":"2026-01-05T10:18:34.203265-05:00","created_by":"crs58"},{"issue_id":"ironstar-a9b.4","depends_on_id":"ironstar-a9b.2","type":"blocks","created_at":"2026-01-05T10:19:49.026987-05:00","created_by":"crs58"},{"issue_id":"ironstar-a9b.4","depends_on_id":"ironstar-b43","type":"blocked-by","created_at":"2026-01-05T10:42:37.656075-05:00","created_by":"crs58"}]}
{"id":"ironstar-a9b.5","title":"Implement Todo View","description":"Implement Todo read model using fmodel-rust's View pattern.\n\n## Implementation\n\n```rust\npub fn todo_view\u003c'a\u003e() -\u003e View\u003c'a, TodoViewState, TodoEvent\u003e {\n    View {\n        evolve: Box::new(|state, event| { /* projection logic */ }),\n        initial_state: Box::new(|| TodoViewState::default()),\n    }\n}\n```\n\n## View State\n\nTodoViewState for list queries:\n- todos: Vec\u003cTodoItem\u003e (id, text, completed, created_at)\n- count: usize\n- completed_count: usize\n\n## Acceptance Criteria\n\n- [ ] View function factory in ironstar-domain/src/views/todo.rs\n- [ ] Pure evolve function\n- [ ] Materializes into queryable projection state","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T10:18:35.339871-05:00","created_by":"crs58","updated_at":"2026-01-18T00:44:48.057473-05:00","closed_at":"2026-01-18T00:44:48.057473-05:00","close_reason":"Implemented in 090512f..6b0e877. TodoViewState with Vec\u003cTodoItemView\u003e, count, completed_count. Pure evolve handles all 5 event variants. 14 tests.","dependencies":[{"issue_id":"ironstar-a9b.5","depends_on_id":"ironstar-a9b","type":"parent-child","created_at":"2026-01-05T10:18:35.342307-05:00","created_by":"crs58"},{"issue_id":"ironstar-a9b.5","depends_on_id":"ironstar-a9b.4","type":"blocks","created_at":"2026-01-05T10:19:49.824838-05:00","created_by":"crs58"}]}
{"id":"ironstar-a9b.6","title":"Implement QuerySession Decider","description":"REWRITE QuerySession domain using fmodel-rust Decider pattern. Source of truth: `spec/Analytics/QuerySession.idr`\n\n## Files to DELETE (no preservation, no backward compatibility)\n\n- `crates/ironstar/src/domain/query_session/aggregate.rs`\n\n## Files to CREATE\n\n- `crates/ironstar/src/domain/query_session/decider.rs` — query_session_decider() factory function\n\n## Principled decisions\n\n1. **Error handling**: Err(AggregateError) when query already running\n2. **Timestamp injection**: CommandContext parameter, not Utc::now()\n3. **No backward compatibility**: Delete aggregate.rs entirely\n\n## State model (from Idris spec)\n\n- Idle → Running → (Completed | Failed), or Cancelled → Idle\n\n## Key pattern: spawn-after-persist\n\nDecider is purely synchronous. DuckDB execution happens in application layer after events are persisted.\n\n## Acceptance criteria\n\n- [ ] DELETE crates/ironstar/src/domain/query_session/aggregate.rs\n- [ ] CREATE crates/ironstar/src/domain/query_session/decider.rs\n- [ ] Pure decide/evolve (no async, no I/O)\n- [ ] Timestamps via CommandContext\n- [ ] DeciderTestSpecification tests for all transitions\n","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T10:18:36.94901-05:00","created_by":"crs58","updated_at":"2026-01-17T21:54:40.226085-05:00","closed_at":"2026-01-17T21:54:40.226085-05:00","close_reason":"Implemented in 30aa83e. Pure decider pattern with 30 tests, aggregate.rs deleted.","dependencies":[{"issue_id":"ironstar-a9b.6","depends_on_id":"ironstar-a9b","type":"parent-child","created_at":"2026-01-05T10:18:36.951748-05:00","created_by":"crs58"},{"issue_id":"ironstar-a9b.6","depends_on_id":"ironstar-b43","type":"blocked-by","created_at":"2026-01-05T10:42:39.117759-05:00","created_by":"crs58"},{"issue_id":"ironstar-a9b.6","depends_on_id":"ironstar-a9b.2","type":"blocked-by","created_at":"2026-01-05T10:42:40.056642-05:00","created_by":"crs58"}]}
{"id":"ironstar-a9b.7","title":"Wire Todo EventSourcedAggregate","description":"Wire Todo Decider with EventRepository using fmodel-rust's EventSourcedAggregate.\n\n## Type unification constraint\n\nfmodel-rust's EventSourcedAggregate requires Repository and Decider to share the same Error type parameter:\n\n```rust\npub struct EventSourcedAggregate\u003cC, S, E, Repository, Decider, Version, Error\u003e\nwhere\n    Repository: EventRepository\u003cC, E, Version, Error\u003e,\n    Decider: EventComputation\u003cC, S, E, Error\u003e,  // Same Error\n```\n\nThis requires a unified error type: `CommandPipelineError`.\n\n## Implementation\n\n```rust\n// crates/ironstar/src/application/error.rs\n\n/// Error type for EventSourcedAggregate pipeline.\n/// Unifies domain and infrastructure failures for fmodel-rust type alignment.\n#[derive(Debug)]\npub enum CommandPipelineError {\n    /// Domain logic failure (from Decider via map_error).\n    Domain(DomainError),\n    /// Infrastructure failure (from Repository).\n    Infrastructure(InfrastructureError),\n}\n\nimpl From\u003cCommandPipelineError\u003e for AppError {\n    fn from(e: CommandPipelineError) -\u003e Self {\n        match e {\n            CommandPipelineError::Domain(d) =\u003e AppError::from(d),\n            CommandPipelineError::Infrastructure(i) =\u003e AppError::from(i),\n        }\n    }\n}\n```\n\n```rust\n// crates/ironstar/src/application/todo/handlers.rs\n\nuse crate::application::error::CommandPipelineError;\nuse crate::domain::error::DomainError;\nuse crate::domain::todo::{TodoCommand, TodoEvent, todo_decider};\nuse crate::infrastructure::event_store::SqliteEventRepository;\nuse fmodel_rust::aggregate::EventSourcedAggregate;\nuse std::sync::Arc;\n\n/// Repository adapter that maps InfrastructureError to CommandPipelineError.\nstruct TodoEventRepository {\n    inner: Arc\u003cSqliteEventRepository\u003cTodoCommand, TodoEvent\u003e\u003e,\n}\n\nimpl EventRepository\u003cTodoCommand, TodoEvent, String, CommandPipelineError\u003e for TodoEventRepository {\n    // Delegate to inner, mapping errors\n}\n\npub async fn handle_todo_command(\n    event_repository: Arc\u003cSqliteEventRepository\u003cTodoCommand, TodoEvent\u003e\u003e,\n    command: TodoCommand,\n) -\u003e Result\u003cVec\u003c(TodoEvent, String)\u003e, CommandPipelineError\u003e {\n    let repo_adapter = TodoEventRepository { inner: event_repository };\n    \n    let mapped_decider = todo_decider()\n        .map_error(|e| CommandPipelineError::Domain(DomainError::from(e)));\n\n    let aggregate = EventSourcedAggregate::new(\n        repo_adapter,\n        mapped_decider,\n    );\n    \n    aggregate.handle(\u0026command).await\n}\n```\n\n## Key patterns\n\n- **Unified error type**: `CommandPipelineError` satisfies fmodel-rust's type constraint\n- **Decider::map_error()**: Transforms `TodoError` → `CommandPipelineError::Domain`\n- **Repository adapter**: Wraps SqliteEventRepository to map `InfrastructureError` → `CommandPipelineError::Infrastructure`\n- **Version type**: `String` (matching SqliteEventRepository implementation)\n\n## Design decisions\n\n**Why CommandPipelineError (not extend AggregateError)?**\n- AggregateError is for applicative/monadic error aggregation (validation collection)\n- CommandPipelineError is for fmodel-rust type unification (I/O boundary)\n- Mixing infrastructure errors into AggregateError would violate layering\n- Reference: research in architecture docs, `application/error.rs` comments\n\n**File location**: `crates/ironstar/src/application/todo/handlers.rs`\n- Mirrors domain organization pattern (`domain/todo/*`)\n- Scales to additional bounded contexts\n\n## References\n\n- fmodel-rust map_error: `/Users/crs58/projects/rust-workspace/fmodel-rust/src/decider.rs:338-376`\n- fmodel-rust test pattern: `/Users/crs58/projects/rust-workspace/fmodel-rust/tests/aggregate_test.rs:188-189`\n- SqliteEventRepository: `crates/ironstar/src/infrastructure/event_store.rs:297`\n\n## Acceptance criteria\n\n- [ ] Create `CommandPipelineError` in `application/error.rs`\n- [ ] Create `crates/ironstar/src/application/todo/` directory with `mod.rs`\n- [ ] Implement `TodoEventRepository` adapter in `handlers.rs`\n- [ ] Implement `handle_todo_command` with `map_error` pattern\n- [ ] Add `From\u003cCommandPipelineError\u003e for AppError` implementation\n- [ ] Re-export from `application/mod.rs`","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-05T10:18:54.44268-05:00","created_by":"crs58","updated_at":"2026-01-18T15:29:53.099624-05:00","closed_at":"2026-01-18T15:29:53.099624-05:00","close_reason":"Implemented in 93a2c1b. Pattern: CommandPipelineError unifies Decider/Repository errors via map_error and adapter.","dependencies":[{"issue_id":"ironstar-a9b.7","depends_on_id":"ironstar-a9b","type":"parent-child","created_at":"2026-01-05T10:18:54.445334-05:00","created_by":"crs58"},{"issue_id":"ironstar-a9b.7","depends_on_id":"ironstar-a9b.1","type":"blocks","created_at":"2026-01-05T10:19:51.012154-05:00","created_by":"crs58"},{"issue_id":"ironstar-a9b.7","depends_on_id":"ironstar-a9b.4","type":"blocks","created_at":"2026-01-05T10:19:51.974066-05:00","created_by":"crs58"}]}
{"id":"ironstar-a9b.8","title":"Implement Todo query service with View replay","description":"Implement query-side handler for Todo aggregate using compute-on-demand pattern.\n\n## Pattern\n- Fetch all events from EventRepository for a given aggregate\n- Fold through `todo_view()` to compute current state\n- Return state for query response\n\nThis bypasses MaterializedView (which requires ViewStateRepository) in favor of direct View usage with EventRepository as event source. Suitable for small event streams like the Todo canary app.\n\n## Implementation\n```rust\npub async fn query_todo_state(\n    repo: \u0026SqliteEventRepository\u003cTodoCommand, TodoEvent\u003e,\n    todo_id: \u0026TodoId,\n) -\u003e Result\u003cTodoViewState, InfrastructureError\u003e {\n    let events = repo.fetch_events_by_id(todo_id).await?;\n    let view = todo_view();\n    let state = events.iter().fold(\n        (view.initial_state)(),\n        |state, (event, _version)| (view.evolve)(state, event)\n    );\n    Ok(state)\n}\n```\n\n## Acceptance criteria\n- [ ] Query handler fetches events from EventRepository\n- [ ] Events folded through todo_view() to compute state\n- [ ] Handler exported from application layer\n- [ ] Integration test validates round-trip (command → query)\n\n## Pattern progression\n- a9b.5: Define View (pure fold function) ✓\n- a9b.8: Use View for queries (full event replay) ← this issue\n- 58f (future): Add MaterializedView for incremental updates when scale requires","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T10:18:56.265455-05:00","created_by":"crs58","updated_at":"2026-01-18T16:11:54.748253-05:00","closed_at":"2026-01-18T16:11:54.748253-05:00","close_reason":"Implemented in 33631c5. Compute-on-demand pattern: fetch events → fold through View → return state.","dependencies":[{"issue_id":"ironstar-a9b.8","depends_on_id":"ironstar-a9b","type":"parent-child","created_at":"2026-01-05T10:18:56.267889-05:00","created_by":"crs58"},{"issue_id":"ironstar-a9b.8","depends_on_id":"ironstar-a9b.5","type":"blocks","created_at":"2026-01-05T10:19:53.06547-05:00","created_by":"crs58"},{"issue_id":"ironstar-a9b.8","depends_on_id":"ironstar-58f","type":"blocked-by","created_at":"2026-01-05T10:42:41.260939-05:00","created_by":"crs58"}]}
{"id":"ironstar-a9b.9","title":"Integrate Zenoh event publishing","description":"Integrate Zenoh event bus for post-persist event broadcast.\n\n## Implementation\n\n```rust\n// After EventSourcedAggregate::handle() succeeds\nfor (event, version) in \u0026events {\n    let key = format!(\"events/{}/{}\", E::decider_type(), event.identifier());\n    zenoh.put(\u0026key, serde_json::to_vec(event)?).await?;\n}\n```\n\n## Key Pattern\n\n- Publish AFTER successful persist (not before)\n- Use key expression for routing: events/Todo/{aggregate_id}\n- Fire-and-forget (don't fail command on publish error)\n- SSE handlers subscribe with wildcard: events/Todo/**\n\n## Acceptance Criteria\n\n- [ ] EventBus trait with publish method\n- [ ] Zenoh implementation using key expressions\n- [ ] Integration in command handler after persist\n- [ ] Error logging but no command failure on publish error","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-05T10:18:58.385753-05:00","created_by":"crs58","updated_at":"2026-01-18T21:43:50.826632-05:00","closed_at":"2026-01-18T21:43:50.826632-05:00","close_reason":"EventBus trait + ZenohEventBus impl. Fire-and-forget post-persist. Key expressions for routing. Integrated in handle_todo_command. Commits: see 2c6b21c..3191887","dependencies":[{"issue_id":"ironstar-a9b.9","depends_on_id":"ironstar-a9b","type":"parent-child","created_at":"2026-01-05T10:18:58.387909-05:00","created_by":"crs58"},{"issue_id":"ironstar-a9b.9","depends_on_id":"ironstar-a9b.7","type":"blocks","created_at":"2026-01-05T10:19:54.047169-05:00","created_by":"crs58"}]}
{"id":"ironstar-amw","title":"Configure SQLite production PRAGMA settings (WAL, synchronous, cache)","description":"Optimize SQLite for event sourcing workload after pool creation:\nsqlx::query(\"PRAGMA journal_mode=WAL\").execute(\u0026pool).await?;\nsqlx::query(\"PRAGMA synchronous=FULL\").execute(\u0026pool).await?;\nsqlx::query(\"PRAGMA cache_size=-64000\").execute(\u0026pool).await?; // 64MB\nsqlx::query(\"PRAGMA temp_store=MEMORY\").execute(\u0026pool).await?;\nWAL mode enables concurrent reads during writes. synchronous=FULL ensures durability.\nLocal refs: ~/projects/rust-workspace/sqlx","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-18T17:31:36.996253-05:00","updated_at":"2025-12-18T17:31:36.996253-05:00","dependencies":[{"issue_id":"ironstar-amw","depends_on_id":"ironstar-nyp","type":"parent-child","created_at":"2025-12-24T00:43:57.332152-05:00","created_by":"daemon"},{"issue_id":"ironstar-amw","depends_on_id":"ironstar-nyp","type":"child","created_at":"2025-12-27T14:19:47.435055-05:00","created_by":"daemon"},{"issue_id":"ironstar-amw","depends_on_id":"ironstar-a9b.1","type":"blocks","created_at":"2026-01-06T13:46:00.61269-05:00","created_by":"crs58"}]}
{"id":"ironstar-apx","title":"Documentation and template","description":"Template finalization with omnix integration (om CLI parameters, conditional file inclusion), comprehensive BOOTSTRAP.md documentation, environment configuration templates, and structured logging via tracing. Enables users to instantiate ironstar as a template project with parameterized customization following typescript-nix-template and rust-nix-template patterns.","status":"open","priority":3,"issue_type":"epic","created_at":"2025-12-18T09:36:51.229466-05:00","updated_at":"2025-12-18T09:36:51.393768-05:00","dependencies":[{"issue_id":"ironstar-apx","depends_on_id":"ironstar-zuv","type":"blocks","created_at":"2025-12-18T09:36:51.538958-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-apx","depends_on_id":"ironstar-rjs","type":"blocks","created_at":"2025-12-18T17:26:44.056089-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-apx.1","title":"Create BOOTSTRAP.md with complete setup instructions","description":"Write BOOTSTRAP.md documenting: prerequisites (Nix, direnv), flake.nix structure overview, Nix modules organization, devShell contents, process-compose processes, development workflow, frontend/backend build separation. Include troubleshooting section.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T09:36:51.698664-05:00","updated_at":"2025-12-18T09:36:51.857557-05:00","dependencies":[{"issue_id":"ironstar-apx.1","depends_on_id":"ironstar-apx","type":"parent-child","created_at":"2025-12-18T09:36:51.699018-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-apx.1","depends_on_id":"ironstar-r62.13","type":"blocks","created_at":"2025-12-18T09:36:52.002378-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-apx.2","title":"Create template parameters and conditional includes","description":"Implement nix/modules/template.nix defining omnix template parameters: project-name, crate-name, github-ci (conditional .github/workflows), example-todo (conditional examples/), nix-template (conditional nix/modules/template.nix). Follow typescript-nix-template pattern.\nLocal refs: ~/projects/nix-workspace/typescript-nix-template/modules/template.nix","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T09:36:52.167986-05:00","updated_at":"2025-12-18T09:36:52.319828-05:00","dependencies":[{"issue_id":"ironstar-apx.2","depends_on_id":"ironstar-apx","type":"parent-child","created_at":"2025-12-18T09:36:52.168362-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-apx.2","depends_on_id":"ironstar-6lq.1","type":"blocks","created_at":"2025-12-18T09:36:52.464755-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-apx.3","title":"Define om CLI instantiation tests and metadata","description":"Add om.templates.ironstar definition with template description, parameters array, and integration tests validating: Cargo.toml generation, flake.nix presence, .github/workflows/ci.yml conditionally present, packages.default builds successfully.\nLocal refs: ~/projects/rust-workspace/rust-nix-template/nix/modules/template.nix","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-18T09:36:52.626251-05:00","updated_at":"2025-12-18T09:36:52.769508-05:00","dependencies":[{"issue_id":"ironstar-apx.3","depends_on_id":"ironstar-apx","type":"parent-child","created_at":"2025-12-18T09:36:52.626622-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-apx.3","depends_on_id":"ironstar-apx.2","type":"blocks","created_at":"2025-12-18T09:36:52.924359-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-apx.4","title":"Create .env.development template file","description":"Create template .env.development with DATABASE_URL=dev.db, LOG_LEVEL=debug, SERVER_PORT=3000, RELOAD_ENABLED=true, STATIC_DIR=static/dist. Document in README that users should copy to .env for local development. Add .env* to .gitignore.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T09:36:53.084413-05:00","updated_at":"2025-12-18T09:36:53.237655-05:00","dependencies":[{"issue_id":"ironstar-apx.4","depends_on_id":"ironstar-apx","type":"parent-child","created_at":"2025-12-18T09:36:53.084791-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-apx.4","depends_on_id":"ironstar-a9b.1","type":"blocks","created_at":"2026-01-06T13:46:00.793295-05:00","created_by":"crs58"}]}
{"id":"ironstar-apx.5","title":"Add structured logging with tracing","description":"Integrate tracing and tracing-subscriber crates for structured logging of events appended, handlers executed, projection updates, and errors. Use span context to correlate logs across request lifecycle.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T09:36:53.54444-05:00","updated_at":"2025-12-18T09:36:53.703718-05:00","dependencies":[{"issue_id":"ironstar-apx.5","depends_on_id":"ironstar-apx","type":"parent-child","created_at":"2025-12-18T09:36:53.544785-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-apx.5","depends_on_id":"ironstar-r62.13","type":"blocks","created_at":"2025-12-18T09:36:53.859698-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-avp","title":"Verify code examples compile and run","description":"Test all SQL and Rust code snippets. Ensure hf:// queries work with real datasets. Check that example commands are accurate.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T01:16:58.161837-05:00","updated_at":"2025-12-26T20:51:42.252466-05:00","dependencies":[{"issue_id":"ironstar-avp","depends_on_id":"ironstar-0tk","type":"parent-child","created_at":"2025-12-19T01:17:25.952389-05:00","created_by":"daemon","metadata":"{}"}],"deleted_at":"2025-12-26T20:51:42.252466-05:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"ironstar-b2l","title":"Design Zenoh key expression schema for bounded context routing","description":"Define complete key expression hierarchy for CQRS event routing across bounded contexts.\n\n**Context from architecture review:**\n- bounded-contexts.md establishes 3 contexts: Session, Todo, Analytics\n- event-sourcing-core.md references events/Todo/** filtering pattern\n- Session context is Customer-Supplier upstream to other contexts\n\n**Schema requirements:**\n- Per-context key prefixes (events/session/**, events/todo/**, events/analytics/**)\n- Per-aggregate routing within contexts\n- Session-scoped delivery for SSE (events/session/{session_id}/**)\n- Version namespace consideration (events/v1/** vs events/**/v1/**)\n\n**Deliverable:**\nDocument in docs/notes/architecture/infrastructure/zenoh-key-expressions.md","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-05T22:44:21.093566-05:00","created_by":"crs58","updated_at":"2026-01-05T22:44:21.093566-05:00","dependencies":[{"issue_id":"ironstar-b2l","depends_on_id":"ironstar-nyp.26","type":"blocks","created_at":"2026-01-05T22:44:21.095113-05:00","created_by":"crs58"}]}
{"id":"ironstar-b43","title":"Implement error type hierarchy","description":"Implement ironstar's layered error type hierarchy as specified in error-types.md.\n\n## Error Types Required\n\n### Foundation Layer (common-enums)\n```rust\npub enum ErrorCode {\n    ValidationFailed, InvalidInput, NotFound, Conflict,\n    Unauthorized, Forbidden, InternalError, DatabaseError, ServiceUnavailable,\n}\n```\n\n### Domain Layer (ironstar-domain)\n```rust\npub struct ValidationError { id: Uuid, kind: ValidationErrorKind, backtrace: Backtrace }\npub struct DomainError { id: Uuid, kind: DomainErrorKind, backtrace: Backtrace }\n```\n\n### Application Layer (ironstar-app)\n```rust\npub enum AggregateError {\n    Validation(Vec\u003cValidationError\u003e),  // Applicative (collect all)\n    Domain(DomainError),                // Monadic (fail fast)\n}\n```\n\n### Infrastructure Layer (ironstar-interfaces)\n```rust\npub struct InfrastructureError { id: Uuid, kind: InfrastructureErrorKind, backtrace: Backtrace }\n```\n\n### Presentation Layer (ironstar-web)\n```rust\npub struct AppError { id: Uuid, kind: AppErrorKind, backtrace: Backtrace }\n```\n\n## Key Design Points\n\n- All errors include UUID for distributed tracing correlation\n- From impls enable ? propagation across layers\n- AggregateError::Validation holds Vec for applicative validation\n- ErrorCode maps to HTTP status codes\n\n## Acceptance Criteria\n\n- [ ] All 5 error types implemented in correct crates\n- [ ] From impls for ? propagation chain\n- [ ] ErrorCode::http_status() returns correct HTTP status codes\n- [ ] UUID tracking on all error types\n- [ ] AppError implements axum::IntoResponse","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-05T10:42:11.112366-05:00","created_by":"crs58","updated_at":"2026-01-17T15:18:58.703387-05:00","closed_at":"2026-01-17T15:18:58.703387-05:00","close_reason":"Satisfied by existing implementation:\n- ValidationError: domain/error.rs\n- DomainError: domain/error.rs\n- AggregateError: application/error.rs\n- ErrorCode: common/error_code.rs\n\nAll acceptance criteria met with UUID tracking, From impls, and http_status() mapping."}
{"id":"ironstar-b8d","title":"Act 3: Expand web interface slides","description":"Flesh out slides 15-19. Add speaker notes. Consider: CellXGene screenshot for comparison, Datastar event flow animation concept, ironstar code snippet refinement.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T01:16:53.163019-05:00","updated_at":"2025-12-26T20:51:42.260916-05:00","dependencies":[{"issue_id":"ironstar-b8d","depends_on_id":"ironstar-0tk","type":"parent-child","created_at":"2025-12-19T01:17:25.292373-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-b8d","depends_on_id":"ironstar-edx","type":"blocks","created_at":"2025-12-19T01:17:35.18928-05:00","created_by":"daemon","metadata":"{}"}],"deleted_at":"2025-12-26T20:51:42.260916-05:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"ironstar-b9h","title":"Configure tower-http Brotli compression for SSE responses","description":"Add CompressionLayer from tower-http to SSE routes:\nuse tower_http::compression::CompressionLayer;\nlet app = Router::new()\n    .route(\"/feed\", get(sse_feed))\n    .layer(CompressionLayer::new());\nDatastar docs claim 200:1 compression ratios for HTML over SSE with Brotli.\nLocal refs: ~/projects/rust-workspace/axum, ~/projects/lakescope-workspace/datastar-doc","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-18T17:31:27.147777-05:00","updated_at":"2025-12-18T17:31:27.147777-05:00","dependencies":[{"issue_id":"ironstar-b9h","depends_on_id":"ironstar-r62.5","type":"blocks","created_at":"2025-12-18T17:31:58.282271-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-b9h","depends_on_id":"ironstar-r62","type":"parent-child","created_at":"2025-12-24T00:43:58.377754-05:00","created_by":"daemon"},{"issue_id":"ironstar-b9h","depends_on_id":"ironstar-r62","type":"child","created_at":"2025-12-27T14:19:48.300975-05:00","created_by":"daemon"}]}
{"id":"ironstar-c7z","title":"Implement DuckDB remote data source integration (DuckLake/HF pattern)","description":"Extend DuckDB analytics service to query remote data sources via DuckLake catalogs.\n\n## Query pattern\n\nOnce attached, query tables directly:\n```sql\nATTACH 'ducklake:...' AS space;\nSELECT * FROM space.main.astronauts ORDER BY total_space_days DESC;\n```\n\nDuckLake handles catalog→parquet mapping transparently via httpfs.\n\n## Embedded catalogs (recommended for demos)\n\nEmbed DuckLake catalogs (~5MB SQLite) in binary via rust_embed to eliminate ~2s ATTACH latency.\nExtract to temp file at startup, ATTACH locally.\nCache keys use build-time versioning (CARGO_PKG_VERSION).\n\n## Runtime catalogs (user-provided)\n\nATTACH from hf:// at runtime for user-specified datasets.\nCache keys use ducklake_current_snapshot() for versioning.\n\n## Protocols supported\n\n- ducklake: for DuckLake catalog attachment\n- hf:// for HuggingFace-hosted parquet data\n- s3:// for S3-compatible storage\n\n## Canonical test dataset\n\nsciexp-fixtures: hf://datasets/sciexp/fixtures/lakes/frozen/space.db\n\n## Local refs\n\n- ~/projects/omicslake-workspace/sciexp-fixtures\n- ~/projects/lakescope-workspace/ducklake\n- docs/notes/architecture/infrastructure/analytics-cache-patterns.md","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-18T17:42:29.960214-05:00","updated_at":"2025-12-28T23:54:06.833677-05:00","dependencies":[{"issue_id":"ironstar-c7z","depends_on_id":"ironstar-nyp.12","type":"blocks","created_at":"2025-12-18T17:42:35.310347-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-c7z","depends_on_id":"ironstar-3gd","type":"parent-child","created_at":"2025-12-24T00:42:58.323991-05:00","created_by":"daemon"},{"issue_id":"ironstar-c7z","depends_on_id":"ironstar-9b1","type":"blocks","created_at":"2025-12-24T00:56:18.026149-05:00","created_by":"daemon"},{"issue_id":"ironstar-c7z","depends_on_id":"ironstar-3gd","type":"child","created_at":"2025-12-27T14:19:44.716321-05:00","created_by":"daemon"}],"comments":[{"id":1,"issue_id":"ironstar-c7z","author":"crs58","text":"Session 2025-12-28: Validated DuckLake API pattern. Key discovery: use ducklake_current_snapshot() function, not __ducklake_metadata_* tables. Documentation added to analytics-cache-patterns.md. sciexp-fixtures and ducklake refs added to CLAUDE.md.","created_at":"2025-12-29T04:49:55Z"},{"id":2,"issue_id":"ironstar-c7z","author":"crs58","text":"Session 2025-12-28 (cont): Refined understanding — embed DuckLake catalogs via rust_embed to eliminate ATTACH latency. Cache keys use build-time versioning for embedded catalogs. Created ironstar-3gd.4 for implementation.","created_at":"2025-12-29T04:54:30Z"}]}
{"id":"ironstar-cxe","title":"Template instantiation","description":"Bootstrap the ironstar project from typescript-nix-template using omnix om CLI. This epic establishes the foundational Nix flake structure with deterministic development environments, secrets management patterns, and git repository initialization. Validates that the template instantiation succeeds before proceeding to Rust-specific integration.","status":"closed","priority":0,"issue_type":"epic","created_at":"2025-12-18T09:36:07.442807-05:00","updated_at":"2025-12-18T13:43:16.554412-05:00","closed_at":"2025-12-18T13:43:16.554412-05:00","close_reason":"Closed"}
{"id":"ironstar-cxe.1","title":"Run om init with typescript-nix-template parameters","description":"Execute om init with typescript-nix-template to generate the initial flake structure with flake-parts, import-tree module composition, treefmt-nix formatting, nix-unit testing, git-hooks, and GitHub Actions workflows.\n\nTemplate source: github:sciexp/typescript-nix-template/main\n\nParameters:\n- project-name: ironstar\n- npm-scope: @ironstar\n- git-org: sciexp\n- author: Ironstar Developers\n- author-email: ironstar@scientistexperience.net\n- project-description: Rust + Datastar template for reactive, event-sourced web applications with hypermedia-driven architecture\n- cloudflare-worker-name: ironstar-docs\n- production-url: ironstar.scientistexperience.net\n- github-ci: true\n- vscode: true\n- docs: true\n- nix-template: false\n\nExecution plan:\n1. Run om init to ~/projects/rust-workspace/ironstar-init (temp directory)\n2. Selectively merge files into existing ironstar repo with atomic commits\n3. Preserve existing docs/notes/ content\n4. Set up docs/ symlinks following typescript-nix-template pattern\n5. Merge .gitignore and .gitattributes (preserve beads merge driver)\n\nLocal refs: ~/projects/nix-workspace/typescript-nix-template","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-18T09:36:07.745128-05:00","updated_at":"2025-12-18T11:14:34.74988-05:00","closed_at":"2025-12-18T11:14:34.74988-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ironstar-cxe.1","depends_on_id":"ironstar-cxe","type":"parent-child","created_at":"2025-12-18T09:36:07.745554-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-cxe.2","title":"Configure secrets management and string replacement","description":"Secrets are managed via sops-encrypted vars/*.yaml files following the typescript-nix-template pattern, rather than .env files. The .sops.yaml configuration and vars/ directory structure were added during template instantiation. Runtime secrets are decrypted by sops and injected via the devShell or CI workflows. The .gitignore already includes patterns to prevent accidental secret commits (.env*, vars/* with exceptions for encrypted yaml/json).","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-18T09:36:08.063505-05:00","updated_at":"2025-12-18T13:42:58.244355-05:00","closed_at":"2025-12-18T13:42:58.244355-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ironstar-cxe.2","depends_on_id":"ironstar-cxe","type":"parent-child","created_at":"2025-12-18T09:36:08.063892-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-cxe.2","depends_on_id":"ironstar-cxe.1","type":"blocks","created_at":"2025-12-18T09:36:08.363171-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-cxe.3","title":"Verify nix develop enters working development shell","description":"Test that nix develop successfully enters the devShell with basic tooling available. Verify nixd, direnv, and foundational utilities are present. This validates the template instantiation before proceeding to Rust integration.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-18T09:36:08.524413-05:00","updated_at":"2025-12-18T13:42:58.245614-05:00","closed_at":"2025-12-18T13:42:58.245614-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ironstar-cxe.3","depends_on_id":"ironstar-cxe","type":"parent-child","created_at":"2025-12-18T09:36:08.524856-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-cxe.3","depends_on_id":"ironstar-cxe.1","type":"blocks","created_at":"2025-12-18T09:36:08.855855-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-cxe.4","title":"Create initial git commit with generated structure","description":"Stage all generated files from om init and create initial commit with message: 'feat: initialize ironstar from typescript-nix-template'. Establishes baseline for tracking subsequent changes.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-18T09:36:09.020963-05:00","updated_at":"2025-12-18T13:43:06.352223-05:00","closed_at":"2025-12-18T13:43:06.352223-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ironstar-cxe.4","depends_on_id":"ironstar-cxe","type":"parent-child","created_at":"2025-12-18T09:36:09.021365-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-cxe.4","depends_on_id":"ironstar-cxe.3","type":"blocks","created_at":"2025-12-18T09:36:09.347894-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-cxe.4","depends_on_id":"ironstar-cxe.2","type":"blocks","created_at":"2025-12-18T09:36:09.502924-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-cxe.5","title":"Create .gitignore with comprehensive patterns","description":"Create .gitignore at repository root with patterns: /target/, Cargo.lock, /static/dist/, web-components/dist, node_modules, .env*, dev.db*, .DS_Store, .direnv, result, .beads/. Protects against accidental secret commits and build artifacts.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-18T09:36:09.669403-05:00","updated_at":"2025-12-18T13:42:58.246514-05:00","closed_at":"2025-12-18T13:42:58.246514-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ironstar-cxe.5","depends_on_id":"ironstar-cxe","type":"parent-child","created_at":"2025-12-18T09:36:09.669793-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-e6k","title":"Example application (Todo)","description":"Pedagogical TodoMVC demonstration integrating all architectural layers.\n\n## Role in ironstar\n\nThis epic provides **pedagogical scaffolding**, not the primary use case:\n\n- **Pedagogical**: Familiar reference application (TodoMVC) for learning patterns\n- **Pattern source**: Todo implementation in 2nt.2/3/4/7 established patterns for QuerySession\n- **Full stack demo**: When complete, demonstrates SSE, hypertext, CQRS end-to-end\n\nPer architecture-decisions.md: \"The domain model centers on QuerySession as the primary aggregate, not a generic Todo placeholder.\"\n\n## Current status\n\n- ✓ Domain model complete (superseded e6k.1 - done in domain layer epic)\n  - TodoAggregate, TodoEvent, TodoCommand, TodoState in crates/ironstar/src/domain/\n- → Remaining work: projection, handlers, SSE feed, templates, routing\n\n## Relationship to QuerySession\n\nThe patterns established here inform QuerySession implementation:\n- Value objects with smart constructors → DatasetRef, SqlQuery, QueryId\n- Pure aggregate state machine → QuerySession lifecycle\n- Railway-oriented Result validation → Analytics error handling\n\nQuerySession (ironstar-2nt.14) is the \"true use case\"; Todo is the learning vehicle.\n\nLocal refs: ~/projects/lakescope-workspace/datastar-go-nats-template-northstar (northstar patterns)","status":"open","priority":3,"issue_type":"epic","created_at":"2025-12-18T09:36:42.02273-05:00","updated_at":"2025-12-27T22:28:04.149098-05:00","dependencies":[{"issue_id":"ironstar-e6k","depends_on_id":"ironstar-r62","type":"blocks","created_at":"2025-12-18T09:36:42.327447-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-e6k.1","title":"Define Todo domain model (aggregate, events, commands)","description":"Create src/domain/todo.rs with:\nstruct TodoAggregate { id: Uuid, text: TodoText, completed: bool, created_at: DateTime\u003cUtc\u003e, updated_at: DateTime\u003cUtc\u003e }\nenum TodoEvent { TodoCreated { id: Uuid, text: String, created_at: DateTime\u003cUtc\u003e }, TodoCompleted { id: Uuid, completed_at: DateTime\u003cUtc\u003e }, TodoDeleted { id: Uuid, deleted_at: DateTime\u003cUtc\u003e } }\nenum TodoCommand { AddTodo { text: String }, MarkComplete { id: Uuid }, DeleteTodo { id: Uuid } }\nDemonstrates algebraic modeling with sum types (events) and product types (aggregates).\nLocal refs: ~/projects/lakescope-workspace/datastar-go-nats-template-northstar","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-18T09:36:42.483896-05:00","updated_at":"2025-12-27T22:26:40.094436-05:00","closed_at":"2025-12-27T22:26:40.094436-05:00","close_reason":"Superseded by domain layer work in ironstar-2nt.2/3/4/7. Todo domain model (TodoAggregate, TodoEvent, TodoCommand, TodoState, TodoError, TodoId, TodoText) fully implemented in crates/ironstar/src/domain/. Implementation exceeds original scope with smart constructors, state machine, and ts-rs integration.","dependencies":[{"issue_id":"ironstar-e6k.1","depends_on_id":"ironstar-e6k","type":"parent-child","created_at":"2025-12-18T09:36:42.48427-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-e6k.1","depends_on_id":"ironstar-2nt.2","type":"blocks","created_at":"2025-12-18T09:36:42.79262-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-e6k.1","depends_on_id":"ironstar-2nt.4","type":"blocks","created_at":"2025-12-18T09:36:42.941811-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-e6k.2","title":"Implement TodoListProjection with in-memory rebuild","description":"Create struct TodoListProjection(Vec\u003cTodoItem\u003e) implementing Projection trait. rebuild() method replays all TodoCreated/TodoCompleted/TodoDeleted events to reconstruct current state. apply() method handles incremental event updates. Demonstrates projection pattern.\nLocal refs: ~/projects/rust-workspace/datastar-rust-lince","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-18T09:36:43.108045-05:00","updated_at":"2025-12-18T09:36:43.255636-05:00","dependencies":[{"issue_id":"ironstar-e6k.2","depends_on_id":"ironstar-e6k","type":"parent-child","created_at":"2025-12-18T09:36:43.108467-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-e6k.2","depends_on_id":"ironstar-e6k.1","type":"blocks","created_at":"2025-12-18T09:36:43.413574-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-e6k.2","depends_on_id":"ironstar-a9b.8","type":"blocks","created_at":"2026-01-06T13:46:01.091122-05:00","created_by":"crs58"}]}
{"id":"ironstar-e6k.3","title":"Implement add_todo handler (POST /add-todo)","description":"Create async handler accepting ReadSignals\u003cAddTodoCommand\u003e with text field. Validates non-empty, emits TodoCreated event, appends to event store, broadcasts to subscribers, returns 202. Frontend removes loading indicator via SSE update. Demonstrates write path with immediate response.\nLocal refs: ~/projects/rust-workspace/axum, ~/projects/rust-workspace/datastar-rust","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-18T09:36:43.733727-05:00","updated_at":"2025-12-18T09:36:43.885805-05:00","dependencies":[{"issue_id":"ironstar-e6k.3","depends_on_id":"ironstar-e6k","type":"parent-child","created_at":"2025-12-18T09:36:43.734117-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-e6k.3","depends_on_id":"ironstar-e6k.2","type":"blocks","created_at":"2025-12-18T09:36:44.043493-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-e6k.3","depends_on_id":"ironstar-r62.6","type":"blocks","created_at":"2025-12-18T09:36:44.195599-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-e6k.4","title":"Implement mark_todo handler (POST /mark-todo)","description":"Create async handler accepting ReadSignals\u003c{id: Uuid}\u003e that emits TodoCompleted event, appends to event store, broadcasts, returns 202. SSE updates todo item to show completed state via hypertext morphing.\nLocal refs: ~/projects/rust-workspace/axum","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-18T09:36:44.358067-05:00","updated_at":"2025-12-18T09:36:44.502635-05:00","dependencies":[{"issue_id":"ironstar-e6k.4","depends_on_id":"ironstar-e6k","type":"parent-child","created_at":"2025-12-18T09:36:44.358476-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-e6k.4","depends_on_id":"ironstar-e6k.3","type":"blocks","created_at":"2025-12-18T09:36:44.65614-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-e6k.5","title":"Implement delete_todo handler (POST /delete-todo)","description":"Create async handler accepting ReadSignals\u003c{id: Uuid}\u003e that emits TodoDeleted event, appends to event store, broadcasts, returns 202. SSE morphs todo-list to remove deleted item or replaces entire list.\nLocal refs: ~/projects/rust-workspace/axum","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-18T09:36:44.827268-05:00","updated_at":"2025-12-18T09:36:44.975046-05:00","dependencies":[{"issue_id":"ironstar-e6k.5","depends_on_id":"ironstar-e6k","type":"parent-child","created_at":"2025-12-18T09:36:44.827714-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-e6k.5","depends_on_id":"ironstar-e6k.3","type":"blocks","created_at":"2025-12-18T09:36:45.119292-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-e6k.6","title":"Implement GET /todos SSE feed endpoint","description":"Create async handler returning Sse\u003cimpl Stream\u003e that on initial connection sends TodoListProjection current state as PatchElements(todo_list_template(todos)), then streams incremental updates from broadcast channel. Implements Tao of Datastar principle 1 (backend is source of truth) with fat morph initial state.\nLocal refs: ~/projects/rust-workspace/axum, ~/projects/rust-workspace/datastar-rust","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-18T09:36:45.278664-05:00","updated_at":"2025-12-18T09:36:45.445025-05:00","dependencies":[{"issue_id":"ironstar-e6k.6","depends_on_id":"ironstar-e6k","type":"parent-child","created_at":"2025-12-18T09:36:45.279313-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-e6k.6","depends_on_id":"ironstar-e6k.2","type":"blocks","created_at":"2025-12-18T09:36:45.6055-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-e6k.6","depends_on_id":"ironstar-r62.5","type":"blocks","created_at":"2025-12-18T09:36:45.756334-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-e6k.7","title":"Implement todo_list_template rendering function","description":"Create hypertext function fn todo_list_template(todos: \u0026[TodoItem]) -\u003e impl Renderable that renders ul#todo-list with li items, checkboxes with data-on:change, delete buttons with data-on:click, and add-todo form with input data-bind. Demonstrates complete Datastar integration for todo app.\nLocal refs: ~/projects/rust-workspace/hypertext, ~/projects/lakescope-workspace/datastar-go-nats-template-northstar","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-18T09:36:45.918691-05:00","updated_at":"2025-12-18T09:36:46.075761-05:00","dependencies":[{"issue_id":"ironstar-e6k.7","depends_on_id":"ironstar-e6k","type":"parent-child","created_at":"2025-12-18T09:36:45.919081-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-e6k.7","depends_on_id":"ironstar-r62.10","type":"blocks","created_at":"2025-12-18T09:36:46.232358-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-e6k.8","title":"Implement todo example route mounting","description":"Create routes() function mounting todo example endpoints:\n\n- GET /todos - render todo list via MaterializedView query\n- POST /add-todo - send CreateTodo command via EventSourcedAggregate\n- POST /mark-todo - send CompleteTodo command\n- POST /delete-todo - send DeleteTodo command\n- GET /todos-feed - SSE stream from Zenoh subscription\n\nWire AppState with:\n- EventSourcedAggregate\u003cTodoDecider, SqliteEventRepository\u003e for commands\n- MaterializedView\u003cTodoView, SqliteViewRepository\u003e for queries\n- Zenoh session for SSE broadcasting\n\nMount under /api prefix in main Router.\n\nLocal refs: ~/projects/rust-workspace/axum, ~/projects/rust-workspace/datastar-rust\n","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-18T09:36:46.402003-05:00","updated_at":"2026-01-05T11:12:55.371445-05:00","dependencies":[{"issue_id":"ironstar-e6k.8","depends_on_id":"ironstar-e6k","type":"parent-child","created_at":"2025-12-18T09:36:46.402396-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-e6k.8","depends_on_id":"ironstar-e6k.6","type":"blocks","created_at":"2025-12-18T09:36:46.704367-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-e6k.8","depends_on_id":"ironstar-e6k.3","type":"blocks","created_at":"2025-12-18T09:36:46.850952-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-e6k.8","depends_on_id":"ironstar-e6k.4","type":"blocks","created_at":"2025-12-18T09:36:47.002325-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-e6k.8","depends_on_id":"ironstar-e6k.5","type":"blocks","created_at":"2025-12-18T09:36:47.1643-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-e6k.8","depends_on_id":"ironstar-e6k.7","type":"blocks","created_at":"2025-12-18T09:36:47.320573-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-e8d","title":"Refactor domain module into aggregate-based subdirectories","description":"Discovered during ironstar-2nt.14 implementation: query_session.rs grew to 1224 lines.\n\nRefactored domain/ into subdirectories for scalability:\n- domain/todo/ - TodoAggregate (values, errors, commands, events, state, aggregate)\n- domain/query_session/ - QuerySessionAggregate (errors, commands, events, state, aggregate)\n- domain/analytics/ - Analytics value objects (errors, values)\n\nPattern: Each aggregate gets a subdirectory with consistent file structure.\nThis enables clean separation as more aggregates are added.\n\nImplemented in e881db6 (23 refactoring commits).","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-12-29T11:08:34.17788-05:00","created_by":"crs58","updated_at":"2025-12-29T11:08:43.999106-05:00","closed_at":"2025-12-29T11:08:43.999106-05:00","close_reason":"Implemented in e881db6. 23 refactoring commits creating domain/{todo,query_session,analytics}/ subdirectories. All 106 tests passing. Pattern documented for future aggregates.","dependencies":[{"issue_id":"ironstar-e8d","depends_on_id":"ironstar-2nt.14","type":"discovered-from","created_at":"2025-12-29T11:08:42.520559-05:00","created_by":"daemon"}]}
{"id":"ironstar-edx","title":"Review narrative arc and timing estimates","description":"Validate the 4-act structure (15-15-10-5 min). Ensure logical flow from problem to solution to interface to vision. Check that each slide has one clear concept.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-19T01:16:34.677437-05:00","updated_at":"2025-12-26T20:51:42.225832-05:00","close_reason":"Reviewed 4-act structure (15-15-10-5 min). Validated slide counts: 8/6/7/5 content slides per act. Identified flow issues (Enterprise Parallel transition, missing demo slide). Added progress-diagram function for section navigation in commit 8c5bf15.","dependencies":[{"issue_id":"ironstar-edx","depends_on_id":"ironstar-0tk","type":"parent-child","created_at":"2025-12-19T01:17:24.760043-05:00","created_by":"daemon","metadata":"{}"}],"deleted_at":"2025-12-26T20:51:42.225832-05:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"ironstar-f8b","title":"Process compose integration","description":"Integrate process-compose for orchestrating development services including database initialization, frontend bundler watch mode, TypeScript type generation, backend cargo-watch, and browser hotreload. Uses process-compose-flake for Nix integration and declarative service configuration with dependency ordering and readiness probes.","status":"open","priority":0,"issue_type":"epic","created_at":"2025-12-18T09:36:13.572364-05:00","updated_at":"2025-12-18T09:36:13.726425-05:00","dependencies":[{"issue_id":"ironstar-f8b","depends_on_id":"ironstar-6lq","type":"blocks","created_at":"2025-12-18T09:36:13.87458-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-f8b.1","title":"Integrate process-compose-flake patterns into devShell","description":"Create nix/modules/process-compose.nix importing process-compose-flake.flakeModule:\n{\n  imports = [ inputs.process-compose-flake.flakeModule ];\n  perSystem = { config, pkgs, ... }: {\n    process-compose.dev = {\n      settings.processes = { ... };\n    };\n  };\n}\nDefine perSystem process-compose configurations. Expose as packages.dev runnable via nix run .#dev. Integrates declarative process orchestration into Nix workflow.\nLocal refs: ~/projects/nix-workspace/process-compose-flake","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-18T09:36:14.038509-05:00","updated_at":"2025-12-18T09:36:14.188586-05:00","dependencies":[{"issue_id":"ironstar-f8b.1","depends_on_id":"ironstar-f8b","type":"parent-child","created_at":"2025-12-18T09:36:14.038875-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-f8b.2","title":"Configure process-compose.yaml for dev services","description":"Create process-compose.yaml with processes: db-init (one-shot SQLite schema), frontend (Rolldown watch), typegen (ts-rs watch), backend (cargo watch), hotreload (browser SSE trigger). Define process dependencies, readiness probes, and log_location for each service.\nLocal refs: ~/projects/nix-workspace/process-compose","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-18T09:36:14.352183-05:00","updated_at":"2025-12-18T09:36:14.50011-05:00","dependencies":[{"issue_id":"ironstar-f8b.2","depends_on_id":"ironstar-f8b","type":"parent-child","created_at":"2025-12-18T09:36:14.352549-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-f8b.2","depends_on_id":"ironstar-f8b.1","type":"blocks","created_at":"2025-12-18T09:36:14.653228-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-f8b.3","title":"Set up service orchestration (frontend bundler, cargo-watch)","description":"Configure service startup order and dependencies in process-compose.yaml:\nprocesses:\n  db-init:\n    command: sqlite3 dev.db \u003c migrations/schema.sql\n    availability: { exit_on_end: true }\n  backend:\n    command: cargo watch -x run\n    depends_on:\n      db-init: { condition: process_completed }\n    readiness_probe: { http_get: { host: localhost, port: 3000, path: /health } }\n  frontend:\n    command: cd web-components \u0026\u0026 pnpm rolldown -w\n    depends_on: { backend: { condition: process_healthy } }\n  hotreload:\n    command: ...\n    depends_on: { backend: { condition: process_healthy } }\nEnsures db-init completes before backend starts, typegen runs when Rust files change, frontend rebuilds on TypeScript changes, backend restarts on Rust changes, hotreload triggers browser refresh after successful backend build.","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-18T09:36:14.817987-05:00","updated_at":"2025-12-18T09:36:14.973091-05:00","dependencies":[{"issue_id":"ironstar-f8b.3","depends_on_id":"ironstar-f8b","type":"parent-child","created_at":"2025-12-18T09:36:14.818371-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-f8b.3","depends_on_id":"ironstar-f8b.2","type":"blocks","created_at":"2025-12-18T09:36:15.128204-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-f8b.4","title":"Configure cargo-watch to curl hotreload trigger on success","description":"Update backend process command in process-compose.yaml:\n  backend:\n    command: cargo watch -x run -s 'if cargo check; then curl -X POST http://localhost:3000/hotreload/trigger; fi'\nTriggers browser reload via SSE only on successful backend rebuild. Integrates with TASK_HOTRELOAD endpoint (Epic 7) for seamless DX.\nLocal refs: ~/projects/rust-workspace/axum","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-18T09:36:15.287422-05:00","updated_at":"2025-12-18T09:36:15.44893-05:00","dependencies":[{"issue_id":"ironstar-f8b.4","depends_on_id":"ironstar-f8b","type":"parent-child","created_at":"2025-12-18T09:36:15.28779-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-f8b.4","depends_on_id":"ironstar-f8b.3","type":"blocks","created_at":"2025-12-18T09:36:15.597823-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-f8b.5","title":"Verify process-compose up works with all services","description":"Test that process-compose up successfully starts all services in correct order. Verify readiness probes work, dependencies are respected, and logs are properly separated. Test that services restart appropriately when files change.","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-18T09:36:15.763425-05:00","updated_at":"2025-12-18T09:36:15.913793-05:00","dependencies":[{"issue_id":"ironstar-f8b.5","depends_on_id":"ironstar-f8b","type":"parent-child","created_at":"2025-12-18T09:36:15.763799-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-f8b.5","depends_on_id":"ironstar-f8b.4","type":"blocks","created_at":"2025-12-18T09:36:16.063222-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-jdk","title":"Migrate from cargoTest to cargoNextest with dual devshell/CI support","description":"Replace crane cargoTest with cargoNextest in flake checks. Add cargoDocTest for doctest coverage. Include cargo-nextest in devshell for local CLI usage. Create .config/nextest.toml with default and ci profiles. Update justfile rust-test recipe to use nextest. Partitions=1 initially, ready to scale.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-27T10:16:20.791346-05:00","updated_at":"2025-12-27T10:21:02.84117-05:00","closed_at":"2025-12-27T10:21:02.84117-05:00","close_reason":"Implemented in commits e573c25, 4937cb2, 737f98f, 54e515e. Flake evaluation verified.","dependencies":[{"issue_id":"ironstar-jdk","depends_on_id":"ironstar-6lq","type":"child-of","created_at":"2025-12-27T10:16:26.612461-05:00","created_by":"daemon"}]}
{"id":"ironstar-jqv","title":"Authentication and authorization","description":"OAuth-only authentication architecture with GitHub as primary provider, Google OIDC planned. Covers session security, CSRF protection, and RBAC patterns. See ~/projects/rust-workspace/ironstar/docs/notes/architecture/decisions/oauth-authentication.md","status":"open","priority":1,"issue_type":"epic","created_at":"2025-12-22T00:24:59.23359-05:00","updated_at":"2025-12-27T12:50:51.126309-05:00","dependencies":[{"issue_id":"ironstar-jqv","depends_on_id":"ironstar-nyp","type":"depends-on","created_at":"2025-12-24T00:42:47.922629-05:00","created_by":"daemon"}]}
{"id":"ironstar-jqv.1","title":"Implement GitHub OAuth provider","description":"Implement GitHub OAuth using oauth2 crate. Create BasicClient with auth/token URIs, user:email scope. Handle /login redirect with CsrfToken, /auth/github/callback with code exchange, profile fetch from /user API, user upsert, session binding. Discard tokens after identity verification. See docs/notes/architecture/decisions/oauth-authentication.md for complete implementation patterns.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-22T00:27:52.733953-05:00","updated_at":"2025-12-24T10:03:55.658933-05:00","dependencies":[{"issue_id":"ironstar-jqv.1","depends_on_id":"ironstar-jqv","type":"parent-child","created_at":"2025-12-22T00:27:52.734509-05:00","created_by":"crs58"},{"issue_id":"ironstar-jqv.1","depends_on_id":"ironstar-2nt.2","type":"blocks","created_at":"2025-12-22T00:31:45.014387-05:00","created_by":"daemon"},{"issue_id":"ironstar-jqv.1","depends_on_id":"ironstar-jqv.4","type":"blocks","created_at":"2025-12-23T23:24:02.303411-05:00","created_by":"daemon"},{"issue_id":"ironstar-jqv.1","depends_on_id":"ironstar-nyp.11","type":"blocks","created_at":"2025-12-23T23:24:03.322461-05:00","created_by":"daemon"},{"issue_id":"ironstar-jqv.1","depends_on_id":"ironstar-nyp.9","type":"depends-on","created_at":"2025-12-24T00:42:48.806642-05:00","created_by":"daemon"},{"issue_id":"ironstar-jqv.1","depends_on_id":"ironstar-jqv.10","type":"blocks","created_at":"2025-12-24T10:03:57.836046-05:00","created_by":"daemon"}]}
{"id":"ironstar-jqv.10","title":"Implement OAuth CSRF state validation","description":"Store CsrfToken in session.data during login redirect, validate params.state matches stored_state in callback. See oauth-authentication.md OAuth flow sections.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-24T10:02:29.309565-05:00","updated_at":"2025-12-24T10:02:29.309565-05:00","dependencies":[{"issue_id":"ironstar-jqv.10","depends_on_id":"ironstar-jqv","type":"parent-child","created_at":"2025-12-24T10:02:29.311851-05:00","created_by":"daemon"}]}
{"id":"ironstar-jqv.11","title":"Implement session rate limiting with sliding window","description":"Rate limit session creation to prevent DoS attacks.\n\nUse governor crate (NOT moka) per session-security.md:\n\n```rust\nuse governor::{Quota, RateLimiter};\n\nlet quota = Quota::per_minute(10);\nlet limiter: RateLimiter\u003cIpAddr, _, _\u003e = RateLimiter::keyed(quota);\n\n// In handler:\nif limiter.check_key(\u0026client_ip).is_err() {\n    return Err(TooManyRequests);\n}\n```\n\nKey by IP address for session creation endpoint.\n\nRef: docs/notes/architecture/infrastructure/session-security.md","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-24T15:37:37.17607-05:00","updated_at":"2025-12-26T15:53:19.415725-05:00","dependencies":[{"issue_id":"ironstar-jqv.11","depends_on_id":"ironstar-jqv","type":"parent-child","created_at":"2025-12-24T15:37:37.176506-05:00","created_by":"daemon"}]}
{"id":"ironstar-jqv.12","title":"Implement session regeneration and user binding in OAuth callback","description":"Security-critical session handling after OAuth authentication.\n\nPattern from oauth-authentication.md:\n1. Validate CSRF state parameter\n2. Exchange code for tokens\n3. Fetch user identity\n4. DISCARD tokens (don't store)\n5. Regenerate session ID (prevent fixation)\n6. Bind user_id to new session\n\nSession regeneration prevents session fixation attacks.\n\nRef: docs/notes/architecture/decisions/oauth-authentication.md § Session binding after OAuth","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-26T15:53:22.376995-05:00","updated_at":"2025-12-26T15:53:22.376995-05:00","dependencies":[{"issue_id":"ironstar-jqv.12","depends_on_id":"ironstar-jqv","type":"parent-child","created_at":"2025-12-26T15:53:22.379911-05:00","created_by":"daemon"},{"issue_id":"ironstar-jqv.12","depends_on_id":"ironstar-507","type":"blocks","created_at":"2026-01-18T12:56:10.45151-05:00","created_by":"Cameron Smith"}]}
{"id":"ironstar-jqv.13","title":"Add SessionMetadata to Session aggregate","description":"Add SessionMetadata (ip_address, user_agent, geo_location) to SessionCreated event for security audit trail.\n\nScope:\n- Update Session Rust types to include SessionMetadata\n- Capture metadata from axum request context at boundary\n- Store in SessionCreated event payload\n- Update EventCatalog Session events with metadata schema\n\nSpec reference: spec/Session/Session.idr SessionMetadata record\nArchitecture: docs/notes/architecture/decisions/auth-evolution-strategy.md","status":"open","priority":1,"issue_type":"task","owner":"cameron.ray.smith@gmail.com","created_at":"2026-01-16T19:14:24.570478-05:00","created_by":"Cameron Smith","updated_at":"2026-01-16T19:14:24.570478-05:00","dependencies":[{"issue_id":"ironstar-jqv.13","depends_on_id":"ironstar-jqv","type":"parent-child","created_at":"2026-01-16T19:14:28.57746-05:00","created_by":"Cameron Smith"},{"issue_id":"ironstar-jqv.13","depends_on_id":"ironstar-507","type":"blocks","created_at":"2026-01-16T19:15:00.823921-05:00","created_by":"Cameron Smith"}]}
{"id":"ironstar-jqv.14","title":"Document auth evolution strategy","description":"Create ADR documenting authentication/authorization evolution path from MVP OAuth to future WebAuthn/Cedar/multi-provider.\n\nDeliverable: docs/notes/architecture/decisions/auth-evolution-strategy.md\nCovers: UserId evolution, OAuthProvider→AuthMethod, Session boundaries, RBAC→ABAC migration","status":"open","priority":2,"issue_type":"task","owner":"cameron.ray.smith@gmail.com","created_at":"2026-01-16T19:14:34.644865-05:00","created_by":"Cameron Smith","updated_at":"2026-01-16T19:14:34.644865-05:00","dependencies":[{"issue_id":"ironstar-jqv.14","depends_on_id":"ironstar-jqv","type":"parent-child","created_at":"2026-01-16T19:14:38.628674-05:00","created_by":"Cameron Smith"}]}
{"id":"ironstar-jqv.2","title":"Implement session security hardening","description":"CSRF protection, secure cookie attributes, session fixation prevention. See ~/projects/rust-workspace/ironstar/docs/notes/architecture/infrastructure/session-security.md","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-22T00:27:59.472774-05:00","updated_at":"2025-12-23T23:22:50.006647-05:00","dependencies":[{"issue_id":"ironstar-jqv.2","depends_on_id":"ironstar-jqv","type":"parent-child","created_at":"2025-12-22T00:27:59.473386-05:00","created_by":"crs58"},{"issue_id":"ironstar-jqv.2","depends_on_id":"ironstar-jqv.1","type":"blocks","created_at":"2025-12-22T00:31:33.64263-05:00","created_by":"daemon"},{"issue_id":"ironstar-jqv.2","depends_on_id":"ironstar-nyp.9","type":"depends-on","created_at":"2025-12-24T00:42:50.482575-05:00","created_by":"daemon"}]}
{"id":"ironstar-jqv.3","title":"Implement concrete session patterns","description":"Implement SessionService CRUD and cookie configuration. create_session_cookie() with HttpOnly, Secure (prod), SameSite::Lax, Max-Age 30 days. generate_session_id() with 192-bit entropy (24 bytes URL-safe base64). See session-management.md and session-implementation.md.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-22T00:28:05.668525-05:00","updated_at":"2025-12-24T00:54:32.7202-05:00","dependencies":[{"issue_id":"ironstar-jqv.3","depends_on_id":"ironstar-jqv","type":"parent-child","created_at":"2025-12-22T00:28:05.66914-05:00","created_by":"crs58"},{"issue_id":"ironstar-jqv.3","depends_on_id":"ironstar-jqv.2","type":"blocks","created_at":"2025-12-22T00:31:37.093867-05:00","created_by":"daemon"},{"issue_id":"ironstar-jqv.3","depends_on_id":"ironstar-nyp.9","type":"depends-on","created_at":"2025-12-24T00:42:51.401134-05:00","created_by":"daemon"},{"issue_id":"ironstar-jqv.3","depends_on_id":"ironstar-507","type":"blocks","created_at":"2026-01-18T12:56:10.26986-05:00","created_by":"Cameron Smith"}]}
{"id":"ironstar-jqv.4","title":"Implement users table schema and UserService","description":"Create users table for storing authenticated user profiles. Schema (aligned with loom pattern): id (UUID PK), email (TEXT nullable), display_name (TEXT NOT NULL), avatar_url (TEXT nullable), is_admin (BOOLEAN DEFAULT FALSE for first-user promotion), created_at, updated_at. Ref: docs/notes/architecture/decisions/oauth-authentication.md","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-23T23:23:49.896914-05:00","updated_at":"2026-01-16T12:05:27.925043-05:00","dependencies":[{"issue_id":"ironstar-jqv.4","depends_on_id":"ironstar-jqv","type":"parent-child","created_at":"2025-12-23T23:23:49.90066-05:00","created_by":"daemon"}]}
{"id":"ironstar-jqv.5","title":"Create user_identities table for multi-provider support","description":"Create user_identities table linking OAuth providers to users. Schema: id (UUID PK), user_id (FK), provider (TEXT: github/google), provider_user_id (TEXT NOT NULL), provider_email (TEXT nullable), created_at. UNIQUE(provider, provider_user_id). Ref: docs/notes/architecture/decisions/oauth-authentication.md","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-23T23:23:50.164006-05:00","updated_at":"2026-01-16T12:05:32.546493-05:00","dependencies":[{"issue_id":"ironstar-jqv.5","depends_on_id":"ironstar-jqv","type":"parent-child","created_at":"2025-12-23T23:23:50.164474-05:00","created_by":"daemon"},{"issue_id":"ironstar-jqv.5","depends_on_id":"ironstar-jqv.4","type":"blocks","created_at":"2025-12-23T23:24:01.331922-05:00","created_by":"daemon"}]}
{"id":"ironstar-jqv.6","title":"Implement RBAC authorization patterns","description":"Implement Authorizer trait and RbacAuthorizer from oauth-authentication.md. Role enum (Admin/Editor/Viewer). has_role predicate checks. Separate from OAuth authentication flow.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-24T00:44:32.878891-05:00","updated_at":"2025-12-24T00:44:32.878891-05:00","dependencies":[{"issue_id":"ironstar-jqv.6","depends_on_id":"ironstar-jqv","type":"parent-child","created_at":"2025-12-24T00:44:32.880975-05:00","created_by":"daemon"}]}
{"id":"ironstar-jqv.7","title":"Implement AuthContext axum extractor","description":"Implement AuthContext extractor from oauth-authentication.md. FromRequestParts impl that loads user from session. Provides Option\u003cUser\u003e and session_id. Used by protected handlers.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-24T00:44:38.840246-05:00","updated_at":"2025-12-24T00:44:38.840246-05:00","dependencies":[{"issue_id":"ironstar-jqv.7","depends_on_id":"ironstar-jqv","type":"parent-child","created_at":"2025-12-24T00:44:38.842532-05:00","created_by":"daemon"}]}
{"id":"ironstar-jqv.8","title":"Implement session regeneration for fixation prevention","description":"Implement regenerate_session function from session-security.md. On privilege escalation (OAuth callback), create new session ID, copy data, delete old session. Prevents session fixation attacks.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-24T00:44:44.983913-05:00","updated_at":"2025-12-24T00:44:44.983913-05:00","dependencies":[{"issue_id":"ironstar-jqv.8","depends_on_id":"ironstar-jqv","type":"parent-child","created_at":"2025-12-24T00:44:44.986258-05:00","created_by":"daemon"}]}
{"id":"ironstar-jqv.9","title":"Implement RequireAuth axum extractor","description":"Create RequireAuth extractor that wraps AuthContext and returns Unauthorized error if user is None. Enables protected_handler(RequireAuth(user): RequireAuth) pattern. See docs/notes/architecture/decisions/oauth-authentication.md section 'Authorization extractor'.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-24T10:02:27.971587-05:00","updated_at":"2025-12-24T10:02:27.971587-05:00","dependencies":[{"issue_id":"ironstar-jqv.9","depends_on_id":"ironstar-jqv","type":"parent-child","created_at":"2025-12-24T10:02:27.972032-05:00","created_by":"daemon"},{"issue_id":"ironstar-jqv.9","depends_on_id":"ironstar-jqv.7","type":"blocks","created_at":"2025-12-24T10:03:56.683068-05:00","created_by":"daemon"}]}
{"id":"ironstar-k1z","title":"Final review and presentation dry-run","description":"Complete read-through for flow. Time each section. Identify any remaining gaps. Prepare for Q\u0026A topics.","status":"tombstone","priority":3,"issue_type":"task","created_at":"2025-12-19T01:16:59.556828-05:00","updated_at":"2025-12-26T20:51:42.295318-05:00","dependencies":[{"issue_id":"ironstar-k1z","depends_on_id":"ironstar-0tk","type":"parent-child","created_at":"2025-12-19T01:17:26.098179-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-k1z","depends_on_id":"ironstar-ubj","type":"blocks","created_at":"2025-12-19T01:17:35.503481-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-k1z","depends_on_id":"ironstar-a15","type":"blocks","created_at":"2025-12-19T01:17:35.65453-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-k1z","depends_on_id":"ironstar-b8d","type":"blocks","created_at":"2025-12-19T01:17:35.795687-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-k1z","depends_on_id":"ironstar-z4s","type":"blocks","created_at":"2025-12-19T01:17:35.949753-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-k1z","depends_on_id":"ironstar-63r","type":"blocks","created_at":"2025-12-19T01:17:36.110481-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-k1z","depends_on_id":"ironstar-ym1","type":"blocks","created_at":"2025-12-19T01:17:36.258631-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-k1z","depends_on_id":"ironstar-avp","type":"blocks","created_at":"2025-12-19T01:17:36.403411-05:00","created_by":"daemon","metadata":"{}"}],"deleted_at":"2025-12-26T20:51:42.295318-05:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"ironstar-k94","title":"Reference: Strategic domain classification","description":"Core: QuerySession (analytics). Supporting: Session, Auth. Generic: Todo (example), ES infrastructure. See docs/notes/architecture/core/architecture-decisions.md § Strategic domain classification.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T18:43:56.502465-05:00","created_by":"crs58","updated_at":"2026-01-03T18:43:56.502465-05:00"}
{"id":"ironstar-nor","title":"Research Mosaic visualization integration (TBD)","description":"Evaluate Mosaic grammar of graphics for coordinated multi-chart views.\n\nResearch questions:\n- DuckDB integration (Mosaic uses DuckDB under the hood)\n- Web component wrapper pattern (like ds-echarts)\n- Signal binding for selection coordination\n\nDefer to post-MVP unless specific use case emerges.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-18T17:11:36.289441-05:00","updated_at":"2025-12-27T14:20:37.389822-05:00"}
{"id":"ironstar-nqq","title":"Performance optimization","description":"Optional performance patterns for CQRS pipeline including channel sizing, backpressure, debouncing, batching, and rate limiting. See ~/projects/rust-workspace/ironstar/docs/notes/architecture/cqrs/performance-tuning.md and performance-advanced-patterns.md","status":"tombstone","priority":2,"issue_type":"epic","created_at":"2025-12-22T00:25:04.460119-05:00","updated_at":"2025-12-26T20:51:43.374121-05:00","deleted_at":"2025-12-26T20:51:43.374121-05:00","deleted_by":"daemon","delete_reason":"delete","original_type":"epic"}
{"id":"ironstar-nqq.1","title":"Implement CQRS performance tuning","description":"Channel sizing, backpressure handling, metrics instrumentation. See ~/projects/rust-workspace/ironstar/docs/notes/architecture/cqrs/performance-tuning.md","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-22T00:28:11.916829-05:00","updated_at":"2025-12-26T20:51:43.356382-05:00","dependencies":[{"issue_id":"ironstar-nqq.1","depends_on_id":"ironstar-nqq","type":"parent-child","created_at":"2025-12-22T00:28:11.917436-05:00","created_by":"crs58"}],"deleted_at":"2025-12-26T20:51:43.356382-05:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"ironstar-nqq.2","title":"Implement advanced performance patterns","description":"Debouncing, batching, rate limiting (optional optimizations). See ~/projects/rust-workspace/ironstar/docs/notes/architecture/cqrs/performance-advanced-patterns.md","status":"tombstone","priority":3,"issue_type":"task","created_at":"2025-12-22T00:28:18.048981-05:00","updated_at":"2025-12-26T20:51:43.365869-05:00","dependencies":[{"issue_id":"ironstar-nqq.2","depends_on_id":"ironstar-nqq","type":"parent-child","created_at":"2025-12-22T00:28:18.049539-05:00","created_by":"crs58"},{"issue_id":"ironstar-nqq.2","depends_on_id":"ironstar-nqq.1","type":"blocks","created_at":"2025-12-22T00:31:40.424515-05:00","created_by":"daemon"}],"deleted_at":"2025-12-26T20:51:43.365869-05:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"ironstar-ny3","title":"Frontend build pipeline","description":"Frontend build pipeline with Rolldown, PostCSS, and Open Props. See ~/projects/rust-workspace/ironstar/docs/notes/architecture/frontend/frontend-build-pipeline.md and decisions/frontend-stack-decisions.md","status":"open","priority":0,"issue_type":"epic","created_at":"2025-12-18T09:36:20.313846-05:00","updated_at":"2025-12-26T22:08:07.673037-05:00","dependencies":[{"issue_id":"ironstar-ny3","depends_on_id":"ironstar-6lq.7","type":"blocks","created_at":"2025-12-18T09:36:20.624629-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-ny3.1","title":"Create web-components/ project structure with package.json","description":"Create web-components/ directory structure with package.json (type:module, open-props deps, rolldown devDeps, dev/build script stubs). Create stub index.ts entry point and styles/ directory. Does NOT include tsconfig.json (ny3.7), PostCSS config (ny3.3), or Rolldown config (ny3.2).","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-18T09:36:20.782321-05:00","updated_at":"2026-01-19T14:35:06.209145-05:00","closed_at":"2026-01-19T14:35:06.209145-05:00","close_reason":"Implemented in 3ec692e..5bc39fd. Created web-components/ with package.json (rolldown deps, open-props), index.ts stub, styles/main.css stub.","dependencies":[{"issue_id":"ironstar-ny3.1","depends_on_id":"ironstar-ny3","type":"parent-child","created_at":"2025-12-18T09:36:20.782684-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-ny3.10","title":"Configure ts-rs export directory and justfile task","description":"Set TS_RS_EXPORT_DIR to place generated TypeScript bindings in the frontend source tree.\n\nConfiguration:\n- Add to .cargo/config.toml:\n  ```toml\n  [env]\n  TS_RS_EXPORT_DIR = { value = \"web-components/bindings\", relative = true }\n  ```\n- Create justfile task:\n  ```just\n  gen-types:\n    cargo test --workspace  # ts-rs exports on test run\n  ```\n\nThe `bindings/` name aligns with:\n- ts-rs default output directory name\n- Existing gitignore pattern `**/bindings/`\n- Clear semantic meaning (generated bindings, not handwritten types)\n\nOutput structure:\n```\nweb-components/bindings/\n├── commands/\n│   └── TodoCommand.ts\n├── domain/\n│   ├── TodoId.ts\n│   └── TodoText.ts\n└── events/\n    └── TodoEvent.ts\n```\n\nFrontend TypeScript can import via:\n```typescript\nimport type { TodoEvent } from './bindings/events/TodoEvent';\nimport type { TodoCommand } from './bindings/commands/TodoCommand';\n```\n\nLocal refs: ~/projects/rust-workspace/ts-rs","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-18T09:36:24.664592-05:00","updated_at":"2025-12-27T21:55:12.177267-05:00","dependencies":[{"issue_id":"ironstar-ny3.10","depends_on_id":"ironstar-ny3","type":"parent-child","created_at":"2025-12-18T09:36:24.664963-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-ny3.10","depends_on_id":"ironstar-ny3.9","type":"blocks","created_at":"2025-12-18T09:36:24.958867-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-ny3.10","depends_on_id":"ironstar-2nt.5","type":"blocks","created_at":"2025-12-18T09:36:25.121352-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-ny3.11","title":"Create static/dist/ output directory structure","description":"Initialize static/dist/ directory placeholder for Rolldown build outputs (bundle.[hash].css, bundle.[hash].js, manifest.json). Create static/datastar/ for runtime datastar.js. Aligns with single-binary asset embedding in production.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-18T09:36:25.287447-05:00","updated_at":"2026-01-19T14:40:49.502157-05:00","closed_at":"2026-01-19T14:40:49.502157-05:00","close_reason":"Implemented in 5181bb0. Created static/dist/ and static/datastar/ with .gitkeep files.","dependencies":[{"issue_id":"ironstar-ny3.11","depends_on_id":"ironstar-ny3","type":"parent-child","created_at":"2025-12-18T09:36:25.287829-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-ny3.11","depends_on_id":"ironstar-ny3.2","type":"blocks","created_at":"2025-12-18T09:36:25.610782-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-ny3.12","title":"Implement manifest.json parser for hashed filename resolution","description":"Create AssetManifest struct parsing static/dist/manifest.json:\n#[derive(Deserialize)]\nstruct AssetManifest(HashMap\u003cString, String\u003e);\nimpl AssetManifest {\n    fn resolve(\u0026self, entry: \u0026str) -\u003e Option\u003c\u0026str\u003e {\n        self.0.get(entry).map(|s| s.as_str())\n    }\n}\nResolves logical entry names (bundle.js) to content-hashed filenames (bundle.a1b2c3.js) for cache-busting.","status":"in_progress","priority":0,"issue_type":"task","created_at":"2025-12-18T09:36:25.767704-05:00","updated_at":"2026-01-19T14:46:26.826555-05:00","dependencies":[{"issue_id":"ironstar-ny3.12","depends_on_id":"ironstar-ny3","type":"parent-child","created_at":"2025-12-18T09:36:25.768063-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-ny3.12","depends_on_id":"ironstar-ny3.11","type":"blocks","created_at":"2025-12-18T09:36:26.069833-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-ny3.13","title":"Implement rust-embed conditional asset serving","description":"Create dual-mode asset serving: dev mode serves from filesystem via tower-http::ServeDir with no-store cache headers; prod mode embeds static/dist/ via rust-embed with immutable cache headers. Include AssetManifest loader for hashed filename resolution.\nLocal refs: ~/projects/rust-workspace/rust-embed","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-18T09:36:26.237407-05:00","updated_at":"2025-12-18T09:36:26.411281-05:00","dependencies":[{"issue_id":"ironstar-ny3.13","depends_on_id":"ironstar-ny3","type":"parent-child","created_at":"2025-12-18T09:36:26.239198-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-ny3.13","depends_on_id":"ironstar-ny3.12","type":"blocks","created_at":"2025-12-18T09:36:26.544104-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-ny3.14","title":"Create web-components/components/ directory for vanilla web components","description":"Set up web-components/components/ directory structure for vanilla web components. Create index.ts that exports/registers all components:\nclass SortableList extends HTMLElement {\n  connectedCallback() {\n    Sortable.create(this, { onEnd: (evt) =\u003e this.dispatchEvent(new CustomEvent('reorder', { detail: evt })) });\n  }\n  disconnectedCallback() { /* cleanup */ }\n}\ncustomElements.define('sortable-list', SortableList);\nContains thin wrapper web components for third-party libraries following the data-ignore-morph pattern with Datastar integration.\nLocal refs: ~/projects/lakescope-workspace/datastar-go-nats-template-northstar/web/components/","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-18T09:36:26.696995-05:00","updated_at":"2025-12-18T09:36:26.852063-05:00","dependencies":[{"issue_id":"ironstar-ny3.14","depends_on_id":"ironstar-ny3","type":"parent-child","created_at":"2025-12-18T09:36:26.697457-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-ny3.14","depends_on_id":"ironstar-ny3.8","type":"blocks","created_at":"2025-12-18T09:36:27.003939-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-ny3.15","title":"Configure Rolldown for Lit web component bundling","description":"Configure Rolldown for Lit web component bundling.\n\nUse Option A from lit-component-bundling.md: Extend Rolldown with TypeScript decorator support.\n\nThis aligns with build-tooling-decisions.md philosophy: 'Rust aligns with the stack's language choice (no Go in the dependency tree).'\n\nConfiguration:\n```javascript\n// rolldown.config.js\nexport default {\n  input: 'web-components/index.ts',\n  output: {\n    dir: 'static/dist',\n    format: 'esm',\n    entryFileNames: '[name].[hash].js',\n    assetFileNames: '[name].[hash][extname]'\n  },\n  plugins: [\n    typescript({ experimentalDecorators: true }),\n    postcss({ minimize: true })\n  ]\n}\n```\n\nDo NOT use esbuild as primary bundler.\n\nRef: docs/notes/architecture/frontend/lit-component-bundling.md\nRef: docs/notes/architecture/decisions/build-tooling-decisions.md","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-24T00:44:26.703512-05:00","updated_at":"2025-12-26T15:53:32.588637-05:00","dependencies":[{"issue_id":"ironstar-ny3.15","depends_on_id":"ironstar-ny3","type":"parent-child","created_at":"2025-12-24T00:44:26.705623-05:00","created_by":"daemon"}]}
{"id":"ironstar-ny3.16","title":"Configure OKLch color system with Open Props syntax","description":"Set up PostCSS color-mix and color() functions for OKLch perceptual uniformity per css-architecture.md.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-24T15:37:37.534915-05:00","updated_at":"2025-12-24T15:37:37.534915-05:00","dependencies":[{"issue_id":"ironstar-ny3.16","depends_on_id":"ironstar-ny3","type":"parent-child","created_at":"2025-12-24T15:37:37.535304-05:00","created_by":"daemon"}]}
{"id":"ironstar-ny3.17","title":"Implement light-dark() theming with prefers-color-scheme","description":"Configure postcss-preset-env for light-dark() function. Browser requirement: Chrome 123+, Safari 17.4+.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-24T15:37:39.973698-05:00","updated_at":"2025-12-24T15:37:39.973698-05:00","dependencies":[{"issue_id":"ironstar-ny3.17","depends_on_id":"ironstar-ny3","type":"parent-child","created_at":"2025-12-24T15:37:39.97424-05:00","created_by":"daemon"}]}
{"id":"ironstar-ny3.18","title":"Add CUBE CSS composition layer","description":"Implement CUBE CSS composition primitives as a dedicated CSS layer.\n\n## Rationale\n\nThe current CSS architecture has Open Props tokens and UI components but lacks explicit layout composition primitives.\nCUBE CSS methodology's Composition layer fills this gap, enabling:\n- Semantic layout classes in server-rendered HTML\n- Algebraic composition (primitives form a semiring over layout space)\n- Local reasoning in hypertext templates\n- Reduced ad-hoc CSS in components\n\n## Implementation\n\nAdd `compositions` layer between `theme` and `components`:\n```css\n@layer openprops, normalize, theme, compositions, components, utilities, app;\n```\n\nCreate 8 composition primitives in `web-components/styles/compositions/`:\n- stack.css, box.css, center.css, cluster.css\n- sidebar.css, switcher.css, cover.css, grid.css\n\nEach primitive:\n- Uses Open Props tokens exclusively\n- Exposes CSS custom properties for customization\n- Works with Light DOM inheritance\n\n## References\n\n- Architecture doc: docs/notes/architecture/frontend/css-architecture.md (updated with composition layer section)\n- CUBE patterns: ~/.claude/commands/preferences/hypermedia-development/04-css-architecture.md","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-06T11:12:04.26646-05:00","created_by":"crs58","updated_at":"2026-01-06T11:12:04.26646-05:00","dependencies":[{"issue_id":"ironstar-ny3.18","depends_on_id":"ironstar-ny3","type":"parent-child","created_at":"2026-01-06T11:12:04.267101-05:00","created_by":"crs58"},{"issue_id":"ironstar-ny3.18","depends_on_id":"ironstar-ny3.5","type":"blocks","created_at":"2026-01-06T11:12:04.277235-05:00","created_by":"crs58"}],"comments":[{"id":5,"issue_id":"ironstar-ny3.18","author":"crs58","text":"Implementation deferred until ny3.5 (CSS cascade layers) is closed. Documentation and architecture spec complete in docs/notes/architecture/frontend/css-architecture.md. CSS patterns available in ~/.claude/commands/preferences/hypermedia-development/04-css-architecture.md.","created_at":"2026-01-06T16:43:52Z"}]}
{"id":"ironstar-ny3.2","title":"Configure Rolldown bundler with content-based hashing","description":"Create rolldown.config.ts with content-based hashing ([name].[hash].js). Use Rolldown native CSS bundling (experimental). Add rollup-plugin-output-manifest for manifest.json generation. Output to ../static/dist/. Does NOT include PostCSS plugin config (ny3.3 adds that). Update package.json scripts to use config.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-18T09:36:21.104754-05:00","updated_at":"2026-01-19T14:40:05.897232-05:00","closed_at":"2026-01-19T14:40:05.897232-05:00","close_reason":"Implemented in 42bea2e..df46f6e. Created rolldown.config.ts with content-based hashing, manifest plugin, ESM output to static/dist/.","dependencies":[{"issue_id":"ironstar-ny3.2","depends_on_id":"ironstar-ny3","type":"parent-child","created_at":"2025-12-18T09:36:21.105117-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-ny3.2","depends_on_id":"ironstar-ny3.1","type":"blocks","created_at":"2025-12-18T09:36:21.403116-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-ny3.3","title":"Setup PostCSS configuration for modern CSS features","description":"Create web-components/postcss.config.js with plugins: postcss-import, postcss-preset-env (stage 0 for OKLch/light-dark/custom-media), autoprefixer, cssnano. Enables Open Props and modern CSS features.\nLocal refs: ~/projects/lakescope-workspace/open-props/","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-18T09:36:21.568714-05:00","updated_at":"2025-12-18T09:36:21.724648-05:00","dependencies":[{"issue_id":"ironstar-ny3.3","depends_on_id":"ironstar-ny3","type":"parent-child","created_at":"2025-12-18T09:36:21.569098-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-ny3.3","depends_on_id":"ironstar-ny3.1","type":"blocks","created_at":"2025-12-18T09:36:21.869588-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-ny3.4","title":"Setup Open Props design tokens and theme layer","description":"Create web-components/styles/main.css importing Open Props design tokens. Create web-components/styles/theme.css with CSS custom properties using light-dark() function for automatic dark mode. Establish CSS cascade layers: openprops, normalize, theme, components, utilities, app.\nLocal refs: ~/projects/lakescope-workspace/open-props, ~/projects/lakescope-workspace/open-props-ui","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-18T09:36:22.032332-05:00","updated_at":"2025-12-18T09:36:22.186107-05:00","dependencies":[{"issue_id":"ironstar-ny3.4","depends_on_id":"ironstar-ny3","type":"parent-child","created_at":"2025-12-18T09:36:22.032694-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-ny3.4","depends_on_id":"ironstar-ny3.3","type":"blocks","created_at":"2025-12-18T09:36:22.3311-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-ny3.5","title":"Configure CSS cascade layers for predictable specificity","description":"Configure CSS cascade layers for predictable style ordering.\n\nUse 6-layer system per css-architecture.md:\n\n```css\n@layer openprops, normalize, theme, components, utilities, app;\n```\n\nLayer precedence (later overrides earlier):\n1. openprops - Design token definitions\n2. normalize - CSS reset/normalize\n3. theme - Custom theme overrides\n4. components - Open Props UI component styles\n5. utilities - Utility classes\n6. app - Application-specific overrides\n\nImport order in main.css must match layer order.\n\nRef: docs/notes/architecture/frontend/css-architecture.md","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-18T09:36:22.491028-05:00","updated_at":"2025-12-26T15:53:30.951929-05:00","dependencies":[{"issue_id":"ironstar-ny3.5","depends_on_id":"ironstar-ny3","type":"parent-child","created_at":"2025-12-18T09:36:22.491394-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-ny3.5","depends_on_id":"ironstar-ny3.4","type":"blocks","created_at":"2025-12-18T09:36:22.79319-05:00","created_by":"daemon","metadata":"{}"}],"comments":[{"id":3,"issue_id":"ironstar-ny3.5","author":"crs58","text":"Note: Layer structure will be updated from 6 to 7 layers to include compositions layer. See ironstar-ny3.18 for composition layer implementation.","created_at":"2026-01-06T16:12:45Z"}]}
{"id":"ironstar-ny3.6","title":"Copy Open Props UI component CSS files","description":"Copy component CSS from ~/projects/lakescope-workspace/open-props-ui into web-components/styles/components/ (button.css, card.css, dialog.css, input.css, field.css, etc). Customize for ironstar theming. This follows the copy-paste ownership model where project owns and customizes component CSS.\nLocal refs: ~/projects/lakescope-workspace/open-props-ui","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-18T09:36:22.953999-05:00","updated_at":"2025-12-18T09:36:23.114701-05:00","dependencies":[{"issue_id":"ironstar-ny3.6","depends_on_id":"ironstar-ny3","type":"parent-child","created_at":"2025-12-18T09:36:22.95437-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-ny3.6","depends_on_id":"ironstar-ny3.5","type":"blocks","created_at":"2025-12-18T09:36:23.266454-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-ny3.7","title":"Create TypeScript configuration (tsconfig.json)","description":"Create tsconfig.json for web-components/ TypeScript.\n\nConfiguration per lit-component-bundling.md:\n\n```json\n{\n  \"compilerOptions\": {\n    \"target\": \"ES2022\",\n    \"module\": \"ESNext\",\n    \"moduleResolution\": \"bundler\",\n    \"experimentalDecorators\": true,\n    \"useDefineForClassFields\": false,\n    \"strict\": true,\n    \"paths\": {\n      \"@types/*\": [\"./types/*\"]\n    }\n  },\n  \"include\": [\"**/*.ts\"],\n  \"exclude\": [\"node_modules\"]\n}\n```\n\nThe paths mapping enables importing ts-rs generated types:\n```typescript\nimport type { TodoSignals } from '@types/todo';\n```\n\nRef: docs/notes/architecture/frontend/lit-component-bundling.md\nRef: docs/notes/architecture/frontend/signal-contracts.md","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-18T09:36:23.42034-05:00","updated_at":"2025-12-26T15:53:37.09087-05:00","dependencies":[{"issue_id":"ironstar-ny3.7","depends_on_id":"ironstar-ny3","type":"parent-child","created_at":"2025-12-18T09:36:23.420702-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-ny3.7","depends_on_id":"ironstar-ny3.1","type":"blocks","created_at":"2025-12-18T09:36:23.724968-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-ny3.8","title":"Create web-components/index.ts entry point","description":"Create index.ts that imports main.css (processed by PostCSS plugin) and auto-registers vanilla web components by importing from components/ subdirectory. Export TypeScript types from web-components/types/ for frontend type safety.\nLocal refs: ~/projects/lakescope-workspace/datastar-go-nats-template-northstar/web/index.ts","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-18T09:36:23.889453-05:00","updated_at":"2025-12-18T09:36:24.043635-05:00","dependencies":[{"issue_id":"ironstar-ny3.8","depends_on_id":"ironstar-ny3","type":"parent-child","created_at":"2025-12-18T09:36:23.88983-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-ny3.8","depends_on_id":"ironstar-ny3.7","type":"blocks","created_at":"2025-12-18T09:36:24.187742-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-ny3.9","title":"Add ts-rs dependency to Cargo.toml","description":"Add ts-rs 11.1+ with features serde-compat and uuid-impl. Enables deriving TS traits on Rust types to generate TypeScript definitions. Ensures frontend and backend signal contracts stay synchronized.\nLocal refs: ~/projects/rust-workspace/ts-rs","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-18T09:36:24.34794-05:00","updated_at":"2025-12-18T09:36:24.501019-05:00","dependencies":[{"issue_id":"ironstar-ny3.9","depends_on_id":"ironstar-ny3","type":"parent-child","created_at":"2025-12-18T09:36:24.348287-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-nyp","title":"Event sourcing infrastructure","description":"Event sourcing infrastructure: SQLite event store, Zenoh event bus, projections, SSE streaming\n\n**Strategic classification:** Generic infrastructure (reusable across all domains)\n\n**Hoffman Laws coverage:**\n- Law 1: Events immutable ✓ (append-only SQLite)\n- Law 2: Event schemas immutable ✓ (upcaster pattern)\n- Law 3: All projection data from events ✓ (rebuild from stream)\n- Law 5: Projections stem from events ✓ (disposable, rebuildable)\n- Law 6: Failure events preserve state ✓ (QueryFailed pattern)\n- Law 7: Work is side effect ✓ (pure aggregates)\n- Law 8: One flow per process manager — DEFERRED to v2\n- Law 9: Process managers consume events, emit commands — DEFERRED to v2\n- Law 10: Aggregates own streams ✓ (compound key constraint)\n\n**Algebraic foundation:**\n- Events as free monoid (append-only, no inverse)\n- Projections as Galois connections (lossy abstraction)\n- State reconstruction as catamorphism (fold)\n\n**Reference:** Kevin Hoffman, Real World Event Sourcing (2024)","status":"open","priority":0,"issue_type":"epic","created_at":"2025-12-18T09:36:27.172501-05:00","updated_at":"2026-01-03T18:44:55.09195-05:00","dependencies":[{"issue_id":"ironstar-nyp","depends_on_id":"ironstar-2nt","type":"blocks","created_at":"2025-12-18T09:36:27.481496-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-nyp.1","title":"Create database migrations/ directory with schema.sql","description":"Create database migrations/ directory with schema.sql\n\nInclude both:\n- global_sequence (PRIMARY KEY AUTOINCREMENT) for SSE Last-Event-ID\n- aggregate_sequence (UNIQUE per aggregate_type, aggregate_id) for optimistic locking\n\nSee event-sourcing-core.md hybrid schema section.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-18T09:36:27.643937-05:00","updated_at":"2026-01-06T13:46:01.493636-05:00","closed_at":"2026-01-06T13:46:01.493636-05:00","close_reason":"Superseded by ironstar-a9b.3 which implements fmodel-rust schema with previous_id optimistic locking instead of aggregate_sequence.","dependencies":[{"issue_id":"ironstar-nyp.1","depends_on_id":"ironstar-nyp","type":"parent-child","created_at":"2025-12-18T09:36:27.644313-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-nyp.1","depends_on_id":"ironstar-2nt.11","type":"blocks","created_at":"2025-12-26T15:55:08.572823-05:00","created_by":"daemon"},{"issue_id":"ironstar-nyp.1","depends_on_id":"ironstar-nyp.35","type":"blocks","created_at":"2025-12-27T14:21:01.976848-05:00","created_by":"daemon"}]}
{"id":"ironstar-nyp.10","title":"Add session TTL cleanup background task","description":"Spawn tokio background task running every hour to delete expired sessions:\ntokio::spawn(async move {\n    let mut interval = tokio::time::interval(Duration::from_secs(3600));\n    loop {\n        interval.tick().await;\n        session_store.delete_expired(SystemTime::now() - Duration::from_secs(86400 * 30)).await;\n    }\n});\nPrevents unbounded session store growth in long-running servers.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-18T09:36:32.085909-05:00","updated_at":"2025-12-18T09:36:32.245218-05:00","dependencies":[{"issue_id":"ironstar-nyp.10","depends_on_id":"ironstar-nyp","type":"parent-child","created_at":"2025-12-18T09:36:32.086294-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-nyp.10","depends_on_id":"ironstar-nyp.9","type":"blocks","created_at":"2025-12-18T09:36:32.379555-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-nyp.11","title":"Create Session axum extractor","description":"Implement FromRequestParts for Session type extracting session_id from CookieJar. Load or initialize SessionData from SessionStore. Return Session struct with id and data fields for use in handlers.\nLocal refs: ~/projects/rust-workspace/axum","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-18T09:36:32.540782-05:00","updated_at":"2025-12-18T09:36:32.686379-05:00","dependencies":[{"issue_id":"ironstar-nyp.11","depends_on_id":"ironstar-nyp","type":"parent-child","created_at":"2025-12-18T09:36:32.54116-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-nyp.11","depends_on_id":"ironstar-nyp.10","type":"blocks","created_at":"2025-12-18T09:36:32.83397-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-nyp.12","title":"Implement DuckDB analytics service","description":"Implement DuckDBService wrapper around async-duckdb::Pool. Use PoolBuilder to configure connection count and database path. Wrap Pool in Arc for sharing across handlers. Expose query methods that use pool.conn(|conn| { ... }).await pattern for non-blocking analytics queries. Do NOT use spawn_blocking or block_in_place - async-duckdb handles threading internally via dedicated background threads.\n\nSee docs/notes/architecture/cqrs/projection-patterns.md (DuckDB analytics integration section) and docs/notes/architecture/infrastructure/analytics-cache-patterns.md for implementation patterns.\n\nLocal refs: ~/projects/rust-workspace/async-duckdb","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-18T09:36:33.001834-05:00","updated_at":"2025-12-27T12:50:38.091806-05:00","dependencies":[{"issue_id":"ironstar-nyp.12","depends_on_id":"ironstar-nyp","type":"parent-child","created_at":"2025-12-18T09:36:33.002215-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-nyp.12","depends_on_id":"ironstar-2nt.2","type":"blocks","created_at":"2025-12-18T09:36:33.300805-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-nyp.12","depends_on_id":"ironstar-961","type":"blocks","created_at":"2025-12-24T00:56:19.614149-05:00","created_by":"daemon"},{"issue_id":"ironstar-nyp.12","depends_on_id":"ironstar-3gd","type":"parent-child","created_at":"2025-12-24T10:02:59.02895-05:00","created_by":"daemon"}]}
{"id":"ironstar-nyp.13","title":"Document error handling decisions","description":"Error type hierarchy, Result propagation patterns. See ~/projects/rust-workspace/ironstar/docs/notes/architecture/decisions/error-handling-decisions.md and error-types.md","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-22T00:28:36.097911-05:00","updated_at":"2025-12-22T00:28:36.097911-05:00","dependencies":[{"issue_id":"ironstar-nyp.13","depends_on_id":"ironstar-nyp","type":"parent-child","created_at":"2025-12-22T00:28:36.098558-05:00","created_by":"crs58"}]}
{"id":"ironstar-nyp.14","title":"Implement metrics and observability reference","description":"Implement /metrics endpoint for Prometheus scraping. Counters: ironstar_events_appended_total, ironstar_commands_processed_total. Gauges: ironstar_sse_connections_active, ironstar_projection_lag_events. Histogram for command latency. See observability-decisions.md and metrics-reference.md.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-22T00:28:42.110536-05:00","updated_at":"2025-12-24T00:54:31.499297-05:00","dependencies":[{"issue_id":"ironstar-nyp.14","depends_on_id":"ironstar-nyp","type":"parent-child","created_at":"2025-12-22T00:28:42.111123-05:00","created_by":"crs58"}]}
{"id":"ironstar-nyp.15","title":"Implement moka analytics cache with rkyv serialization","description":"Implement moka analytics cache with rkyv serialization, memoizing the query profunctor via TTL-based cache invalidation.\n\nCache structure implements memoization:\n- Key: (Query, DatasetRef, ChartConfig)\n- Value: QueryResult (serialized via rkyv for zero-copy)\n- Invalidation: TTL (5 min) approximates naturality failure\n\nCache invalidation = naturality failure: cached result invalid when underlying data changes such that the naturality square no longer commutes.\n\nReference: denotational-semantics.md 'Analytics as quotients with memoization' section.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-23T23:23:50.438487-05:00","updated_at":"2025-12-29T17:56:50.072578-05:00","dependencies":[{"issue_id":"ironstar-nyp.15","depends_on_id":"ironstar-nyp","type":"parent-child","created_at":"2025-12-23T23:23:50.438994-05:00","created_by":"daemon"},{"issue_id":"ironstar-nyp.15","depends_on_id":"ironstar-nyp.12","type":"blocks","created_at":"2025-12-23T23:24:04.323929-05:00","created_by":"daemon"},{"issue_id":"ironstar-nyp.15","depends_on_id":"ironstar-nyp.27","type":"blocks","created_at":"2025-12-26T15:26:29.618179-05:00","created_by":"daemon"}]}
{"id":"ironstar-nyp.16","title":"Implement DualEventBus for tokio::broadcast to Zenoh migration","description":"Implement DualEventBus coexistence pattern from distributed-event-bus-migration.md. Phase 1: add Zenoh alongside broadcast. Phase 2: incremental subscriber migration. Phase 3: remove broadcast. Deferred until scaling beyond ~256 SSE subscribers.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-24T00:44:06.499409-05:00","updated_at":"2025-12-26T15:26:17.223042-05:00","closed_at":"2025-12-26T15:26:17.223042-05:00","close_reason":"Superseded by Zenoh-first architecture. Zenoh embedded mode is the primary event bus from day one per infrastructure-decisions.md. DualEventBus migration pattern not needed for new ironstar instantiations.","dependencies":[{"issue_id":"ironstar-nyp.16","depends_on_id":"ironstar-nyp","type":"parent-child","created_at":"2025-12-24T00:44:06.50124-05:00","created_by":"daemon"}]}
{"id":"ironstar-nyp.17","title":"Implement EventUpcaster trait and UpcasterChain for schema evolution","description":"Implement Upcaster pattern from event-sourcing-core.md for backward-compatible event schema evolution. EventUpcaster trait with can_upcast(\u0026self, event_type, event_version) -\u003e bool and upcast(\u0026self, payload: Value) -\u003e Value methods. UpcasterChain registry for sequential upcaster application. Events store event_version in metadata; upcasters transform old schemas to current during load_events_with_upcasting. Lazy application during event loading preserves event store immutability (events are facts that cannot change). Categorical structure: versions as objects, upcasters as morphisms, composition as sequential application, identity as no-op for current version. Example: TodoCreatedV1ToV2 adds default priority field when v1 event lacks it.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-24T00:44:13.573086-05:00","updated_at":"2025-12-26T18:31:20.157539-05:00","dependencies":[{"issue_id":"ironstar-nyp.17","depends_on_id":"ironstar-nyp","type":"parent-child","created_at":"2025-12-24T00:44:13.575845-05:00","created_by":"daemon"},{"issue_id":"ironstar-nyp.17","depends_on_id":"ironstar-2nt.2","type":"blocks","created_at":"2025-12-24T10:04:00.881381-05:00","created_by":"daemon"}]}
{"id":"ironstar-nyp.18","title":"Implement SSE ConnectionTracker with atomic counter","description":"Implement ConnectionTracker from sse-connection-lifecycle.md. Atomic counter for active SSE connections. RAII ConnectionGuard for automatic cleanup on disconnect. Metrics endpoint exposure for capacity planning and debugging.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-24T00:44:19.116175-05:00","updated_at":"2025-12-24T00:44:19.116175-05:00","dependencies":[{"issue_id":"ironstar-nyp.18","depends_on_id":"ironstar-nyp","type":"parent-child","created_at":"2025-12-24T00:44:19.118985-05:00","created_by":"daemon"}]}
{"id":"ironstar-nyp.19","title":"Create EventBus trait abstraction","description":"Create EventBus trait abstraction for pub/sub.\n\nPRIMARY: Zenoh embedded mode from day one per infrastructure-decisions.md.\n\nTrait methods:\n- publish(key: \u0026str, event: \u0026Event) -\u003e Result\u003c(), BusError\u003e\n- subscribe(pattern: \u0026str) -\u003e Result\u003cReceiver\u003cEvent\u003e, BusError\u003e\n\nDualEventBus pattern is OPTIONAL - only for legacy integration scenarios where tokio::broadcast coexistence is needed. New ironstar instantiations use Zenoh-only.\n\nKey expression patterns: events/{aggregate_type}/{aggregate_id}/{sequence}\n\nRef: docs/notes/architecture/infrastructure/zenoh-event-bus.md\nRef: docs/notes/architecture/decisions/infrastructure-decisions.md","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-24T00:54:31.447058-05:00","updated_at":"2026-01-19T13:41:50.460223-05:00","closed_at":"2026-01-19T13:41:50.460223-05:00","close_reason":"Verified complete in 9a9f930: EventBus trait with publish-only design, session access documented","dependencies":[{"issue_id":"ironstar-nyp.19","depends_on_id":"ironstar-nyp","type":"parent-child","created_at":"2025-12-24T00:54:31.44751-05:00","created_by":"daemon"},{"issue_id":"ironstar-nyp.19","depends_on_id":"ironstar-2nt.2","type":"blocks","created_at":"2025-12-24T00:56:24.399452-05:00","created_by":"daemon"}]}
{"id":"ironstar-nyp.2","title":"Create EventStore trait abstraction","description":"Create EventStore trait abstraction for event persistence.\n\nTrait must include these methods:\n- append(events: Vec\u003cEvent\u003e) -\u003e Result\u003c(), StoreError\u003e\n- load(aggregate_id: \u0026str) -\u003e Result\u003cVec\u003cEvent\u003e, StoreError\u003e\n- query_since_sequence(seq: u64) -\u003e Result\u003cVec\u003cEvent\u003e, StoreError\u003e\n- earliest_sequence() -\u003e Result\u003cu64, StoreError\u003e  -- For stale Last-Event-ID detection\n- latest_sequence() -\u003e Result\u003cu64, StoreError\u003e    -- For gap detection\n\nThe earliest/latest sequence methods are required for edge case handling per event-replay-consistency.md:\n- Detect stale Last-Event-ID (client requesting seq \u003c earliest)\n- Detect sequence gaps in event stream\n\nRef: docs/notes/architecture/cqrs/event-sourcing-core.md\nRef: docs/notes/architecture/cqrs/event-replay-consistency.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-18T09:36:27.945853-05:00","updated_at":"2026-01-05T11:10:25.587647-05:00","closed_at":"2026-01-05T11:10:25.587647-05:00","close_reason":"Superseded by ironstar-a9b.1 (fmodel-rust EventRepository). Provides fetch_events/save/version_provider plus extension methods.","dependencies":[{"issue_id":"ironstar-nyp.2","depends_on_id":"ironstar-nyp","type":"parent-child","created_at":"2025-12-18T09:36:27.946231-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-nyp.2","depends_on_id":"ironstar-2nt.2","type":"blocks","created_at":"2025-12-18T09:36:28.246139-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-nyp.2","depends_on_id":"ironstar-2nt.11","type":"blocks","created_at":"2025-12-26T15:55:09.844942-05:00","created_by":"daemon"}]}
{"id":"ironstar-nyp.20","title":"Implement Prometheus metrics endpoint and instrumentation","description":"Add /metrics endpoint with prometheus crate. Instrument: events_appended_total (Counter), sse_connections (Gauge), projection_lag (Gauge), broadcast_lag_events (Histogram). See docs/notes/architecture/decisions/metrics-reference.md.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-24T10:02:30.888949-05:00","updated_at":"2025-12-24T10:02:30.888949-05:00","dependencies":[{"issue_id":"ironstar-nyp.20","depends_on_id":"ironstar-nyp","type":"parent-child","created_at":"2025-12-24T10:02:30.889541-05:00","created_by":"daemon"},{"issue_id":"ironstar-nyp.20","depends_on_id":"ironstar-r62.15","type":"discovered-from","created_at":"2025-12-24T10:03:59.645931-05:00","created_by":"daemon"}]}
{"id":"ironstar-nyp.21","title":"Implement observability initialization module","description":"Create infrastructure/observability.rs with init_dev_logging(), init_prod_logging(log_dir), and init_observability_with_config(config) functions. Configure EnvFilter, rolling file appender for prod, JSON output. See docs/notes/architecture/decisions/observability-decisions.md.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-24T10:02:34.943844-05:00","updated_at":"2025-12-24T10:02:34.943844-05:00","dependencies":[{"issue_id":"ironstar-nyp.21","depends_on_id":"ironstar-nyp","type":"parent-child","created_at":"2025-12-24T10:02:34.944394-05:00","created_by":"daemon"},{"issue_id":"ironstar-nyp.21","depends_on_id":"ironstar-r62.13","type":"blocks","created_at":"2025-12-24T10:03:55.763968-05:00","created_by":"daemon"},{"issue_id":"ironstar-nyp.21","depends_on_id":"ironstar-2nt.8","type":"blocks","created_at":"2025-12-24T15:38:28.645389-05:00","created_by":"daemon"}]}
{"id":"ironstar-nyp.22","title":"Implement InfrastructureError type with database/network variants","description":"Create InfrastructureError enum per error-types.md with DatabaseError, NetworkError, SerializationError variants.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-24T15:37:40.280938-05:00","updated_at":"2025-12-24T15:37:40.280938-05:00","dependencies":[{"issue_id":"ironstar-nyp.22","depends_on_id":"ironstar-nyp","type":"parent-child","created_at":"2025-12-24T15:37:40.281388-05:00","created_by":"daemon"}]}
{"id":"ironstar-nyp.23","title":"Configure dev vs prod logging subscribers","description":"Implement conditional logging: pretty stdout for dev, JSON rolling files for prod via #[cfg(debug_assertions)].","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-24T15:37:42.767951-05:00","updated_at":"2025-12-24T15:37:42.767951-05:00","dependencies":[{"issue_id":"ironstar-nyp.23","depends_on_id":"ironstar-nyp","type":"parent-child","created_at":"2025-12-24T15:37:42.77126-05:00","created_by":"daemon"}]}
{"id":"ironstar-nyp.24","title":"Add CQRS pipeline span context propagation","description":"Instrument command-\u003eevent-\u003eprojection flow with tracing spans including command_id, aggregate_id, user_id.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-24T15:37:45.919849-05:00","updated_at":"2025-12-24T15:37:45.919849-05:00","dependencies":[{"issue_id":"ironstar-nyp.24","depends_on_id":"ironstar-nyp","type":"parent-child","created_at":"2025-12-24T15:37:45.920309-05:00","created_by":"daemon"}]}
{"id":"ironstar-nyp.25","title":"Define Zenoh key expression patterns for event routing","description":"Key expressions: ironstar/{aggregate_type}/{aggregate_id}/events for scoped pub/sub.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-24T15:37:48.806898-05:00","updated_at":"2026-01-19T13:40:08.439325-05:00","closed_at":"2026-01-19T13:40:08.439325-05:00","close_reason":"Implemented in 0733b31..4e291a5: key_expr module with EventKeyExpr type, 19 tests","dependencies":[{"issue_id":"ironstar-nyp.25","depends_on_id":"ironstar-nyp","type":"parent-child","created_at":"2025-12-24T15:37:48.809115-05:00","created_by":"daemon"}]}
{"id":"ironstar-nyp.26","title":"Create Zenoh embedded router configuration","description":"Configure zenoh::Config for embedded mode with peer discovery disabled per distributed-event-bus-migration.md.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-24T15:37:52.378727-05:00","updated_at":"2026-01-19T13:29:38.189521-05:00","closed_at":"2026-01-19T13:29:38.189521-05:00","close_reason":"Already implemented in event_bus.rs: zenoh_embedded_config() at L130-150","dependencies":[{"issue_id":"ironstar-nyp.26","depends_on_id":"ironstar-nyp","type":"parent-child","created_at":"2025-12-24T15:37:52.381114-05:00","created_by":"daemon"}]}
{"id":"ironstar-nyp.27","title":"Implement ZenohEventBus struct with publish/subscribe methods","description":"Wrap zenoh::Session in Arc. Implement subscribe(\u0026self, pattern: \u0026str) returning Subscriber. Implement publish(\u0026self, key: \u0026str, payload: Vec\u003cu8\u003e) returning Result. See docs/notes/architecture/infrastructure/zenoh-event-bus.md for implementation patterns. Local refs: ~/projects/rust-workspace/zenoh","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-26T15:25:15.404433-05:00","updated_at":"2026-01-19T13:42:58.283526-05:00","closed_at":"2026-01-19T13:42:58.283526-05:00","close_reason":"Already implemented: ZenohEventBus with Arc\u003cSession\u003e, session() method, EventBus::publish impl, 5 tests","dependencies":[{"issue_id":"ironstar-nyp.27","depends_on_id":"ironstar-nyp","type":"parent-child","created_at":"2025-12-26T15:25:15.40791-05:00","created_by":"daemon"},{"issue_id":"ironstar-nyp.27","depends_on_id":"ironstar-nyp.19","type":"blocks","created_at":"2025-12-26T15:26:15.261851-05:00","created_by":"daemon"},{"issue_id":"ironstar-nyp.27","depends_on_id":"ironstar-2nt.2","type":"blocks","created_at":"2025-12-26T15:26:16.982041-05:00","created_by":"daemon"},{"issue_id":"ironstar-nyp.27","depends_on_id":"ironstar-nyp.26","type":"blocks","created_at":"2025-12-26T15:26:17.938691-05:00","created_by":"daemon"},{"issue_id":"ironstar-nyp.27","depends_on_id":"ironstar-nyp.25","type":"blocks","created_at":"2025-12-26T15:26:19.480019-05:00","created_by":"daemon"}]}
{"id":"ironstar-nyp.28","title":"Implement per-session Zenoh subscriptions for SSE streams","description":"Subscribe to session-scoped key expressions in SSE handler. Key pattern: ironstar/sessions/{session_id}/**. Enables targeted event delivery per client connection. See docs/notes/architecture/infrastructure/session-management.md and zenoh-event-bus.md.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-26T15:25:19.303587-05:00","updated_at":"2025-12-26T15:25:19.303587-05:00","dependencies":[{"issue_id":"ironstar-nyp.28","depends_on_id":"ironstar-nyp","type":"parent-child","created_at":"2025-12-26T15:25:19.304074-05:00","created_by":"daemon"}]}
{"id":"ironstar-nyp.29","title":"Implement error propagation pattern through CQRS pipeline","description":"Orchestrate error types from domain → application → infrastructure → presentation layers.\n\nEnsure UUID tracking propagates through all layers. Pattern:\n- Domain: AggregateError with validation failures\n- Application: CommandError wrapping AggregateError  \n- Infrastructure: map to InfrastructureError\n- Presentation: convert to HTTP response with error_id\n\nRef: docs/notes/architecture/decisions/error-handling-decisions.md § Error propagation across CQRS layers","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-26T15:53:15.804135-05:00","updated_at":"2026-01-19T13:29:39.044071-05:00","closed_at":"2026-01-19T13:29:39.044071-05:00","close_reason":"Implemented in 3057b21..f72f3c0: UUID preservation through CQRS pipeline","dependencies":[{"issue_id":"ironstar-nyp.29","depends_on_id":"ironstar-nyp","type":"parent-child","created_at":"2025-12-26T15:53:15.806369-05:00","created_by":"daemon"},{"issue_id":"ironstar-nyp.29","depends_on_id":"ironstar-a9b","type":"blocks","created_at":"2026-01-05T11:13:32.320171-05:00","created_by":"crs58"},{"issue_id":"ironstar-nyp.29","depends_on_id":"ironstar-b43","type":"blocks","created_at":"2026-01-05T11:13:34.182433-05:00","created_by":"crs58"}]}
{"id":"ironstar-nyp.3","title":"Implement SQLite EventRepository with sqlx","description":"Create SqliteEventRepository struct implementing fmodel-rust's EventRepository trait:\n\n```rust\nimpl\u003cC, E\u003e EventRepository\u003cC, E, Uuid, EventStoreError\u003e for SqliteEventRepository\nwhere\n    C: Identifier + DeciderType + Sync,\n    E: Identifier + EventType + DeciderType + IsFinal + Serialize + DeserializeOwned + Clone + Sync,\n{\n    fn fetch_events(\u0026self, command: \u0026C) -\u003e impl Future\u003cOutput = Result\u003cVec\u003c(E, Uuid)\u003e, Error\u003e\u003e;\n    fn save(\u0026self, events: \u0026[E]) -\u003e impl Future\u003cOutput = Result\u003cVec\u003c(E, Uuid)\u003e, Error\u003e\u003e;\n    fn version_provider(\u0026self, event: \u0026E) -\u003e impl Future\u003cOutput = Result\u003cOption\u003cUuid\u003e, Error\u003e\u003e;\n}\n```\n\nExtension methods for SSE Last-Event-ID support:\n- query_since_sequence(offset: i64) -\u003e Vec\u003cStoredEvent\u003e\n- earliest_sequence() -\u003e Option\u003ci64\u003e\n- latest_sequence() -\u003e Option\u003ci64\u003e\n- query_all() -\u003e Vec\u003cStoredEvent\u003e\n\nUse sqlx compile-time query validation with query!() macro.\nThis is a wrapper/extension of ironstar-a9b.1 for projection support.\n\nLocal refs: ~/projects/rust-workspace/sqlx\n","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-18T09:36:28.41632-05:00","updated_at":"2026-01-06T13:46:01.591169-05:00","closed_at":"2026-01-06T13:46:01.591169-05:00","close_reason":"Superseded by ironstar-a9b.1 which implements full EventRepository including SSE extension methods (query_since_sequence, earliest_sequence, latest_sequence, query_all).","dependencies":[{"issue_id":"ironstar-nyp.3","depends_on_id":"ironstar-nyp","type":"parent-child","created_at":"2025-12-18T09:36:28.416716-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-nyp.3","depends_on_id":"ironstar-nyp.1","type":"blocks","created_at":"2025-12-18T09:36:28.854866-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-nyp.3","depends_on_id":"ironstar-a9b.1","type":"blocks","created_at":"2026-01-05T11:12:01.979977-05:00","created_by":"crs58"}]}
{"id":"ironstar-nyp.30","title":"Implement observability initialization with dev/prod splitting","description":"Set up tracing subscriber with environment-based configuration.\n\nDevelopment mode:\n- Pretty printing with colors\n- RUST_LOG filtering\n- Full backtraces\n\nProduction mode:\n- JSON structured output\n- Span context for correlation\n- Error-level minimum by default\n\nRef: docs/notes/architecture/decisions/observability-decisions.md § Development vs production configuration","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-26T15:53:17.325352-05:00","updated_at":"2025-12-26T15:53:17.325352-05:00","dependencies":[{"issue_id":"ironstar-nyp.30","depends_on_id":"ironstar-nyp","type":"parent-child","created_at":"2025-12-26T15:53:17.327605-05:00","created_by":"daemon"}]}
{"id":"ironstar-nyp.31","title":"Implement health check endpoints (/health, /health/ready, /health/live)","description":"Create Kubernetes-compatible health check endpoints.\n\nEndpoints:\n- /health - overall status\n- /health/ready - readiness probe (dependencies available)\n- /health/live - liveness probe (process healthy)\n\nCheck components:\n- SQLite connectivity\n- Zenoh event bus status\n- moka cache status\n\nReturn JSON with component statuses and overall health.\n\nRef: docs/notes/architecture/decisions/observability-decisions.md § Health check implementation","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-26T15:53:18.955509-05:00","updated_at":"2026-01-19T13:49:59.029581-05:00","closed_at":"2026-01-19T13:49:59.029581-05:00","close_reason":"Implemented in 711432b..e3ed0ea: /health, /health/ready, /health/live endpoints, 5 tests","dependencies":[{"issue_id":"ironstar-nyp.31","depends_on_id":"ironstar-nyp","type":"parent-child","created_at":"2025-12-26T15:53:18.957536-05:00","created_by":"daemon"}]}
{"id":"ironstar-nyp.32","title":"Instrument Zenoh event bus with Prometheus metrics","description":"Add observability metrics for Zenoh event bus operations.\n\nMetrics to implement:\n- ZENOH_PUBLICATIONS_TOTAL (counter)\n- ZENOH_SUBSCRIBER_COUNT (gauge)\n- ZENOH_SAMPLE_LATENCY_SECONDS (histogram)\n\nUse prometheus crate with METRICS_REGISTRY pattern.\n\nRef: docs/notes/architecture/infrastructure/zenoh-event-bus.md § Monitoring and metrics","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-26T15:53:24.715118-05:00","updated_at":"2025-12-26T15:53:24.715118-05:00","dependencies":[{"issue_id":"ironstar-nyp.32","depends_on_id":"ironstar-nyp","type":"parent-child","created_at":"2025-12-26T15:53:24.717811-05:00","created_by":"daemon"}]}
{"id":"ironstar-nyp.33","title":"Implement session cleanup background task","description":"Spawn background task to clean up expired sessions.\n\nPattern from session-implementation.md:\n```rust\nasync fn spawn_session_cleanup(pool: SqlitePool, interval: Duration) {\n    let mut ticker = tokio::time::interval(interval);\n    loop {\n        ticker.tick().await;\n        let _ = sqlx::query!(\"DELETE FROM sessions WHERE expires_at \u003c ?\", Utc::now())\n            .execute(\u0026pool)\n            .await;\n    }\n}\n```\n\nRun on configurable interval (default: 1 hour).\n\nRef: docs/notes/architecture/infrastructure/session-implementation.md","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T15:53:26.129799-05:00","updated_at":"2025-12-26T18:29:31.830732-05:00","closed_at":"2025-12-26T18:29:31.830732-05:00","close_reason":"Duplicate of ironstar-nyp.10 (session cleanup background task). Raw SQL pattern from nyp.33 informs SessionStore::delete_expired() implementation in nyp.10.","dependencies":[{"issue_id":"ironstar-nyp.33","depends_on_id":"ironstar-nyp","type":"parent-child","created_at":"2025-12-26T15:53:26.132179-05:00","created_by":"daemon"}]}
{"id":"ironstar-nyp.34","title":"Implement spawn-after-persist for DuckDB query execution","description":"After QueryStarted event, tokio::spawn background task for DuckDB execution. Emits QueryCompleted/Failed via Zenoh. Returns 202 immediately.","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-27T12:50:35.759008-05:00","created_by":"crs58","updated_at":"2025-12-27T12:50:35.759008-05:00","dependencies":[{"issue_id":"ironstar-nyp.34","depends_on_id":"ironstar-nyp","type":"parent-child","created_at":"2025-12-27T12:50:35.762-05:00","created_by":"daemon"},{"issue_id":"ironstar-nyp.34","depends_on_id":"ironstar-nyp.3","type":"depends-on","created_at":"2025-12-27T12:50:46.718499-05:00","created_by":"daemon"}]}
{"id":"ironstar-nyp.35","title":"Implement hybrid event store schema with dual sequence columns","description":"Implement hybrid event store schema with dual sequence columns establishing the free monoid identity/composition structure and bitemporal semantics.\n\nFree monoid structure:\n- Identity: empty event sequence []\n- Composition: event concatenation ++\n- global_sequence: monotonic total order (processing time)\n- aggregate_sequence: per-aggregate versioning (optimistic locking)\n\nBitemporal axes:\n- Event time: created_at (when domain event occurred)\n- Processing time: global_sequence (when event persisted)\n\nReference: denotational-semantics.md 'Event log as free monoid' section.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-27T14:20:50.955377-05:00","created_by":"crs58","updated_at":"2026-01-05T11:10:24.395717-05:00","closed_at":"2026-01-05T11:10:24.395717-05:00","close_reason":"Superseded by ironstar-a9b.3 (fmodel-rust event store schema). Schema includes both offset (global sequence) and previous_id (optimistic locking).","dependencies":[{"issue_id":"ironstar-nyp.35","depends_on_id":"ironstar-nyp","type":"parent-child","created_at":"2025-12-27T14:20:50.958113-05:00","created_by":"daemon"}]}
{"id":"ironstar-nyp.36","title":"Document and enforce subscribe-before-replay invariant","description":"Elevate the subscribe-before-replay pattern to a Critical Invariant section in SSE lifecycle documentation. Add assertions/tests.\n\nCritical invariant: SSE handlers must subscribe to the event bus BEFORE loading historical events to prevent race condition where events are missed during replay-to-subscription gap.\n\nSee sse-connection-lifecycle.md for full pattern description.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-27T14:20:52.094414-05:00","created_by":"crs58","updated_at":"2025-12-27T14:20:52.094414-05:00","dependencies":[{"issue_id":"ironstar-nyp.36","depends_on_id":"ironstar-nyp","type":"parent-child","created_at":"2025-12-27T14:20:52.099143-05:00","created_by":"daemon"}]}
{"id":"ironstar-nyp.37","title":"Document Galois connection properties in Projection trait","description":"Document Galois connection properties in Projection trait\n\n**Algebraic foundation:** semantic-model.md § Projections as Galois connections\n\n**Properties to document:**\n- Prefix order definition on EventLog\n- Adjunction properties (abstract ∘ concrete = id, concrete ∘ abstract ≤ id)\n- Why projections are lossy (many events → same view)\n- Canonical representative selection\n\n**Verification strategy:**\n- Property tests for adjunction laws in tests/galois_connection.rs\n- QuickCheck: abstract(concrete(v)) == v for all views\n- QuickCheck: length(concrete(abstract(events))) \u003c= length(events)","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-29T17:51:44.029425-05:00","created_by":"crs58","updated_at":"2026-01-03T18:45:22.526517-05:00","dependencies":[{"issue_id":"ironstar-nyp.37","depends_on_id":"ironstar-nyp","type":"parent-child","created_at":"2025-12-29T17:51:44.030121-05:00","created_by":"daemon"},{"issue_id":"ironstar-nyp.37","depends_on_id":"ironstar-a9b.5","type":"blocks","created_at":"2026-01-06T13:46:01.291408-05:00","created_by":"crs58"}]}
{"id":"ironstar-nyp.38","title":"Implement quotient equivalence testing for projections","description":"Add test utilities verifying quotient monoid properties:\n- Equivalence relation is reflexive, symmetric, transitive\n- Congruence holds: e₁ ≡ e₂ implies (e₁ ++ e₃) ≡ (e₂ ++ e₃)\n- Log compaction produces equivalent projection\n- Snapshot + replay equals full replay\n\nReference: semantic-model.md 'Read models as quotients' section","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-29T17:51:45.756069-05:00","created_by":"crs58","updated_at":"2025-12-29T17:51:45.756069-05:00","dependencies":[{"issue_id":"ironstar-nyp.38","depends_on_id":"ironstar-nyp","type":"parent-child","created_at":"2025-12-29T17:51:45.760118-05:00","created_by":"daemon"},{"issue_id":"ironstar-nyp.38","depends_on_id":"ironstar-a9b.5","type":"blocks","created_at":"2026-01-06T13:46:01.395235-05:00","created_by":"crs58"}]}
{"id":"ironstar-nyp.39","title":"Coordinate event time, processing time, and table version time","description":"Ensure consistent handling of three temporal axes:\n- Event time: created_at in domain events (when event occurred)\n- Processing time: global_sequence (when event persisted)\n- Table version time: DuckLake snapshots (when analytics snapshot taken)\n\nImplement:\n- Clear separation in event schema\n- SSE Last-Event-ID uses processing time\n- DuckDB queries can specify version time\n- Documentation of temporal query semantics\n\nReference: semantic-model.md 'Bitemporal semantics' section","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-29T17:51:46.877881-05:00","created_by":"crs58","updated_at":"2025-12-29T17:51:46.877881-05:00","dependencies":[{"issue_id":"ironstar-nyp.39","depends_on_id":"ironstar-nyp","type":"parent-child","created_at":"2025-12-29T17:51:46.880386-05:00","created_by":"daemon"},{"issue_id":"ironstar-nyp.39","depends_on_id":"ironstar-nyp.35","type":"implements","created_at":"2025-12-29T17:52:07.915471-05:00","created_by":"daemon"}]}
{"id":"ironstar-nyp.4","title":"Implement SQLite connection pooling and configuration","description":"Configure SqlitePool with PRAGMA settings for event sourcing: journal_mode=WAL, synchronous=FULL, cache_size=-64000 (64MB), temp_store=MEMORY. Optimizes for durability and read throughput on the event store workload.\nLocal refs: ~/projects/rust-workspace/sqlx","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-18T09:36:29.01645-05:00","updated_at":"2025-12-18T09:36:29.168144-05:00","dependencies":[{"issue_id":"ironstar-nyp.4","depends_on_id":"ironstar-nyp","type":"parent-child","created_at":"2025-12-18T09:36:29.016925-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-nyp.4","depends_on_id":"ironstar-a9b.1","type":"blocks","created_at":"2026-01-06T13:46:00.708806-05:00","created_by":"crs58"}]}
{"id":"ironstar-nyp.40","title":"Document CQRS as profunctor P: Command^op × View → Set","description":"Document CQRS as profunctor P: Command^op × View → Set\n\n**Algebraic foundation:** semantic-model.md § Profunctor architecture\n\n**Properties to document:**\n- Contravariance in commands (input transformations compose backwards)\n- Covariance in views (output transformations compose forwards)\n- Event log as pivot point (mediating data structure)\n- Independent scaling follows from profunctor factorization\n\n**Practical implication:** Commands and queries can be modified independently as long as event schema is stable.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-29T17:51:48.047631-05:00","created_by":"crs58","updated_at":"2026-01-03T18:45:33.786516-05:00","dependencies":[{"issue_id":"ironstar-nyp.40","depends_on_id":"ironstar-nyp","type":"parent-child","created_at":"2025-12-29T17:51:48.050523-05:00","created_by":"daemon"},{"issue_id":"ironstar-nyp.40","depends_on_id":"ironstar-nyp.2","type":"documents","created_at":"2025-12-29T17:52:08.762495-05:00","created_by":"daemon"}]}
{"id":"ironstar-nyp.5","title":"Implement tokio broadcast event bus","description":"Implement tokio::broadcast fallback for environments with less than 10MB memory constraints. See docs/notes/architecture/infrastructure/distributed-event-bus-migration.md for usage criteria. Primary implementation uses ZenohEventBus. Local refs: ~/projects/rust-workspace/tokio","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-18T09:36:29.472808-05:00","updated_at":"2025-12-26T15:25:16.074353-05:00","dependencies":[{"issue_id":"ironstar-nyp.5","depends_on_id":"ironstar-nyp","type":"parent-child","created_at":"2025-12-18T09:36:29.473186-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-nyp.5","depends_on_id":"ironstar-2nt.2","type":"blocks","created_at":"2025-12-18T09:36:29.782679-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-nyp.5","depends_on_id":"ironstar-nyp.19","type":"blocks","created_at":"2025-12-24T00:56:25.384896-05:00","created_by":"daemon"}]}
{"id":"ironstar-nyp.6","title":"Create Projection trait for read models","description":"Create Projection trait for read models implementing the Galois connection abstract/concrete pair and quotient monoid structure.\n\nThe trait defines the catamorphism algebra for state reconstruction:\n- apply(\u0026mut self, event: \u0026Event): the fold step (catamorphism algebra)\n- rebuild(): reconstruct from events (unique fold from initiality)\n\nProjections form a Galois connection with the event log:\n- abstract: EventLog → ReadModel (lossy, many-to-one)\n- concrete: ReadModel → EventLog (partial reconstruction)\n\nReference: denotational-semantics.md sections on Galois connection and quotients.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-18T09:36:29.944222-05:00","updated_at":"2026-01-06T13:46:01.685948-05:00","closed_at":"2026-01-06T13:46:01.685948-05:00","close_reason":"Superseded by fmodel-rust View struct which uses pure evolve(\u0026S, \u0026E) -\u003e S instead of mutable apply(\u0026mut self). Mathematical foundations (Galois connections) remain valid for fmodel View.","dependencies":[{"issue_id":"ironstar-nyp.6","depends_on_id":"ironstar-nyp","type":"parent-child","created_at":"2025-12-18T09:36:29.944617-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-nyp.6","depends_on_id":"ironstar-2nt.2","type":"blocks","created_at":"2025-12-18T09:36:30.240427-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-nyp.7","title":"Implement ProjectionManager with in-memory state","description":"Create ProjectionManager using fmodel-rust's MaterializedView pattern:\n\n```rust\nstruct ProjectionManager\u003cV: View\u003e {\n    materialized_view: MaterializedView\u003cV, ViewStateRepository\u003e,\n    zenoh_session: Arc\u003cSession\u003e,\n}\n\nimpl\u003cV: View\u003e ProjectionManager\u003cV\u003e {\n    async fn init(\n        event_repo: Arc\u003cdyn EventRepository\u003e,\n        view_repo: Arc\u003cdyn ViewStateRepository\u003e,\n        zenoh: Arc\u003cSession\u003e,\n    ) -\u003e Self {\n        // Subscribe to Zenoh key expressions for incremental updates\n        let subscriber = zenoh.subscribe(\"events/**\").await;\n        // MaterializedView handles state persistence\n    }\n    \n    async fn query\u003cQ\u003e(\u0026self, query: Q) -\u003e V::State {\n        self.materialized_view.fetch_state(\u0026query).await\n    }\n}\n```\n\nReplays events via EventRepository to build initial state, then subscribes to Zenoh for incremental updates.\nUses MaterializedView + ViewStateRepository from fmodel-rust.\n\nNote: Consider if this duplicates ironstar-a9b.8 (Wire Todo MaterializedView) - may need consolidation.\n\nLocal refs: ~/projects/rust-workspace/tokio, ~/projects/rust-workspace/fmodel-rust\n","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-18T09:36:30.40292-05:00","updated_at":"2026-01-06T13:46:01.778181-05:00","closed_at":"2026-01-06T13:46:01.778181-05:00","close_reason":"Superseded by ironstar-a9b.8 (Wire Todo MaterializedView). Use fmodel-rust MaterializedView per aggregate rather than centralized ProjectionManager.","dependencies":[{"issue_id":"ironstar-nyp.7","depends_on_id":"ironstar-nyp","type":"parent-child","created_at":"2025-12-18T09:36:30.403348-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-nyp.7","depends_on_id":"ironstar-nyp.6","type":"blocks","created_at":"2025-12-18T09:36:30.695379-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-nyp.7","depends_on_id":"ironstar-nyp.5","type":"blocks","created_at":"2025-12-18T09:36:30.84505-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-nyp.7","depends_on_id":"ironstar-nyp.3","type":"blocks","created_at":"2025-12-18T09:36:30.98915-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-nyp.7","depends_on_id":"ironstar-nyp.27","type":"blocks","created_at":"2025-12-26T15:26:27.561713-05:00","created_by":"daemon"}]}
{"id":"ironstar-nyp.8","title":"Implement SSE 15-second keep-alive comment stream","description":"Implement SSE 15-second keep-alive comment stream\n\nCritical: Enforce subscribe-before-replay invariant - subscribe to broadcast BEFORE loading historical events.\nSee sse-connection-lifecycle.md Critical Invariant section.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-18T09:36:31.149897-05:00","updated_at":"2026-01-19T13:50:12.611596-05:00","closed_at":"2026-01-19T13:50:12.611596-05:00","close_reason":"Implemented in ce97f85..6e31fec: KeepAliveStream, SseStreamBuilder with subscribe-before-replay, 9 tests","dependencies":[{"issue_id":"ironstar-nyp.8","depends_on_id":"ironstar-nyp","type":"parent-child","created_at":"2025-12-18T09:36:31.150257-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-nyp.8","depends_on_id":"ironstar-nyp.5","type":"blocks","created_at":"2025-12-18T09:36:31.455567-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-nyp.8","depends_on_id":"ironstar-nyp.27","type":"blocks","created_at":"2025-12-26T15:26:25.335131-05:00","created_by":"daemon"}]}
{"id":"ironstar-nyp.9","title":"Implement SQLite session store with SessionStore trait","description":"Implement SessionStore trait with SQLite backend. Schema: id TEXT PRIMARY KEY, user_id TEXT, created_at, last_seen_at, expires_at TIMESTAMP, data JSON. Methods: create, get, update_data, touch, delete, cleanup_expired. Use 24-byte cryptographic session IDs. See docs/notes/architecture/infrastructure/session-management.md and session-implementation.md.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-18T09:36:31.621427-05:00","updated_at":"2025-12-24T10:03:56.8379-05:00","dependencies":[{"issue_id":"ironstar-nyp.9","depends_on_id":"ironstar-nyp","type":"parent-child","created_at":"2025-12-18T09:36:31.621833-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-nyp.9","depends_on_id":"ironstar-2nt.2","type":"blocks","created_at":"2025-12-18T09:36:31.922002-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-r5f","title":"ironstar-6lq","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-18T18:03:01.804381-05:00","updated_at":"2025-12-26T20:51:40.972343-05:00","close_reason":"Invalid issue - title was copy of epic ID with no meaningful content","deleted_at":"2025-12-26T20:51:40.972343-05:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"ironstar-r62","title":"Presentation layer","description":"Presentation layer with hypertext templates and datastar SSE streaming. See ~/projects/rust-workspace/ironstar/docs/notes/architecture/decisions/backend-core-decisions.md and cqrs/sse-connection-lifecycle.md","status":"open","priority":0,"issue_type":"epic","created_at":"2025-12-18T09:36:33.483281-05:00","updated_at":"2025-12-24T10:03:56.88392-05:00","dependencies":[{"issue_id":"ironstar-r62","depends_on_id":"ironstar-nyp","type":"blocks","created_at":"2025-12-18T09:36:33.826437-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-r62","depends_on_id":"ironstar-ny3","type":"blocks","created_at":"2025-12-18T09:36:33.964324-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-r62.1","title":"Add justfile with development and build tasks","description":"Create justfile at repository root with recipes: dev, dev-bg, gen-types, build-frontend, build-backend, build (full), test, fmt, lint, check, ci. Centralizes task orchestration following Rust conventions.\nLocal refs: ~/projects/rust-workspace/rust-nix-template/, ~/projects/nix-workspace/typescript-nix-template/justfile","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-18T09:36:34.128996-05:00","updated_at":"2025-12-18T09:36:34.272449-05:00","dependencies":[{"issue_id":"ironstar-r62.1","depends_on_id":"ironstar-r62","type":"parent-child","created_at":"2025-12-18T09:36:34.129374-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-r62.10","title":"Implement component-level hypertext templates","description":"Create reusable component functions (e.g., button, form_field, loading_spinner) returning impl Renderable. Components accept data and emit proper Datastar attributes (data-on:, data-show, data-bind). These compose into page templates.\nLocal refs: ~/projects/rust-workspace/hypertext","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-18T09:36:38.954048-05:00","updated_at":"2025-12-18T09:36:39.105823-05:00","dependencies":[{"issue_id":"ironstar-r62.10","depends_on_id":"ironstar-r62","type":"parent-child","created_at":"2025-12-18T09:36:38.954424-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-r62.10","depends_on_id":"ironstar-r62.9","type":"blocks","created_at":"2025-12-18T09:36:39.254727-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-r62.10","depends_on_id":"ironstar-ny3.18","type":"blocks","created_at":"2026-01-06T11:12:18.008605-05:00","created_by":"crs58"}],"comments":[{"id":4,"issue_id":"ironstar-r62.10","author":"crs58","text":"Note: Templates should use CUBE CSS composition classes (.stack, .cluster, .center, .sidebar, .switcher, .box, .cover, .grid) for layout. See ironstar-ny3.18 for composition layer implementation and docs/notes/architecture/frontend/css-architecture.md for usage patterns.","created_at":"2026-01-06T16:12:47Z"}]}
{"id":"ironstar-r62.11","title":"Implement router composition with feature routes","description":"Create main Router that merges feature modules. Each feature provides route() -\u003e Router\u003cAppState\u003e composing GET/POST/SSE handlers. Use Router::merge to combine features and apply State layer to inject AppState.\nLocal refs: ~/projects/rust-workspace/axum","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T09:36:39.421053-05:00","updated_at":"2025-12-18T18:02:42.589988-05:00","dependencies":[{"issue_id":"ironstar-r62.11","depends_on_id":"ironstar-r62","type":"parent-child","created_at":"2025-12-18T09:36:39.421426-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-r62.11","depends_on_id":"ironstar-r62.5","type":"blocks","created_at":"2025-12-18T09:36:39.724394-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-r62.11","depends_on_id":"ironstar-r62.6","type":"blocks","created_at":"2025-12-18T09:36:39.872394-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-r62.11","depends_on_id":"ironstar-r62.7","type":"blocks","created_at":"2025-12-18T09:36:40.023827-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-r62.12","title":"Implement graceful shutdown signal handling","description":"Add tokio signal handling for SIGTERM/SIGINT:\n\n```rust\nasync fn shutdown_signal() {\n    let ctrl_c = tokio::signal::ctrl_c();\n    #[cfg(unix)]\n    let terminate = async {\n        tokio::signal::unix::signal(SignalKind::terminate())\n            .unwrap()\n            .recv()\n            .await;\n    };\n    \n    tokio::select! {\n        _ = ctrl_c =\u003e info!(\"Received Ctrl+C\"),\n        _ = terminate =\u003e info!(\"Received SIGTERM\"),\n    }\n    \n    info!(\"Initiating graceful shutdown...\");\n    // Zenoh session closes automatically via Drop\n    // SQLite pool closes automatically via Drop\n}\n```\n\nClean shutdown of EventRepository connections and Zenoh session.\n\nLocal refs: ~/projects/rust-workspace/tokio, ~/projects/rust-workspace/zenoh\n","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T09:36:40.187602-05:00","updated_at":"2026-01-05T11:13:12.595692-05:00","dependencies":[{"issue_id":"ironstar-r62.12","depends_on_id":"ironstar-r62","type":"parent-child","created_at":"2025-12-18T09:36:40.187964-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-r62.12","depends_on_id":"ironstar-r62.11","type":"blocks","created_at":"2025-12-18T09:36:40.505054-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-r62.13","title":"Wire all components together in main.rs","description":"Create main.rs that initializes all services and starts the axum server:\n\n```rust\n#[tokio::main]\nasync fn main() -\u003e Result\u003c(), AppError\u003e {\n    // Initialize tracing\n    tracing_subscriber::fmt::init();\n    \n    // Load configuration\n    let config = Config::from_env()?;\n    \n    // Initialize AppState (EventRepository, ViewRepository, Zenoh, Aggregates)\n    let state = AppState::new(\u0026config).await?;\n    \n    // Compose Router\n    let app = Router::new()\n        .merge(todo_routes())\n        .merge(auth_routes())\n        .layer(SessionLayer::new(state.session_store.clone()))\n        .with_state(state);\n    \n    // Start server with graceful shutdown\n    let listener = TcpListener::bind(\u0026config.bind_address).await?;\n    axum::serve(listener, app)\n        .with_graceful_shutdown(shutdown_signal())\n        .await?;\n    \n    Ok(())\n}\n```\n\nOrchestration layer tying EventRepository, ViewRepository, EventSourcedAggregate, MaterializedView, and Zenoh together.\n\nLocal refs: ~/projects/rust-workspace/axum, ~/projects/rust-workspace/tokio\n","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-18T09:36:40.666406-05:00","updated_at":"2026-01-05T11:13:12.453971-05:00","dependencies":[{"issue_id":"ironstar-r62.13","depends_on_id":"ironstar-r62","type":"parent-child","created_at":"2025-12-18T09:36:40.666805-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-r62.13","depends_on_id":"ironstar-r62.12","type":"blocks","created_at":"2025-12-18T09:36:40.957505-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-r62.14","title":"Implement dev-only hotreload SSE endpoint","description":"Create conditional compilation block (#[cfg(debug_assertions)]) with GET /hotreload SSE endpoint that broadcasts ExecuteScript(window.location.reload()) when triggered, plus POST /hotreload/trigger endpoint. Coordinates with cargo-watch for browser reload on build completion.\nLocal refs: ~/projects/rust-workspace/axum, ~/projects/rust-workspace/datastar-rust","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T09:36:41.125987-05:00","updated_at":"2025-12-18T09:36:41.277296-05:00","dependencies":[{"issue_id":"ironstar-r62.14","depends_on_id":"ironstar-r62","type":"parent-child","created_at":"2025-12-18T09:36:41.126372-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-r62.14","depends_on_id":"ironstar-r62.5","type":"blocks","created_at":"2025-12-18T09:36:41.437399-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-r62.15","title":"Implement health check endpoint for process-compose","description":"Create GET /health endpoint that returns 200 OK when server is ready. Used by process-compose readiness_probe to coordinate startup dependency ordering between db-init, backend, frontend, and hotreload processes.\nLocal refs: ~/projects/rust-workspace/axum","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T09:36:41.575801-05:00","updated_at":"2025-12-18T09:36:41.711432-05:00","dependencies":[{"issue_id":"ironstar-r62.15","depends_on_id":"ironstar-r62","type":"parent-child","created_at":"2025-12-18T09:36:41.576181-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-r62.15","depends_on_id":"ironstar-r62.11","type":"blocks","created_at":"2025-12-18T09:36:41.84948-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-r62.16","title":"Implement DatastarRequest extractor for HTML/SSE routing","description":"Create axum extractor that detects 'datastar-request: true' header to distinguish full HTML page requests from SSE fragment requests. Required for progressive enhancement pattern where initial page load returns full HTML and subsequent Datastar interactions return SSE fragments only. Reference: northstar essential-patterns.md DatastarRequest guard pattern.","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-26T22:08:22.05701-05:00","updated_at":"2025-12-26T22:08:22.05701-05:00","dependencies":[{"issue_id":"ironstar-r62.16","depends_on_id":"ironstar-r62","type":"parent-child","created_at":"2025-12-26T22:08:22.057519-05:00","created_by":"daemon"}]}
{"id":"ironstar-r62.17","title":"Implement comonadic signal composition laws verification","description":"Add documentation and tests for Datastar signal comonad laws:\n- extract: Signal a → a (getting current value via $signal)\n- extend: (Signal a → b) → Signal a → Signal b (computed signals)\n\nVerify laws:\n- extend extract = id\n- extract ∘ extend f = f\n- extend f ∘ extend g = extend (f ∘ extend g)\n\nUpdate signal-contracts.md with comonad explanation.\n\nReference: semantic-model.md 'Client signals as comonad' section","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-29T17:51:49.141156-05:00","created_by":"crs58","updated_at":"2025-12-29T17:51:49.141156-05:00","dependencies":[{"issue_id":"ironstar-r62.17","depends_on_id":"ironstar-r62","type":"parent-child","created_at":"2025-12-29T17:51:49.143895-05:00","created_by":"daemon"},{"issue_id":"ironstar-r62.17","depends_on_id":"ironstar-2nt.5","type":"implements","created_at":"2025-12-29T17:52:09.685006-05:00","created_by":"daemon"}]}
{"id":"ironstar-r62.2","title":"Create devShell module with tools and environment","description":"Implement nix/modules/devshell.nix defining default devShell with inputsFrom rust devShell and pre-commit hooks, plus packages: just, cargo-watch, pnpm, nodejs, process-compose, sqlite3, nixd, bacon. Complete development environment.\nLocal refs: ~/projects/rust-workspace/rust-nix-template/nix/modules/devshell.nix, ~/projects/nix-workspace/typescript-nix-template/modules/dev-shell.nix","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-18T09:36:34.433413-05:00","updated_at":"2025-12-18T09:36:34.591083-05:00","dependencies":[{"issue_id":"ironstar-r62.2","depends_on_id":"ironstar-r62","type":"parent-child","created_at":"2025-12-18T09:36:34.4338-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-r62.3","title":"Configure pre-commit hooks for code quality","description":"Create nix/modules/pre-commit.nix with git hooks for rustfmt, clippy, prettier (frontend), and linters. Set up .pre-commit-config.yaml to integrate with devShell via git-hooks.nix flake module.\nLocal refs: ~/projects/rust-workspace/rust-nix-template/nix/modules/pre-commit.nix","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-18T09:36:34.758546-05:00","updated_at":"2025-12-18T09:36:34.920424-05:00","dependencies":[{"issue_id":"ironstar-r62.3","depends_on_id":"ironstar-r62","type":"parent-child","created_at":"2025-12-18T09:36:34.75891-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-r62.3","depends_on_id":"ironstar-r62.2","type":"blocks","created_at":"2025-12-18T09:36:35.07341-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-r62.4","title":"Define AppState struct with all dependencies","description":"Create AppState struct holding all application dependencies:\n\n```rust\npub struct AppState {\n    pub event_repository: Arc\u003cSqliteEventRepository\u003e,\n    pub view_repository: Arc\u003cSqliteViewRepository\u003e,\n    pub session_store: Arc\u003cSessionStore\u003e,\n    pub zenoh_session: Arc\u003czenoh::Session\u003e,\n    pub todo_aggregate: Arc\u003cEventSourcedAggregate\u003cTodoDecider, SqliteEventRepository\u003e\u003e,\n    pub todo_view: Arc\u003cMaterializedView\u003cTodoView, SqliteViewRepository\u003e\u003e,\n}\n```\n\nInitialize services and rebuild projections at startup:\n\n```rust\nimpl AppState {\n    pub async fn new(config: \u0026Config) -\u003e Result\u003cSelf, AppError\u003e {\n        let pool = SqlitePool::connect(\u0026config.database_url).await?;\n        let event_repository = Arc::new(SqliteEventRepository::new(pool.clone()));\n        let view_repository = Arc::new(SqliteViewRepository::new(pool.clone()));\n        \n        // Wire EventSourcedAggregate with Decider + Repository\n        let todo_aggregate = Arc::new(EventSourcedAggregate::new(\n            event_repository.clone(),\n            todo_decider(),\n        ));\n        \n        // Wire MaterializedView\n        let todo_view = Arc::new(MaterializedView::new(\n            view_repository.clone(),\n            todo_view(),\n        ));\n        \n        Ok(Self { ... })\n    }\n}\n```\n\nLocal refs: ~/projects/rust-workspace/axum, ~/projects/rust-workspace/fmodel-rust\n","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T09:36:35.23874-05:00","updated_at":"2026-01-05T11:12:55.235786-05:00","dependencies":[{"issue_id":"ironstar-r62.4","depends_on_id":"ironstar-r62","type":"parent-child","created_at":"2025-12-18T09:36:35.239109-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-r62.4","depends_on_id":"ironstar-nyp.3","type":"blocks","created_at":"2025-12-18T09:36:35.534843-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-r62.4","depends_on_id":"ironstar-nyp.10","type":"blocks","created_at":"2025-12-18T09:36:35.687986-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-r62.4","depends_on_id":"ironstar-nyp.7","type":"blocks","created_at":"2025-12-18T09:36:35.85622-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-r62.4","depends_on_id":"ironstar-nyp.5","type":"blocks","created_at":"2025-12-18T09:36:36.003278-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-r62.4","depends_on_id":"ironstar-nyp.27","type":"blocks","created_at":"2025-12-26T15:26:31.686342-05:00","created_by":"daemon"},{"issue_id":"ironstar-r62.4","depends_on_id":"ironstar-a9b.7","type":"blocks","created_at":"2026-01-05T11:13:46.469923-05:00","created_by":"crs58"},{"issue_id":"ironstar-r62.4","depends_on_id":"ironstar-a9b.8","type":"blocks","created_at":"2026-01-05T11:13:48.103296-05:00","created_by":"crs58"}]}
{"id":"ironstar-r62.5","title":"Implement SSE feed endpoint with event replay","description":"Create async sse_feed handler:\nasync fn sse_feed(headers: HeaderMap, State(state): State\u003cAppState\u003e) -\u003e Sse\u003cimpl Stream\u003cItem = Result\u003cEvent, Infallible\u003e\u003e\u003e {\n    let last_event_id = headers.get(\"Last-Event-ID\").and_then(|h| h.to_str().ok()).and_then(|s| s.parse().ok()).unwrap_or(0);\n    let replay = state.event_store.query_since_sequence(last_event_id).await.unwrap().into_iter().map(|e| Event::default().id(e.sequence).data(e.payload));\n    let live = BroadcastStream::new(state.event_bus.subscribe()).filter_map(|e| e.ok()).map(|e| Event::default().id(e.sequence).data(e.payload));\n    Sse::new(stream::iter(replay).chain(live))\n}\nExtracts Last-Event-ID, subscribes to broadcast channel, replays events since that ID from event store, chains with live stream, and emits SSE events with id field set to sequence number. Implements reconnection recovery.\nLocal refs: ~/projects/rust-workspace/axum, ~/projects/rust-workspace/datastar-rust, ~/projects/lakescope-workspace/datastar/sdk/ADR.md","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T09:36:36.167614-05:00","updated_at":"2025-12-18T18:02:45.291707-05:00","dependencies":[{"issue_id":"ironstar-r62.5","depends_on_id":"ironstar-r62","type":"parent-child","created_at":"2025-12-18T09:36:36.168035-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-r62.5","depends_on_id":"ironstar-r62.4","type":"blocks","created_at":"2025-12-18T09:36:36.47907-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-r62.5","depends_on_id":"ironstar-nyp.8","type":"blocks","created_at":"2025-12-18T09:36:36.632496-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-r62.6","title":"Implement command POST handlers","description":"Create POST handlers using ReadSignals extractor:\nasync fn add_todo(ReadSignals(cmd): ReadSignals\u003cAddTodoCommand\u003e, State(state): State\u003cAppState\u003e) -\u003e impl IntoResponse {\n    let validated = cmd.validate()?;\n    let event = aggregate.apply_command(validated)?;\n    let seq = state.event_store.append(\u0026event).await?;\n    state.event_bus.send(StoredEvent { sequence: seq, event })?;\n    StatusCode::ACCEPTED\n}\nExtracts Command from ReadSignals\u003cT\u003e extractor (requires #[derive(Deserialize)] on signal types), calls command handler (pure logic), appends events to event store, broadcasts to subscribers, and returns 202 Accepted immediately WITHOUT waiting for SSE update. Implements CQRS write path.\nLocal refs: ~/projects/rust-workspace/axum, ~/projects/rust-workspace/datastar-rust","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T09:36:36.791045-05:00","updated_at":"2025-12-18T18:02:47.844717-05:00","dependencies":[{"issue_id":"ironstar-r62.6","depends_on_id":"ironstar-r62","type":"parent-child","created_at":"2025-12-18T09:36:36.791445-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-r62.6","depends_on_id":"ironstar-r62.4","type":"blocks","created_at":"2025-12-18T09:36:37.094634-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-r62.6","depends_on_id":"ironstar-2nt.4","type":"blocks","created_at":"2025-12-18T09:36:37.252282-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-r62.7","title":"Implement query GET handlers","description":"Create GET handlers that call query handler (reads from projections), render hypertext template, and return as HTML or JSON. No event persistence, just read path. Handlers use State extractor to access AppState containing projections.\nLocal refs: ~/projects/rust-workspace/axum, ~/projects/rust-workspace/hypertext","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-18T09:36:37.423259-05:00","updated_at":"2025-12-18T09:36:37.579432-05:00","dependencies":[{"issue_id":"ironstar-r62.7","depends_on_id":"ironstar-r62","type":"parent-child","created_at":"2025-12-18T09:36:37.423673-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-r62.7","depends_on_id":"ironstar-r62.4","type":"blocks","created_at":"2025-12-18T09:36:37.727668-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-r62.7","depends_on_id":"ironstar-a9b.8","type":"blocks","created_at":"2026-01-06T13:46:00.990817-05:00","created_by":"crs58"}]}
{"id":"ironstar-r62.8","title":"Implement RenderableToDatastar conversion trait","description":"Implement RenderableToDatastar conversion trait preserving structure for SSE transport composition.\n\nThis trait implements the transformation F: DomainState → PatchEvent:\n- Converts hypertext Buffer to PatchElements (DOM mutations)\n- Converts signal state to PatchSignals (reactive updates)\n\nThe transformation is a deterministic function (not a functor on individual events) that preserves event identity: no-op state produces no patches.\n\nReference: denotational-semantics.md 'SSE streaming' section.","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-18T09:36:38.034362-05:00","updated_at":"2025-12-29T17:56:48.87851-05:00","dependencies":[{"issue_id":"ironstar-r62.8","depends_on_id":"ironstar-r62","type":"parent-child","created_at":"2025-12-18T09:36:38.034747-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-r62.9","title":"Create base layout template with Datastar initialization","description":"Implement base_layout() function using hypertext::maud! that renders html \u003e head \u003e body with conditional hotreload div (data-init for dev mode), CSS link to bundle.[hash].css, and JS script for datastar.js. Establishes HTML structure for all pages.\nLocal refs: ~/projects/rust-workspace/hypertext, ~/projects/lakescope-workspace/datastar-go-nats-template-northstar","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-18T09:36:38.35148-05:00","updated_at":"2025-12-18T09:36:38.492703-05:00","dependencies":[{"issue_id":"ironstar-r62.9","depends_on_id":"ironstar-r62","type":"parent-child","created_at":"2025-12-18T09:36:38.351866-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-r62.9","depends_on_id":"ironstar-r62.8","type":"blocks","created_at":"2025-12-18T09:36:38.638299-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-r62.9","depends_on_id":"ironstar-ny3.13","type":"blocks","created_at":"2025-12-18T09:36:38.789565-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-rjs","title":"Document nixpkgs-unstable Darwin framework migration","description":"Session discovery: pkgs.darwin.apple_sdk.frameworks is deprecated in nixpkgs-unstable.\nError: darwin.apple_sdk_11_0 has been removed as legacy compatibility stub.\n\nFor now, ironstar's crate.nix uses minimal deps (just pkg-config + openssl on Linux).\nIf Darwin frameworks become needed for specific dependencies:\n- Check migration guide: https://nixos.org/manual/nixpkgs/stable/#sec-darwin-legacy-frameworks\n- Test with pkgs.apple-sdk.frameworks or direct pkgs.darwin.* access\n- May need to pin nixpkgs to a version before the breaking change\n\nThis is informational - most Rust builds work fine without explicit Darwin frameworks.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T17:26:37.364221-05:00","updated_at":"2025-12-18T17:26:37.364221-05:00"}
{"id":"ironstar-sj6","title":"Reference: DDD Starter Modelling Process integration","description":"Ironstar follows the 8-step DDD Starter Modelling Process adapted for algebraic FDM. See docs/notes/architecture/core/discovery-and-specification.md for mapping of EventStorming artifacts to type system.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T18:43:35.731516-05:00","created_by":"crs58","updated_at":"2026-01-03T18:43:35.731516-05:00"}
{"id":"ironstar-ubj","title":"Act 1: Expand data problem slides","description":"Flesh out slides 2-8. Add speaker notes. Consider: more concrete examples of AnnData failures, visual showing exponential runtime growth, clearer AnnSQL benchmark presentation.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T01:16:39.863966-05:00","updated_at":"2025-12-26T20:51:42.26952-05:00","dependencies":[{"issue_id":"ironstar-ubj","depends_on_id":"ironstar-0tk","type":"parent-child","created_at":"2025-12-19T01:17:24.946865-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-ubj","depends_on_id":"ironstar-edx","type":"blocks","created_at":"2025-12-19T01:17:34.882181-05:00","created_by":"daemon","metadata":"{}"}],"deleted_at":"2025-12-26T20:51:42.26952-05:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"ironstar-v4y","title":"Multi-crate workspace decomposition","description":"Implement 8-layer crate decomposition from crate-architecture.md. Includes common-enums/types/utils (Layer 0), ironstar-domain/commands/events (Layer 1), ironstar-app (Layer 2), ironstar-interfaces (Layer 3), ironstar-adapters/analytics/projections/config (Layer 4), ironstar-services (Layer 5), ironstar-web (Layer 6), ironstar binary (Layer 7). Deferred until single-crate grows beyond 800 lines or coupling becomes problematic.","status":"tombstone","priority":4,"issue_type":"epic","created_at":"2025-12-24T00:44:53.257379-05:00","updated_at":"2025-12-26T20:51:44.455177-05:00","deleted_at":"2025-12-26T20:51:44.455177-05:00","deleted_by":"daemon","delete_reason":"delete","original_type":"epic"}
{"id":"ironstar-v4y.1","title":"Define common-enums crate structure","description":"Layer 0 foundation crate. Contains: AggregateType, EventType, ErrorCode, FilterType enums. No ironstar dependencies. See crate-architecture.md.","status":"tombstone","priority":4,"issue_type":"task","created_at":"2025-12-24T00:54:33.685791-05:00","updated_at":"2025-12-26T20:51:44.4291-05:00","dependencies":[{"issue_id":"ironstar-v4y.1","depends_on_id":"ironstar-v4y","type":"parent-child","created_at":"2025-12-24T00:54:33.688152-05:00","created_by":"daemon"}],"deleted_at":"2025-12-26T20:51:44.4291-05:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"ironstar-v4y.2","title":"Define common-types crate structure","description":"Layer 0 foundation crate. Contains: MinorUnit, Timestamp, Sequence newtypes. TodoId, TodoText smart constructors with validation. See crate-architecture.md.","status":"tombstone","priority":4,"issue_type":"task","created_at":"2025-12-24T00:54:34.864801-05:00","updated_at":"2025-12-26T20:51:44.438125-05:00","dependencies":[{"issue_id":"ironstar-v4y.2","depends_on_id":"ironstar-v4y","type":"parent-child","created_at":"2025-12-24T00:54:34.867052-05:00","created_by":"daemon"}],"deleted_at":"2025-12-26T20:51:44.438125-05:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"ironstar-v4y.3","title":"Define common-utils crate structure","description":"Layer 0 foundation crate. Contains: crypto helpers, validation utilities, serialization helpers, extension traits. See crate-architecture.md.","status":"tombstone","priority":4,"issue_type":"task","created_at":"2025-12-24T00:54:35.655739-05:00","updated_at":"2025-12-26T20:51:44.446927-05:00","dependencies":[{"issue_id":"ironstar-v4y.3","depends_on_id":"ironstar-v4y","type":"parent-child","created_at":"2025-12-24T00:54:35.656286-05:00","created_by":"daemon"}],"deleted_at":"2025-12-26T20:51:44.446927-05:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"ironstar-ym1","title":"Polish diagrams for visual consistency","description":"Ensure all fletcher diagrams use consistent: node sizing, spacing, colors, edge styles. Consider adding subtle animations or build-up for complex diagrams.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T01:16:56.931502-05:00","updated_at":"2025-12-26T20:51:42.278046-05:00","dependencies":[{"issue_id":"ironstar-ym1","depends_on_id":"ironstar-0tk","type":"parent-child","created_at":"2025-12-19T01:17:25.800477-05:00","created_by":"daemon","metadata":"{}"}],"deleted_at":"2025-12-26T20:51:42.278046-05:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"ironstar-z4s","title":"Act 4: Expand vision slides","description":"Flesh out slides 20-24. Add speaker notes. Consider: more compelling architecture diagram, concrete demo scenario, stronger call-to-action.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T01:16:54.364268-05:00","updated_at":"2025-12-26T20:51:42.286713-05:00","dependencies":[{"issue_id":"ironstar-z4s","depends_on_id":"ironstar-0tk","type":"parent-child","created_at":"2025-12-19T01:17:25.464812-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-z4s","depends_on_id":"ironstar-edx","type":"blocks","created_at":"2025-12-19T01:17:35.347563-05:00","created_by":"daemon","metadata":"{}"}],"deleted_at":"2025-12-26T20:51:42.286713-05:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"ironstar-zuv","title":"Testing and integration","description":"Comprehensive test coverage including event store integration tests (SQLite append/query semantics), projection tests (rebuild correctness, RwLock concurrency safety), and end-to-end handler tests (command -\u003e event -\u003e broadcast -\u003e projection -\u003e SSE). Uses temporary databases for isolation and mock implementations for unit testing trait boundaries.","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-18T09:36:49.362385-05:00","updated_at":"2025-12-18T09:36:49.523108-05:00","dependencies":[{"issue_id":"ironstar-zuv","depends_on_id":"ironstar-e6k","type":"blocks","created_at":"2025-12-18T09:36:49.674336-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-zuv.1","title":"Create EventRepository integration tests","description":"Integration tests for SqliteEventRepository implementation.\n\n## Test Cases\n\n1. **Basic persistence**: append events, fetch_events returns them in order\n2. **Optimistic locking**: previous_id chain validation, concurrent write detection\n3. **Version provider**: version_provider returns latest event_id\n4. **Query extension methods**: query_since_sequence, earliest/latest_sequence\n5. **Stream isolation**: events from different aggregates don't interfere\n\n## Test Setup\n\n```rust\n#[sqlx::test]\nasync fn test_append_and_fetch(pool: SqlitePool) {\n    let repo = SqliteEventRepository::new(pool);\n    let events = repo.save(\u0026[test_event]).await?;\n    let fetched = repo.fetch_events(\u0026command).await?;\n    assert_eq!(fetched.len(), 1);\n}\n```\n\nUses sqlx::test for automatic database setup/teardown.\n\nLocal refs: ~/projects/rust-workspace/fmodel-rust-demo/tests/\n","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T09:36:49.833479-05:00","updated_at":"2026-01-05T11:12:26.468803-05:00","dependencies":[{"issue_id":"ironstar-zuv.1","depends_on_id":"ironstar-zuv","type":"parent-child","created_at":"2025-12-18T09:36:49.833822-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-zuv.1","depends_on_id":"ironstar-a9b.1","type":"blocks","created_at":"2026-01-06T13:46:00.892467-05:00","created_by":"crs58"}]}
{"id":"ironstar-zuv.2","title":"Create projection tests with mock EventRepository","description":"Unit tests for View projections using mock EventRepository.\n\n## Test Approach\n\nUse fmodel-rust's View pattern with test events:\n\n```rust\n#[test]\nfn test_todo_view_projection() {\n    let view = todo_view();\n    let state = (view.initial_state)();\n    \n    let state = (view.evolve)(\u0026state, \u0026TodoEvent::Created { id, text, created_at });\n    assert!(state.items.contains_key(\u0026id));\n    \n    let state = (view.evolve)(\u0026state, \u0026TodoEvent::Completed { completed_at });\n    assert_eq!(state.items[\u0026id].status, TodoStatus::Completed);\n}\n```\n\n## Mock EventRepository\n\nFor MaterializedView integration tests:\n\n```rust\nstruct MockEventRepository {\n    events: Vec\u003c(TestEvent, Uuid)\u003e,\n}\n\nimpl EventRepository\u003c_, _, _, _\u003e for MockEventRepository { ... }\n```\n\nNo database required - pure function testing.\n","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T09:36:50.305658-05:00","updated_at":"2026-01-05T11:12:26.610406-05:00","dependencies":[{"issue_id":"ironstar-zuv.2","depends_on_id":"ironstar-zuv","type":"parent-child","created_at":"2025-12-18T09:36:50.306049-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-zuv.2","depends_on_id":"ironstar-zuv.1","type":"blocks","created_at":"2025-12-18T18:02:56.610548-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-zuv.2","depends_on_id":"ironstar-a9b.8","type":"blocks","created_at":"2026-01-06T13:46:01.196273-05:00","created_by":"crs58"}]}
{"id":"ironstar-zuv.3","title":"Create end-to-end handler tests","description":"Write integration tests for complete command/query flow: POST command -\u003e event appended -\u003e broadcast sent -\u003e projection updated -\u003e SSE responds with new state. Use test utilities to initialize temporary AppState.\nLocal refs: ~/projects/rust-workspace/axum, ~/projects/rust-workspace/tokio","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T09:36:50.758414-05:00","updated_at":"2025-12-18T09:36:50.912006-05:00","dependencies":[{"issue_id":"ironstar-zuv.3","depends_on_id":"ironstar-zuv","type":"parent-child","created_at":"2025-12-18T09:36:50.758779-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-zuv.3","depends_on_id":"ironstar-r62.13","type":"blocks","created_at":"2025-12-18T09:36:51.063868-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-zuv.3","depends_on_id":"ironstar-zuv.2","type":"blocks","created_at":"2025-12-18T18:02:58.152168-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"ironstar-zuv.3","depends_on_id":"ironstar-zuv.1","type":"blocks","created_at":"2025-12-18T18:03:00.386207-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"ironstar-zuv.4","title":"Implement DeciderTestSpecification given/when/then DSL","description":"Implement testing infrastructure using fmodel-rust's DeciderTestSpecification DSL.\n\n## Given/When/Then Pattern\n\n```rust\nuse fmodel_rust::decider::DeciderTestSpecification;\n\n#[test]\nfn test_create_todo() {\n    DeciderTestSpecification::default()\n        .for_decider(todo_decider())\n        .given(vec![])  // No prior events\n        .when(TodoCommand::Create { id, text })\n        .then(vec![TodoEvent::Created { id, text, created_at }]);\n}\n\n#[test]\nfn test_complete_active_todo() {\n    DeciderTestSpecification::default()\n        .for_decider(todo_decider())\n        .given(vec![TodoEvent::Created { id, text, created_at }])\n        .when(TodoCommand::Complete)\n        .then_state(Some(TodoState { status: TodoStatus::Completed, .. }));\n}\n```\n\n## Acceptance Criteria\n\n- [ ] Tests for Todo Decider (create, complete, delete)\n- [ ] Tests for QuerySession Decider\n- [ ] Failure event tests (NotCreated, NotCompleted)\n- [ ] State assertion tests using then_state()\n\nReplaces custom AggregateTestFramework with fmodel-rust's built-in testing DSL.\n\nLocal refs: ~/projects/rust-workspace/fmodel-rust/tests/\n","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-26T18:30:49.130938-05:00","updated_at":"2026-01-05T11:12:26.335879-05:00","dependencies":[{"issue_id":"ironstar-zuv.4","depends_on_id":"ironstar-zuv","type":"parent-child","created_at":"2025-12-26T18:30:49.13447-05:00","created_by":"daemon"},{"issue_id":"ironstar-zuv.4","depends_on_id":"ironstar-2nt.2","type":"depends-on","created_at":"2025-12-26T18:30:54.690787-05:00","created_by":"daemon"},{"issue_id":"ironstar-zuv.4","depends_on_id":"ironstar-a9b.12","type":"blocks","created_at":"2026-01-05T11:13:49.048196-05:00","created_by":"crs58"}]}
